var Al=Object.defineProperty;var Ml=(r,t,e)=>t in r?Al(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var Ye=(r,t,e)=>Ml(r,typeof t!="symbol"?t+"":t,e);import{r as bo,c as wn,a as Co,b as je,n as Bl,g as yn}from"./index-MqyebW97.js";var bn={exports:{}};bn.exports;(function(r){(function(t,e){function i(l,n){if(!l)throw new Error(n||"Assertion failed")}function f(l,n){l.super_=n;var h=function(){};h.prototype=n.prototype,l.prototype=new h,l.prototype.constructor=l}function a(l,n,h){if(a.isBN(l))return l;this.negative=0,this.words=null,this.length=0,this.red=null,l!==null&&((n==="le"||n==="be")&&(h=n,n=10),this._init(l||0,n||10,h||"be"))}typeof t=="object"?t.exports=a:e.BN=a,a.BN=a,a.wordSize=26;var w;try{w=bo.Buffer}catch{}a.isBN=function(n){return n instanceof a?!0:n!==null&&typeof n=="object"&&n.constructor.wordSize===a.wordSize&&Array.isArray(n.words)},a.max=function(n,h){return n.cmp(h)>0?n:h},a.min=function(n,h){return n.cmp(h)<0?n:h},a.prototype._init=function(n,h,u){if(typeof n=="number")return this._initNumber(n,h,u);if(typeof n=="object")return this._initArray(n,h,u);h==="hex"&&(h=16),i(h===(h|0)&&h>=2&&h<=36),n=n.toString().replace(/\s+/g,"");var p=0;n[0]==="-"&&p++,h===16?this._parseHex(n,p):this._parseBase(n,h,p),n[0]==="-"&&(this.negative=1),this._strip(),u==="le"&&this._initArray(this.toArray(),h,u)},a.prototype._initNumber=function(n,h,u){n<0&&(this.negative=1,n=-n),n<67108864?(this.words=[n&67108863],this.length=1):n<4503599627370496?(this.words=[n&67108863,n/67108864&67108863],this.length=2):(i(n<9007199254740992),this.words=[n&67108863,n/67108864&67108863,1],this.length=3),u==="le"&&this._initArray(this.toArray(),h,u)},a.prototype._initArray=function(n,h,u){if(i(typeof n.length=="number"),n.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(n.length/3),this.words=new Array(this.length);for(var p=0;p<this.length;p++)this.words[p]=0;var m,d,o=0;if(u==="be")for(p=n.length-1,m=0;p>=0;p-=3)d=n[p]|n[p-1]<<8|n[p-2]<<16,this.words[m]|=d<<o&67108863,this.words[m+1]=d>>>26-o&67108863,o+=24,o>=26&&(o-=26,m++);else if(u==="le")for(p=0,m=0;p<n.length;p+=3)d=n[p]|n[p+1]<<8|n[p+2]<<16,this.words[m]|=d<<o&67108863,this.words[m+1]=d>>>26-o&67108863,o+=24,o>=26&&(o-=26,m++);return this._strip()};function C(l,n,h){for(var u=0,p=Math.min(l.length,h),m=0,d=n;d<p;d++){var o=l.charCodeAt(d)-48;u<<=4;var c;o>=49&&o<=54?c=o-49+10:o>=17&&o<=22?c=o-17+10:c=o,u|=c,m|=c}return i(!(m&240),"Invalid character in "+l),u}a.prototype._parseHex=function(n,h){this.length=Math.ceil((n.length-h)/6),this.words=new Array(this.length);for(var u=0;u<this.length;u++)this.words[u]=0;var p,m,d=0;for(u=n.length-6,p=0;u>=h;u-=6)m=C(n,u,u+6),this.words[p]|=m<<d&67108863,this.words[p+1]|=m>>>26-d&4194303,d+=24,d>=26&&(d-=26,p++);u+6!==h&&(m=C(n,h,u+6),this.words[p]|=m<<d&67108863,this.words[p+1]|=m>>>26-d&4194303),this._strip()};function b(l,n,h,u){for(var p=0,m=0,d=Math.min(l.length,h),o=n;o<d;o++){var c=l.charCodeAt(o)-48;p*=u,c>=49?m=c-49+10:c>=17?m=c-17+10:m=c,i(c>=0&&m<u,"Invalid character"),p+=m}return p}a.prototype._parseBase=function(n,h,u){this.words=[0],this.length=1;for(var p=0,m=1;m<=67108863;m*=h)p++;p--,m=m/h|0;for(var d=n.length-u,o=d%p,c=Math.min(d,d-o)+u,v=0,y=u;y<c;y+=p)v=b(n,y,y+p,h),this.imuln(m),this.words[0]+v<67108864?this.words[0]+=v:this._iaddn(v);if(o!==0){var M=1;for(v=b(n,y,n.length,h),y=0;y<o;y++)M*=h;this.imuln(M),this.words[0]+v<67108864?this.words[0]+=v:this._iaddn(v)}},a.prototype.copy=function(n){n.words=new Array(this.length);for(var h=0;h<this.length;h++)n.words[h]=this.words[h];n.length=this.length,n.negative=this.negative,n.red=this.red};function A(l,n){l.words=n.words,l.length=n.length,l.negative=n.negative,l.red=n.red}a.prototype._move=function(n){A(n,this)},a.prototype.clone=function(){var n=new a(null);return this.copy(n),n},a.prototype._expand=function(n){for(;this.length<n;)this.words[this.length++]=0;return this},a.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},a.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function"?a.prototype[Symbol.for("nodejs.util.inspect.custom")]=E:a.prototype.inspect=E;function E(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var F=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],S=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],_=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(n,h){n=n||10,h=h|0||1;var u;if(n===16||n==="hex"){u="";for(var p=0,m=0,d=0;d<this.length;d++){var o=this.words[d],c=((o<<p|m)&16777215).toString(16);m=o>>>24-p&16777215,m!==0||d!==this.length-1?u=F[6-c.length]+c+u:u=c+u,p+=2,p>=26&&(p-=26,d--)}for(m!==0&&(u=m.toString(16)+u);u.length%h!==0;)u="0"+u;return this.negative!==0&&(u="-"+u),u}if(n===(n|0)&&n>=2&&n<=36){var v=S[n],y=_[n];u="";var M=this.clone();for(M.negative=0;!M.isZero();){var B=M.modrn(y).toString(n);M=M.idivn(y),M.isZero()?u=B+u:u=F[v-B.length]+B+u}for(this.isZero()&&(u="0"+u);u.length%h!==0;)u="0"+u;return this.negative!==0&&(u="-"+u),u}i(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var n=this.words[0];return this.length===2?n+=this.words[1]*67108864:this.length===3&&this.words[2]===1?n+=4503599627370496+this.words[1]*67108864:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-n:n},a.prototype.toJSON=function(){return this.toString(16,2)},w&&(a.prototype.toBuffer=function(n,h){return this.toArrayLike(w,n,h)}),a.prototype.toArray=function(n,h){return this.toArrayLike(Array,n,h)};var bt=function(n,h){return n.allocUnsafe?n.allocUnsafe(h):new n(h)};a.prototype.toArrayLike=function(n,h,u){this._strip();var p=this.byteLength(),m=u||Math.max(1,p);i(p<=m,"byte array longer than desired length"),i(m>0,"Requested array length <= 0");var d=bt(n,m),o=h==="le"?"LE":"BE";return this["_toArrayLike"+o](d,p),d},a.prototype._toArrayLikeLE=function(n,h){for(var u=0,p=0,m=0,d=0;m<this.length;m++){var o=this.words[m]<<d|p;n[u++]=o&255,u<n.length&&(n[u++]=o>>8&255),u<n.length&&(n[u++]=o>>16&255),d===6?(u<n.length&&(n[u++]=o>>24&255),p=0,d=0):(p=o>>>24,d+=2)}if(u<n.length)for(n[u++]=p;u<n.length;)n[u++]=0},a.prototype._toArrayLikeBE=function(n,h){for(var u=n.length-1,p=0,m=0,d=0;m<this.length;m++){var o=this.words[m]<<d|p;n[u--]=o&255,u>=0&&(n[u--]=o>>8&255),u>=0&&(n[u--]=o>>16&255),d===6?(u>=0&&(n[u--]=o>>24&255),p=0,d=0):(p=o>>>24,d+=2)}if(u>=0)for(n[u--]=p;u>=0;)n[u--]=0},Math.clz32?a.prototype._countBits=function(n){return 32-Math.clz32(n)}:a.prototype._countBits=function(n){var h=n,u=0;return h>=4096&&(u+=13,h>>>=13),h>=64&&(u+=7,h>>>=7),h>=8&&(u+=4,h>>>=4),h>=2&&(u+=2,h>>>=2),u+h},a.prototype._zeroBits=function(n){if(n===0)return 26;var h=n,u=0;return h&8191||(u+=13,h>>>=13),h&127||(u+=7,h>>>=7),h&15||(u+=4,h>>>=4),h&3||(u+=2,h>>>=2),h&1||u++,u},a.prototype.bitLength=function(){var n=this.words[this.length-1],h=this._countBits(n);return(this.length-1)*26+h};function T(l){for(var n=new Array(l.bitLength()),h=0;h<n.length;h++){var u=h/26|0,p=h%26;n[h]=l.words[u]>>>p&1}return n}a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var n=0,h=0;h<this.length;h++){var u=this._zeroBits(this.words[h]);if(n+=u,u!==26)break}return n},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(n){return this.negative!==0?this.abs().inotn(n).iaddn(1):this.clone()},a.prototype.fromTwos=function(n){return this.testn(n-1)?this.notn(n).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return this.negative!==0},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(n){for(;this.length<n.length;)this.words[this.length++]=0;for(var h=0;h<n.length;h++)this.words[h]=this.words[h]|n.words[h];return this._strip()},a.prototype.ior=function(n){return i((this.negative|n.negative)===0),this.iuor(n)},a.prototype.or=function(n){return this.length>n.length?this.clone().ior(n):n.clone().ior(this)},a.prototype.uor=function(n){return this.length>n.length?this.clone().iuor(n):n.clone().iuor(this)},a.prototype.iuand=function(n){var h;this.length>n.length?h=n:h=this;for(var u=0;u<h.length;u++)this.words[u]=this.words[u]&n.words[u];return this.length=h.length,this._strip()},a.prototype.iand=function(n){return i((this.negative|n.negative)===0),this.iuand(n)},a.prototype.and=function(n){return this.length>n.length?this.clone().iand(n):n.clone().iand(this)},a.prototype.uand=function(n){return this.length>n.length?this.clone().iuand(n):n.clone().iuand(this)},a.prototype.iuxor=function(n){var h,u;this.length>n.length?(h=this,u=n):(h=n,u=this);for(var p=0;p<u.length;p++)this.words[p]=h.words[p]^u.words[p];if(this!==h)for(;p<h.length;p++)this.words[p]=h.words[p];return this.length=h.length,this._strip()},a.prototype.ixor=function(n){return i((this.negative|n.negative)===0),this.iuxor(n)},a.prototype.xor=function(n){return this.length>n.length?this.clone().ixor(n):n.clone().ixor(this)},a.prototype.uxor=function(n){return this.length>n.length?this.clone().iuxor(n):n.clone().iuxor(this)},a.prototype.inotn=function(n){i(typeof n=="number"&&n>=0);var h=Math.ceil(n/26)|0,u=n%26;this._expand(h),u>0&&h--;for(var p=0;p<h;p++)this.words[p]=~this.words[p]&67108863;return u>0&&(this.words[p]=~this.words[p]&67108863>>26-u),this._strip()},a.prototype.notn=function(n){return this.clone().inotn(n)},a.prototype.setn=function(n,h){i(typeof n=="number"&&n>=0);var u=n/26|0,p=n%26;return this._expand(u+1),h?this.words[u]=this.words[u]|1<<p:this.words[u]=this.words[u]&~(1<<p),this._strip()},a.prototype.iadd=function(n){var h;if(this.negative!==0&&n.negative===0)return this.negative=0,h=this.isub(n),this.negative^=1,this._normSign();if(this.negative===0&&n.negative!==0)return n.negative=0,h=this.isub(n),n.negative=1,h._normSign();var u,p;this.length>n.length?(u=this,p=n):(u=n,p=this);for(var m=0,d=0;d<p.length;d++)h=(u.words[d]|0)+(p.words[d]|0)+m,this.words[d]=h&67108863,m=h>>>26;for(;m!==0&&d<u.length;d++)h=(u.words[d]|0)+m,this.words[d]=h&67108863,m=h>>>26;if(this.length=u.length,m!==0)this.words[this.length]=m,this.length++;else if(u!==this)for(;d<u.length;d++)this.words[d]=u.words[d];return this},a.prototype.add=function(n){var h;return n.negative!==0&&this.negative===0?(n.negative=0,h=this.sub(n),n.negative^=1,h):n.negative===0&&this.negative!==0?(this.negative=0,h=n.sub(this),this.negative=1,h):this.length>n.length?this.clone().iadd(n):n.clone().iadd(this)},a.prototype.isub=function(n){if(n.negative!==0){n.negative=0;var h=this.iadd(n);return n.negative=1,h._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(n),this.negative=1,this._normSign();var u=this.cmp(n);if(u===0)return this.negative=0,this.length=1,this.words[0]=0,this;var p,m;u>0?(p=this,m=n):(p=n,m=this);for(var d=0,o=0;o<m.length;o++)h=(p.words[o]|0)-(m.words[o]|0)+d,d=h>>26,this.words[o]=h&67108863;for(;d!==0&&o<p.length;o++)h=(p.words[o]|0)+d,d=h>>26,this.words[o]=h&67108863;if(d===0&&o<p.length&&p!==this)for(;o<p.length;o++)this.words[o]=p.words[o];return this.length=Math.max(this.length,o),p!==this&&(this.negative=1),this._strip()},a.prototype.sub=function(n){return this.clone().isub(n)};function Q(l,n,h){h.negative=n.negative^l.negative;var u=l.length+n.length|0;h.length=u,u=u-1|0;var p=l.words[0]|0,m=n.words[0]|0,d=p*m,o=d&67108863,c=d/67108864|0;h.words[0]=o;for(var v=1;v<u;v++){for(var y=c>>>26,M=c&67108863,B=Math.min(v,n.length-1),x=Math.max(0,v-l.length+1);x<=B;x++){var N=v-x|0;p=l.words[N]|0,m=n.words[x]|0,d=p*m+M,y+=d/67108864|0,M=d&67108863}h.words[v]=M|0,c=y|0}return c!==0?h.words[v]=c|0:h.length--,h._strip()}var et=function(n,h,u){var p=n.words,m=h.words,d=u.words,o=0,c,v,y,M=p[0]|0,B=M&8191,x=M>>>13,N=p[1]|0,yt=N&8191,I=N>>>13,tt=p[2]|0,It=tt&8191,R=tt>>>13,rt=p[3]|0,Tt=rt&8191,$=rt>>>13,it=p[4]|0,Nt=it&8191,U=it>>>13,nt=p[5]|0,Rt=nt&8191,L=nt>>>13,st=p[6]|0,$t=st&8191,O=st>>>13,ot=p[7]|0,Ut=ot&8191,P=ot>>>13,at=p[8]|0,Lt=at&8191,k=at>>>13,lt=p[9]|0,Ot=lt&8191,q=lt>>>13,ht=m[0]|0,Pt=ht&8191,W=ht>>>13,ft=m[1]|0,kt=ft&8191,H=ft>>>13,ut=m[2]|0,qt=ut&8191,V=ut>>>13,ct=m[3]|0,Wt=ct&8191,K=ct>>>13,dt=m[4]|0,Ht=dt&8191,j=dt>>>13,pt=m[5]|0,Vt=pt&8191,G=pt>>>13,vt=m[6]|0,Kt=vt&8191,Z=vt>>>13,mt=m[7]|0,jt=mt&8191,z=mt>>>13,gt=m[8]|0,Gt=gt&8191,Y=gt>>>13,wt=m[9]|0,xt=wt&8191,St=wt>>>13;u.negative=n.negative^h.negative,u.length=19,c=Math.imul(B,Pt),v=Math.imul(B,W),v=v+Math.imul(x,Pt)|0,y=Math.imul(x,W);var he=(o+c|0)+((v&8191)<<13)|0;o=(y+(v>>>13)|0)+(he>>>26)|0,he&=67108863,c=Math.imul(yt,Pt),v=Math.imul(yt,W),v=v+Math.imul(I,Pt)|0,y=Math.imul(I,W),c=c+Math.imul(B,kt)|0,v=v+Math.imul(B,H)|0,v=v+Math.imul(x,kt)|0,y=y+Math.imul(x,H)|0;var fe=(o+c|0)+((v&8191)<<13)|0;o=(y+(v>>>13)|0)+(fe>>>26)|0,fe&=67108863,c=Math.imul(It,Pt),v=Math.imul(It,W),v=v+Math.imul(R,Pt)|0,y=Math.imul(R,W),c=c+Math.imul(yt,kt)|0,v=v+Math.imul(yt,H)|0,v=v+Math.imul(I,kt)|0,y=y+Math.imul(I,H)|0,c=c+Math.imul(B,qt)|0,v=v+Math.imul(B,V)|0,v=v+Math.imul(x,qt)|0,y=y+Math.imul(x,V)|0;var ue=(o+c|0)+((v&8191)<<13)|0;o=(y+(v>>>13)|0)+(ue>>>26)|0,ue&=67108863,c=Math.imul(Tt,Pt),v=Math.imul(Tt,W),v=v+Math.imul($,Pt)|0,y=Math.imul($,W),c=c+Math.imul(It,kt)|0,v=v+Math.imul(It,H)|0,v=v+Math.imul(R,kt)|0,y=y+Math.imul(R,H)|0,c=c+Math.imul(yt,qt)|0,v=v+Math.imul(yt,V)|0,v=v+Math.imul(I,qt)|0,y=y+Math.imul(I,V)|0,c=c+Math.imul(B,Wt)|0,v=v+Math.imul(B,K)|0,v=v+Math.imul(x,Wt)|0,y=y+Math.imul(x,K)|0;var ce=(o+c|0)+((v&8191)<<13)|0;o=(y+(v>>>13)|0)+(ce>>>26)|0,ce&=67108863,c=Math.imul(Nt,Pt),v=Math.imul(Nt,W),v=v+Math.imul(U,Pt)|0,y=Math.imul(U,W),c=c+Math.imul(Tt,kt)|0,v=v+Math.imul(Tt,H)|0,v=v+Math.imul($,kt)|0,y=y+Math.imul($,H)|0,c=c+Math.imul(It,qt)|0,v=v+Math.imul(It,V)|0,v=v+Math.imul(R,qt)|0,y=y+Math.imul(R,V)|0,c=c+Math.imul(yt,Wt)|0,v=v+Math.imul(yt,K)|0,v=v+Math.imul(I,Wt)|0,y=y+Math.imul(I,K)|0,c=c+Math.imul(B,Ht)|0,v=v+Math.imul(B,j)|0,v=v+Math.imul(x,Ht)|0,y=y+Math.imul(x,j)|0;var de=(o+c|0)+((v&8191)<<13)|0;o=(y+(v>>>13)|0)+(de>>>26)|0,de&=67108863,c=Math.imul(Rt,Pt),v=Math.imul(Rt,W),v=v+Math.imul(L,Pt)|0,y=Math.imul(L,W),c=c+Math.imul(Nt,kt)|0,v=v+Math.imul(Nt,H)|0,v=v+Math.imul(U,kt)|0,y=y+Math.imul(U,H)|0,c=c+Math.imul(Tt,qt)|0,v=v+Math.imul(Tt,V)|0,v=v+Math.imul($,qt)|0,y=y+Math.imul($,V)|0,c=c+Math.imul(It,Wt)|0,v=v+Math.imul(It,K)|0,v=v+Math.imul(R,Wt)|0,y=y+Math.imul(R,K)|0,c=c+Math.imul(yt,Ht)|0,v=v+Math.imul(yt,j)|0,v=v+Math.imul(I,Ht)|0,y=y+Math.imul(I,j)|0,c=c+Math.imul(B,Vt)|0,v=v+Math.imul(B,G)|0,v=v+Math.imul(x,Vt)|0,y=y+Math.imul(x,G)|0;var pe=(o+c|0)+((v&8191)<<13)|0;o=(y+(v>>>13)|0)+(pe>>>26)|0,pe&=67108863,c=Math.imul($t,Pt),v=Math.imul($t,W),v=v+Math.imul(O,Pt)|0,y=Math.imul(O,W),c=c+Math.imul(Rt,kt)|0,v=v+Math.imul(Rt,H)|0,v=v+Math.imul(L,kt)|0,y=y+Math.imul(L,H)|0,c=c+Math.imul(Nt,qt)|0,v=v+Math.imul(Nt,V)|0,v=v+Math.imul(U,qt)|0,y=y+Math.imul(U,V)|0,c=c+Math.imul(Tt,Wt)|0,v=v+Math.imul(Tt,K)|0,v=v+Math.imul($,Wt)|0,y=y+Math.imul($,K)|0,c=c+Math.imul(It,Ht)|0,v=v+Math.imul(It,j)|0,v=v+Math.imul(R,Ht)|0,y=y+Math.imul(R,j)|0,c=c+Math.imul(yt,Vt)|0,v=v+Math.imul(yt,G)|0,v=v+Math.imul(I,Vt)|0,y=y+Math.imul(I,G)|0,c=c+Math.imul(B,Kt)|0,v=v+Math.imul(B,Z)|0,v=v+Math.imul(x,Kt)|0,y=y+Math.imul(x,Z)|0;var ve=(o+c|0)+((v&8191)<<13)|0;o=(y+(v>>>13)|0)+(ve>>>26)|0,ve&=67108863,c=Math.imul(Ut,Pt),v=Math.imul(Ut,W),v=v+Math.imul(P,Pt)|0,y=Math.imul(P,W),c=c+Math.imul($t,kt)|0,v=v+Math.imul($t,H)|0,v=v+Math.imul(O,kt)|0,y=y+Math.imul(O,H)|0,c=c+Math.imul(Rt,qt)|0,v=v+Math.imul(Rt,V)|0,v=v+Math.imul(L,qt)|0,y=y+Math.imul(L,V)|0,c=c+Math.imul(Nt,Wt)|0,v=v+Math.imul(Nt,K)|0,v=v+Math.imul(U,Wt)|0,y=y+Math.imul(U,K)|0,c=c+Math.imul(Tt,Ht)|0,v=v+Math.imul(Tt,j)|0,v=v+Math.imul($,Ht)|0,y=y+Math.imul($,j)|0,c=c+Math.imul(It,Vt)|0,v=v+Math.imul(It,G)|0,v=v+Math.imul(R,Vt)|0,y=y+Math.imul(R,G)|0,c=c+Math.imul(yt,Kt)|0,v=v+Math.imul(yt,Z)|0,v=v+Math.imul(I,Kt)|0,y=y+Math.imul(I,Z)|0,c=c+Math.imul(B,jt)|0,v=v+Math.imul(B,z)|0,v=v+Math.imul(x,jt)|0,y=y+Math.imul(x,z)|0;var me=(o+c|0)+((v&8191)<<13)|0;o=(y+(v>>>13)|0)+(me>>>26)|0,me&=67108863,c=Math.imul(Lt,Pt),v=Math.imul(Lt,W),v=v+Math.imul(k,Pt)|0,y=Math.imul(k,W),c=c+Math.imul(Ut,kt)|0,v=v+Math.imul(Ut,H)|0,v=v+Math.imul(P,kt)|0,y=y+Math.imul(P,H)|0,c=c+Math.imul($t,qt)|0,v=v+Math.imul($t,V)|0,v=v+Math.imul(O,qt)|0,y=y+Math.imul(O,V)|0,c=c+Math.imul(Rt,Wt)|0,v=v+Math.imul(Rt,K)|0,v=v+Math.imul(L,Wt)|0,y=y+Math.imul(L,K)|0,c=c+Math.imul(Nt,Ht)|0,v=v+Math.imul(Nt,j)|0,v=v+Math.imul(U,Ht)|0,y=y+Math.imul(U,j)|0,c=c+Math.imul(Tt,Vt)|0,v=v+Math.imul(Tt,G)|0,v=v+Math.imul($,Vt)|0,y=y+Math.imul($,G)|0,c=c+Math.imul(It,Kt)|0,v=v+Math.imul(It,Z)|0,v=v+Math.imul(R,Kt)|0,y=y+Math.imul(R,Z)|0,c=c+Math.imul(yt,jt)|0,v=v+Math.imul(yt,z)|0,v=v+Math.imul(I,jt)|0,y=y+Math.imul(I,z)|0,c=c+Math.imul(B,Gt)|0,v=v+Math.imul(B,Y)|0,v=v+Math.imul(x,Gt)|0,y=y+Math.imul(x,Y)|0;var ge=(o+c|0)+((v&8191)<<13)|0;o=(y+(v>>>13)|0)+(ge>>>26)|0,ge&=67108863,c=Math.imul(Ot,Pt),v=Math.imul(Ot,W),v=v+Math.imul(q,Pt)|0,y=Math.imul(q,W),c=c+Math.imul(Lt,kt)|0,v=v+Math.imul(Lt,H)|0,v=v+Math.imul(k,kt)|0,y=y+Math.imul(k,H)|0,c=c+Math.imul(Ut,qt)|0,v=v+Math.imul(Ut,V)|0,v=v+Math.imul(P,qt)|0,y=y+Math.imul(P,V)|0,c=c+Math.imul($t,Wt)|0,v=v+Math.imul($t,K)|0,v=v+Math.imul(O,Wt)|0,y=y+Math.imul(O,K)|0,c=c+Math.imul(Rt,Ht)|0,v=v+Math.imul(Rt,j)|0,v=v+Math.imul(L,Ht)|0,y=y+Math.imul(L,j)|0,c=c+Math.imul(Nt,Vt)|0,v=v+Math.imul(Nt,G)|0,v=v+Math.imul(U,Vt)|0,y=y+Math.imul(U,G)|0,c=c+Math.imul(Tt,Kt)|0,v=v+Math.imul(Tt,Z)|0,v=v+Math.imul($,Kt)|0,y=y+Math.imul($,Z)|0,c=c+Math.imul(It,jt)|0,v=v+Math.imul(It,z)|0,v=v+Math.imul(R,jt)|0,y=y+Math.imul(R,z)|0,c=c+Math.imul(yt,Gt)|0,v=v+Math.imul(yt,Y)|0,v=v+Math.imul(I,Gt)|0,y=y+Math.imul(I,Y)|0,c=c+Math.imul(B,xt)|0,v=v+Math.imul(B,St)|0,v=v+Math.imul(x,xt)|0,y=y+Math.imul(x,St)|0;var we=(o+c|0)+((v&8191)<<13)|0;o=(y+(v>>>13)|0)+(we>>>26)|0,we&=67108863,c=Math.imul(Ot,kt),v=Math.imul(Ot,H),v=v+Math.imul(q,kt)|0,y=Math.imul(q,H),c=c+Math.imul(Lt,qt)|0,v=v+Math.imul(Lt,V)|0,v=v+Math.imul(k,qt)|0,y=y+Math.imul(k,V)|0,c=c+Math.imul(Ut,Wt)|0,v=v+Math.imul(Ut,K)|0,v=v+Math.imul(P,Wt)|0,y=y+Math.imul(P,K)|0,c=c+Math.imul($t,Ht)|0,v=v+Math.imul($t,j)|0,v=v+Math.imul(O,Ht)|0,y=y+Math.imul(O,j)|0,c=c+Math.imul(Rt,Vt)|0,v=v+Math.imul(Rt,G)|0,v=v+Math.imul(L,Vt)|0,y=y+Math.imul(L,G)|0,c=c+Math.imul(Nt,Kt)|0,v=v+Math.imul(Nt,Z)|0,v=v+Math.imul(U,Kt)|0,y=y+Math.imul(U,Z)|0,c=c+Math.imul(Tt,jt)|0,v=v+Math.imul(Tt,z)|0,v=v+Math.imul($,jt)|0,y=y+Math.imul($,z)|0,c=c+Math.imul(It,Gt)|0,v=v+Math.imul(It,Y)|0,v=v+Math.imul(R,Gt)|0,y=y+Math.imul(R,Y)|0,c=c+Math.imul(yt,xt)|0,v=v+Math.imul(yt,St)|0,v=v+Math.imul(I,xt)|0,y=y+Math.imul(I,St)|0;var ye=(o+c|0)+((v&8191)<<13)|0;o=(y+(v>>>13)|0)+(ye>>>26)|0,ye&=67108863,c=Math.imul(Ot,qt),v=Math.imul(Ot,V),v=v+Math.imul(q,qt)|0,y=Math.imul(q,V),c=c+Math.imul(Lt,Wt)|0,v=v+Math.imul(Lt,K)|0,v=v+Math.imul(k,Wt)|0,y=y+Math.imul(k,K)|0,c=c+Math.imul(Ut,Ht)|0,v=v+Math.imul(Ut,j)|0,v=v+Math.imul(P,Ht)|0,y=y+Math.imul(P,j)|0,c=c+Math.imul($t,Vt)|0,v=v+Math.imul($t,G)|0,v=v+Math.imul(O,Vt)|0,y=y+Math.imul(O,G)|0,c=c+Math.imul(Rt,Kt)|0,v=v+Math.imul(Rt,Z)|0,v=v+Math.imul(L,Kt)|0,y=y+Math.imul(L,Z)|0,c=c+Math.imul(Nt,jt)|0,v=v+Math.imul(Nt,z)|0,v=v+Math.imul(U,jt)|0,y=y+Math.imul(U,z)|0,c=c+Math.imul(Tt,Gt)|0,v=v+Math.imul(Tt,Y)|0,v=v+Math.imul($,Gt)|0,y=y+Math.imul($,Y)|0,c=c+Math.imul(It,xt)|0,v=v+Math.imul(It,St)|0,v=v+Math.imul(R,xt)|0,y=y+Math.imul(R,St)|0;var be=(o+c|0)+((v&8191)<<13)|0;o=(y+(v>>>13)|0)+(be>>>26)|0,be&=67108863,c=Math.imul(Ot,Wt),v=Math.imul(Ot,K),v=v+Math.imul(q,Wt)|0,y=Math.imul(q,K),c=c+Math.imul(Lt,Ht)|0,v=v+Math.imul(Lt,j)|0,v=v+Math.imul(k,Ht)|0,y=y+Math.imul(k,j)|0,c=c+Math.imul(Ut,Vt)|0,v=v+Math.imul(Ut,G)|0,v=v+Math.imul(P,Vt)|0,y=y+Math.imul(P,G)|0,c=c+Math.imul($t,Kt)|0,v=v+Math.imul($t,Z)|0,v=v+Math.imul(O,Kt)|0,y=y+Math.imul(O,Z)|0,c=c+Math.imul(Rt,jt)|0,v=v+Math.imul(Rt,z)|0,v=v+Math.imul(L,jt)|0,y=y+Math.imul(L,z)|0,c=c+Math.imul(Nt,Gt)|0,v=v+Math.imul(Nt,Y)|0,v=v+Math.imul(U,Gt)|0,y=y+Math.imul(U,Y)|0,c=c+Math.imul(Tt,xt)|0,v=v+Math.imul(Tt,St)|0,v=v+Math.imul($,xt)|0,y=y+Math.imul($,St)|0;var Ce=(o+c|0)+((v&8191)<<13)|0;o=(y+(v>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,c=Math.imul(Ot,Ht),v=Math.imul(Ot,j),v=v+Math.imul(q,Ht)|0,y=Math.imul(q,j),c=c+Math.imul(Lt,Vt)|0,v=v+Math.imul(Lt,G)|0,v=v+Math.imul(k,Vt)|0,y=y+Math.imul(k,G)|0,c=c+Math.imul(Ut,Kt)|0,v=v+Math.imul(Ut,Z)|0,v=v+Math.imul(P,Kt)|0,y=y+Math.imul(P,Z)|0,c=c+Math.imul($t,jt)|0,v=v+Math.imul($t,z)|0,v=v+Math.imul(O,jt)|0,y=y+Math.imul(O,z)|0,c=c+Math.imul(Rt,Gt)|0,v=v+Math.imul(Rt,Y)|0,v=v+Math.imul(L,Gt)|0,y=y+Math.imul(L,Y)|0,c=c+Math.imul(Nt,xt)|0,v=v+Math.imul(Nt,St)|0,v=v+Math.imul(U,xt)|0,y=y+Math.imul(U,St)|0;var Ee=(o+c|0)+((v&8191)<<13)|0;o=(y+(v>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,c=Math.imul(Ot,Vt),v=Math.imul(Ot,G),v=v+Math.imul(q,Vt)|0,y=Math.imul(q,G),c=c+Math.imul(Lt,Kt)|0,v=v+Math.imul(Lt,Z)|0,v=v+Math.imul(k,Kt)|0,y=y+Math.imul(k,Z)|0,c=c+Math.imul(Ut,jt)|0,v=v+Math.imul(Ut,z)|0,v=v+Math.imul(P,jt)|0,y=y+Math.imul(P,z)|0,c=c+Math.imul($t,Gt)|0,v=v+Math.imul($t,Y)|0,v=v+Math.imul(O,Gt)|0,y=y+Math.imul(O,Y)|0,c=c+Math.imul(Rt,xt)|0,v=v+Math.imul(Rt,St)|0,v=v+Math.imul(L,xt)|0,y=y+Math.imul(L,St)|0;var Ae=(o+c|0)+((v&8191)<<13)|0;o=(y+(v>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,c=Math.imul(Ot,Kt),v=Math.imul(Ot,Z),v=v+Math.imul(q,Kt)|0,y=Math.imul(q,Z),c=c+Math.imul(Lt,jt)|0,v=v+Math.imul(Lt,z)|0,v=v+Math.imul(k,jt)|0,y=y+Math.imul(k,z)|0,c=c+Math.imul(Ut,Gt)|0,v=v+Math.imul(Ut,Y)|0,v=v+Math.imul(P,Gt)|0,y=y+Math.imul(P,Y)|0,c=c+Math.imul($t,xt)|0,v=v+Math.imul($t,St)|0,v=v+Math.imul(O,xt)|0,y=y+Math.imul(O,St)|0;var Me=(o+c|0)+((v&8191)<<13)|0;o=(y+(v>>>13)|0)+(Me>>>26)|0,Me&=67108863,c=Math.imul(Ot,jt),v=Math.imul(Ot,z),v=v+Math.imul(q,jt)|0,y=Math.imul(q,z),c=c+Math.imul(Lt,Gt)|0,v=v+Math.imul(Lt,Y)|0,v=v+Math.imul(k,Gt)|0,y=y+Math.imul(k,Y)|0,c=c+Math.imul(Ut,xt)|0,v=v+Math.imul(Ut,St)|0,v=v+Math.imul(P,xt)|0,y=y+Math.imul(P,St)|0;var Be=(o+c|0)+((v&8191)<<13)|0;o=(y+(v>>>13)|0)+(Be>>>26)|0,Be&=67108863,c=Math.imul(Ot,Gt),v=Math.imul(Ot,Y),v=v+Math.imul(q,Gt)|0,y=Math.imul(q,Y),c=c+Math.imul(Lt,xt)|0,v=v+Math.imul(Lt,St)|0,v=v+Math.imul(k,xt)|0,y=y+Math.imul(k,St)|0;var xi=(o+c|0)+((v&8191)<<13)|0;o=(y+(v>>>13)|0)+(xi>>>26)|0,xi&=67108863,c=Math.imul(Ot,xt),v=Math.imul(Ot,St),v=v+Math.imul(q,xt)|0,y=Math.imul(q,St);var Si=(o+c|0)+((v&8191)<<13)|0;return o=(y+(v>>>13)|0)+(Si>>>26)|0,Si&=67108863,d[0]=he,d[1]=fe,d[2]=ue,d[3]=ce,d[4]=de,d[5]=pe,d[6]=ve,d[7]=me,d[8]=ge,d[9]=we,d[10]=ye,d[11]=be,d[12]=Ce,d[13]=Ee,d[14]=Ae,d[15]=Me,d[16]=Be,d[17]=xi,d[18]=Si,o!==0&&(d[19]=o,u.length++),u};Math.imul||(et=Q);function Mt(l,n,h){h.negative=n.negative^l.negative,h.length=l.length+n.length;for(var u=0,p=0,m=0;m<h.length-1;m++){var d=p;p=0;for(var o=u&67108863,c=Math.min(m,n.length-1),v=Math.max(0,m-l.length+1);v<=c;v++){var y=m-v,M=l.words[y]|0,B=n.words[v]|0,x=M*B,N=x&67108863;d=d+(x/67108864|0)|0,N=N+o|0,o=N&67108863,d=d+(N>>>26)|0,p+=d>>>26,d&=67108863}h.words[m]=o,u=d,d=p}return u!==0?h.words[m]=u:h.length--,h._strip()}function X(l,n,h){return Mt(l,n,h)}a.prototype.mulTo=function(n,h){var u,p=this.length+n.length;return this.length===10&&n.length===10?u=et(this,n,h):p<63?u=Q(this,n,h):p<1024?u=Mt(this,n,h):u=X(this,n,h),u},a.prototype.mul=function(n){var h=new a(null);return h.words=new Array(this.length+n.length),this.mulTo(n,h)},a.prototype.mulf=function(n){var h=new a(null);return h.words=new Array(this.length+n.length),X(this,n,h)},a.prototype.imul=function(n){return this.clone().mulTo(n,this)},a.prototype.imuln=function(n){var h=n<0;h&&(n=-n),i(typeof n=="number"),i(n<67108864);for(var u=0,p=0;p<this.length;p++){var m=(this.words[p]|0)*n,d=(m&67108863)+(u&67108863);u>>=26,u+=m/67108864|0,u+=d>>>26,this.words[p]=d&67108863}return u!==0&&(this.words[p]=u,this.length++),h?this.ineg():this},a.prototype.muln=function(n){return this.clone().imuln(n)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(n){var h=T(n);if(h.length===0)return new a(1);for(var u=this,p=0;p<h.length&&h[p]===0;p++,u=u.sqr());if(++p<h.length)for(var m=u.sqr();p<h.length;p++,m=m.sqr())h[p]!==0&&(u=u.mul(m));return u},a.prototype.iushln=function(n){i(typeof n=="number"&&n>=0);var h=n%26,u=(n-h)/26,p=67108863>>>26-h<<26-h,m;if(h!==0){var d=0;for(m=0;m<this.length;m++){var o=this.words[m]&p,c=(this.words[m]|0)-o<<h;this.words[m]=c|d,d=o>>>26-h}d&&(this.words[m]=d,this.length++)}if(u!==0){for(m=this.length-1;m>=0;m--)this.words[m+u]=this.words[m];for(m=0;m<u;m++)this.words[m]=0;this.length+=u}return this._strip()},a.prototype.ishln=function(n){return i(this.negative===0),this.iushln(n)},a.prototype.iushrn=function(n,h,u){i(typeof n=="number"&&n>=0);var p;h?p=(h-h%26)/26:p=0;var m=n%26,d=Math.min((n-m)/26,this.length),o=67108863^67108863>>>m<<m,c=u;if(p-=d,p=Math.max(0,p),c){for(var v=0;v<d;v++)c.words[v]=this.words[v];c.length=d}if(d!==0)if(this.length>d)for(this.length-=d,v=0;v<this.length;v++)this.words[v]=this.words[v+d];else this.words[0]=0,this.length=1;var y=0;for(v=this.length-1;v>=0&&(y!==0||v>=p);v--){var M=this.words[v]|0;this.words[v]=y<<26-m|M>>>m,y=M&o}return c&&y!==0&&(c.words[c.length++]=y),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},a.prototype.ishrn=function(n,h,u){return i(this.negative===0),this.iushrn(n,h,u)},a.prototype.shln=function(n){return this.clone().ishln(n)},a.prototype.ushln=function(n){return this.clone().iushln(n)},a.prototype.shrn=function(n){return this.clone().ishrn(n)},a.prototype.ushrn=function(n){return this.clone().iushrn(n)},a.prototype.testn=function(n){i(typeof n=="number"&&n>=0);var h=n%26,u=(n-h)/26,p=1<<h;if(this.length<=u)return!1;var m=this.words[u];return!!(m&p)},a.prototype.imaskn=function(n){i(typeof n=="number"&&n>=0);var h=n%26,u=(n-h)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=u)return this;if(h!==0&&u++,this.length=Math.min(u,this.length),h!==0){var p=67108863^67108863>>>h<<h;this.words[this.length-1]&=p}return this._strip()},a.prototype.maskn=function(n){return this.clone().imaskn(n)},a.prototype.iaddn=function(n){return i(typeof n=="number"),i(n<67108864),n<0?this.isubn(-n):this.negative!==0?this.length===1&&(this.words[0]|0)<=n?(this.words[0]=n-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(n),this.negative=1,this):this._iaddn(n)},a.prototype._iaddn=function(n){this.words[0]+=n;for(var h=0;h<this.length&&this.words[h]>=67108864;h++)this.words[h]-=67108864,h===this.length-1?this.words[h+1]=1:this.words[h+1]++;return this.length=Math.max(this.length,h+1),this},a.prototype.isubn=function(n){if(i(typeof n=="number"),i(n<67108864),n<0)return this.iaddn(-n);if(this.negative!==0)return this.negative=0,this.iaddn(n),this.negative=1,this;if(this.words[0]-=n,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var h=0;h<this.length&&this.words[h]<0;h++)this.words[h]+=67108864,this.words[h+1]-=1;return this._strip()},a.prototype.addn=function(n){return this.clone().iaddn(n)},a.prototype.subn=function(n){return this.clone().isubn(n)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(n,h,u){var p=n.length+u,m;this._expand(p);var d,o=0;for(m=0;m<n.length;m++){d=(this.words[m+u]|0)+o;var c=(n.words[m]|0)*h;d-=c&67108863,o=(d>>26)-(c/67108864|0),this.words[m+u]=d&67108863}for(;m<this.length-u;m++)d=(this.words[m+u]|0)+o,o=d>>26,this.words[m+u]=d&67108863;if(o===0)return this._strip();for(i(o===-1),o=0,m=0;m<this.length;m++)d=-(this.words[m]|0)+o,o=d>>26,this.words[m]=d&67108863;return this.negative=1,this._strip()},a.prototype._wordDiv=function(n,h){var u=this.length-n.length,p=this.clone(),m=n,d=m.words[m.length-1]|0,o=this._countBits(d);u=26-o,u!==0&&(m=m.ushln(u),p.iushln(u),d=m.words[m.length-1]|0);var c=p.length-m.length,v;if(h!=="mod"){v=new a(null),v.length=c+1,v.words=new Array(v.length);for(var y=0;y<v.length;y++)v.words[y]=0}var M=p.clone()._ishlnsubmul(m,1,c);M.negative===0&&(p=M,v&&(v.words[c]=1));for(var B=c-1;B>=0;B--){var x=(p.words[m.length+B]|0)*67108864+(p.words[m.length+B-1]|0);for(x=Math.min(x/d|0,67108863),p._ishlnsubmul(m,x,B);p.negative!==0;)x--,p.negative=0,p._ishlnsubmul(m,1,B),p.isZero()||(p.negative^=1);v&&(v.words[B]=x)}return v&&v._strip(),p._strip(),h!=="div"&&u!==0&&p.iushrn(u),{div:v||null,mod:p}},a.prototype.divmod=function(n,h,u){if(i(!n.isZero()),this.isZero())return{div:new a(0),mod:new a(0)};var p,m,d;return this.negative!==0&&n.negative===0?(d=this.neg().divmod(n,h),h!=="mod"&&(p=d.div.neg()),h!=="div"&&(m=d.mod.neg(),u&&m.negative!==0&&m.iadd(n)),{div:p,mod:m}):this.negative===0&&n.negative!==0?(d=this.divmod(n.neg(),h),h!=="mod"&&(p=d.div.neg()),{div:p,mod:d.mod}):this.negative&n.negative?(d=this.neg().divmod(n.neg(),h),h!=="div"&&(m=d.mod.neg(),u&&m.negative!==0&&m.isub(n)),{div:d.div,mod:m}):n.length>this.length||this.cmp(n)<0?{div:new a(0),mod:this}:n.length===1?h==="div"?{div:this.divn(n.words[0]),mod:null}:h==="mod"?{div:null,mod:new a(this.modrn(n.words[0]))}:{div:this.divn(n.words[0]),mod:new a(this.modrn(n.words[0]))}:this._wordDiv(n,h)},a.prototype.div=function(n){return this.divmod(n,"div",!1).div},a.prototype.mod=function(n){return this.divmod(n,"mod",!1).mod},a.prototype.umod=function(n){return this.divmod(n,"mod",!0).mod},a.prototype.divRound=function(n){var h=this.divmod(n);if(h.mod.isZero())return h.div;var u=h.div.negative!==0?h.mod.isub(n):h.mod,p=n.ushrn(1),m=n.andln(1),d=u.cmp(p);return d<0||m===1&&d===0?h.div:h.div.negative!==0?h.div.isubn(1):h.div.iaddn(1)},a.prototype.modrn=function(n){var h=n<0;h&&(n=-n),i(n<=67108863);for(var u=(1<<26)%n,p=0,m=this.length-1;m>=0;m--)p=(u*p+(this.words[m]|0))%n;return h?-p:p},a.prototype.modn=function(n){return this.modrn(n)},a.prototype.idivn=function(n){var h=n<0;h&&(n=-n),i(n<=67108863);for(var u=0,p=this.length-1;p>=0;p--){var m=(this.words[p]|0)+u*67108864;this.words[p]=m/n|0,u=m%n}return this._strip(),h?this.ineg():this},a.prototype.divn=function(n){return this.clone().idivn(n)},a.prototype.egcd=function(n){i(n.negative===0),i(!n.isZero());var h=this,u=n.clone();h.negative!==0?h=h.umod(n):h=h.clone();for(var p=new a(1),m=new a(0),d=new a(0),o=new a(1),c=0;h.isEven()&&u.isEven();)h.iushrn(1),u.iushrn(1),++c;for(var v=u.clone(),y=h.clone();!h.isZero();){for(var M=0,B=1;!(h.words[0]&B)&&M<26;++M,B<<=1);if(M>0)for(h.iushrn(M);M-- >0;)(p.isOdd()||m.isOdd())&&(p.iadd(v),m.isub(y)),p.iushrn(1),m.iushrn(1);for(var x=0,N=1;!(u.words[0]&N)&&x<26;++x,N<<=1);if(x>0)for(u.iushrn(x);x-- >0;)(d.isOdd()||o.isOdd())&&(d.iadd(v),o.isub(y)),d.iushrn(1),o.iushrn(1);h.cmp(u)>=0?(h.isub(u),p.isub(d),m.isub(o)):(u.isub(h),d.isub(p),o.isub(m))}return{a:d,b:o,gcd:u.iushln(c)}},a.prototype._invmp=function(n){i(n.negative===0),i(!n.isZero());var h=this,u=n.clone();h.negative!==0?h=h.umod(n):h=h.clone();for(var p=new a(1),m=new a(0),d=u.clone();h.cmpn(1)>0&&u.cmpn(1)>0;){for(var o=0,c=1;!(h.words[0]&c)&&o<26;++o,c<<=1);if(o>0)for(h.iushrn(o);o-- >0;)p.isOdd()&&p.iadd(d),p.iushrn(1);for(var v=0,y=1;!(u.words[0]&y)&&v<26;++v,y<<=1);if(v>0)for(u.iushrn(v);v-- >0;)m.isOdd()&&m.iadd(d),m.iushrn(1);h.cmp(u)>=0?(h.isub(u),p.isub(m)):(u.isub(h),m.isub(p))}var M;return h.cmpn(1)===0?M=p:M=m,M.cmpn(0)<0&&M.iadd(n),M},a.prototype.gcd=function(n){if(this.isZero())return n.abs();if(n.isZero())return this.abs();var h=this.clone(),u=n.clone();h.negative=0,u.negative=0;for(var p=0;h.isEven()&&u.isEven();p++)h.iushrn(1),u.iushrn(1);do{for(;h.isEven();)h.iushrn(1);for(;u.isEven();)u.iushrn(1);var m=h.cmp(u);if(m<0){var d=h;h=u,u=d}else if(m===0||u.cmpn(1)===0)break;h.isub(u)}while(!0);return u.iushln(p)},a.prototype.invm=function(n){return this.egcd(n).a.umod(n)},a.prototype.isEven=function(){return(this.words[0]&1)===0},a.prototype.isOdd=function(){return(this.words[0]&1)===1},a.prototype.andln=function(n){return this.words[0]&n},a.prototype.bincn=function(n){i(typeof n=="number");var h=n%26,u=(n-h)/26,p=1<<h;if(this.length<=u)return this._expand(u+1),this.words[u]|=p,this;for(var m=p,d=u;m!==0&&d<this.length;d++){var o=this.words[d]|0;o+=m,m=o>>>26,o&=67108863,this.words[d]=o}return m!==0&&(this.words[d]=m,this.length++),this},a.prototype.isZero=function(){return this.length===1&&this.words[0]===0},a.prototype.cmpn=function(n){var h=n<0;if(this.negative!==0&&!h)return-1;if(this.negative===0&&h)return 1;this._strip();var u;if(this.length>1)u=1;else{h&&(n=-n),i(n<=67108863,"Number is too big");var p=this.words[0]|0;u=p===n?0:p<n?-1:1}return this.negative!==0?-u|0:u},a.prototype.cmp=function(n){if(this.negative!==0&&n.negative===0)return-1;if(this.negative===0&&n.negative!==0)return 1;var h=this.ucmp(n);return this.negative!==0?-h|0:h},a.prototype.ucmp=function(n){if(this.length>n.length)return 1;if(this.length<n.length)return-1;for(var h=0,u=this.length-1;u>=0;u--){var p=this.words[u]|0,m=n.words[u]|0;if(p!==m){p<m?h=-1:p>m&&(h=1);break}}return h},a.prototype.gtn=function(n){return this.cmpn(n)===1},a.prototype.gt=function(n){return this.cmp(n)===1},a.prototype.gten=function(n){return this.cmpn(n)>=0},a.prototype.gte=function(n){return this.cmp(n)>=0},a.prototype.ltn=function(n){return this.cmpn(n)===-1},a.prototype.lt=function(n){return this.cmp(n)===-1},a.prototype.lten=function(n){return this.cmpn(n)<=0},a.prototype.lte=function(n){return this.cmp(n)<=0},a.prototype.eqn=function(n){return this.cmpn(n)===0},a.prototype.eq=function(n){return this.cmp(n)===0},a.red=function(n){return new g(n)},a.prototype.toRed=function(n){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),n.convertTo(this)._forceRed(n)},a.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(n){return this.red=n,this},a.prototype.forceRed=function(n){return i(!this.red,"Already a number in reduction context"),this._forceRed(n)},a.prototype.redAdd=function(n){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,n)},a.prototype.redIAdd=function(n){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,n)},a.prototype.redSub=function(n){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,n)},a.prototype.redISub=function(n){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,n)},a.prototype.redShl=function(n){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,n)},a.prototype.redMul=function(n){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,n),this.red.mul(this,n)},a.prototype.redIMul=function(n){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,n),this.red.imul(this,n)},a.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(n){return i(this.red&&!n.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,n)};var At={k256:null,p224:null,p192:null,p25519:null};function _t(l,n){this.name=l,this.p=new a(n,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}_t.prototype._tmp=function(){var n=new a(null);return n.words=new Array(Math.ceil(this.n/13)),n},_t.prototype.ireduce=function(n){var h=n,u;do this.split(h,this.tmp),h=this.imulK(h),h=h.iadd(this.tmp),u=h.bitLength();while(u>this.n);var p=u<this.n?-1:h.ucmp(this.p);return p===0?(h.words[0]=0,h.length=1):p>0?h.isub(this.p):h._strip(),h},_t.prototype.split=function(n,h){n.iushrn(this.n,0,h)},_t.prototype.imulK=function(n){return n.imul(this.k)};function Xt(){_t.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}f(Xt,_t),Xt.prototype.split=function(n,h){for(var u=4194303,p=Math.min(n.length,9),m=0;m<p;m++)h.words[m]=n.words[m];if(h.length=p,n.length<=9){n.words[0]=0,n.length=1;return}var d=n.words[9];for(h.words[h.length++]=d&u,m=10;m<n.length;m++){var o=n.words[m]|0;n.words[m-10]=(o&u)<<4|d>>>22,d=o}d>>>=22,n.words[m-10]=d,d===0&&n.length>10?n.length-=10:n.length-=9},Xt.prototype.imulK=function(n){n.words[n.length]=0,n.words[n.length+1]=0,n.length+=2;for(var h=0,u=0;u<n.length;u++){var p=n.words[u]|0;h+=p*977,n.words[u]=h&67108863,h=p*64+(h/67108864|0)}return n.words[n.length-1]===0&&(n.length--,n.words[n.length-1]===0&&n.length--),n};function Zt(){_t.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}f(Zt,_t);function J(){_t.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}f(J,_t);function zt(){_t.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}f(zt,_t),zt.prototype.imulK=function(n){for(var h=0,u=0;u<n.length;u++){var p=(n.words[u]|0)*19+h,m=p&67108863;p>>>=26,n.words[u]=m,h=p}return h!==0&&(n.words[n.length++]=h),n},a._prime=function(n){if(At[n])return At[n];var h;if(n==="k256")h=new Xt;else if(n==="p224")h=new Zt;else if(n==="p192")h=new J;else if(n==="p25519")h=new zt;else throw new Error("Unknown prime "+n);return At[n]=h,h};function g(l){if(typeof l=="string"){var n=a._prime(l);this.m=n.p,this.prime=n}else i(l.gtn(1),"modulus must be greater than 1"),this.m=l,this.prime=null}g.prototype._verify1=function(n){i(n.negative===0,"red works only with positives"),i(n.red,"red works only with red numbers")},g.prototype._verify2=function(n,h){i((n.negative|h.negative)===0,"red works only with positives"),i(n.red&&n.red===h.red,"red works only with red numbers")},g.prototype.imod=function(n){return this.prime?this.prime.ireduce(n)._forceRed(this):(A(n,n.umod(this.m)._forceRed(this)),n)},g.prototype.neg=function(n){return n.isZero()?n.clone():this.m.sub(n)._forceRed(this)},g.prototype.add=function(n,h){this._verify2(n,h);var u=n.add(h);return u.cmp(this.m)>=0&&u.isub(this.m),u._forceRed(this)},g.prototype.iadd=function(n,h){this._verify2(n,h);var u=n.iadd(h);return u.cmp(this.m)>=0&&u.isub(this.m),u},g.prototype.sub=function(n,h){this._verify2(n,h);var u=n.sub(h);return u.cmpn(0)<0&&u.iadd(this.m),u._forceRed(this)},g.prototype.isub=function(n,h){this._verify2(n,h);var u=n.isub(h);return u.cmpn(0)<0&&u.iadd(this.m),u},g.prototype.shl=function(n,h){return this._verify1(n),this.imod(n.ushln(h))},g.prototype.imul=function(n,h){return this._verify2(n,h),this.imod(n.imul(h))},g.prototype.mul=function(n,h){return this._verify2(n,h),this.imod(n.mul(h))},g.prototype.isqr=function(n){return this.imul(n,n.clone())},g.prototype.sqr=function(n){return this.mul(n,n)},g.prototype.sqrt=function(n){if(n.isZero())return n.clone();var h=this.m.andln(3);if(i(h%2===1),h===3){var u=this.m.add(new a(1)).iushrn(2);return this.pow(n,u)}for(var p=this.m.subn(1),m=0;!p.isZero()&&p.andln(1)===0;)m++,p.iushrn(1);i(!p.isZero());var d=new a(1).toRed(this),o=d.redNeg(),c=this.m.subn(1).iushrn(1),v=this.m.bitLength();for(v=new a(2*v*v).toRed(this);this.pow(v,c).cmp(o)!==0;)v.redIAdd(o);for(var y=this.pow(v,p),M=this.pow(n,p.addn(1).iushrn(1)),B=this.pow(n,p),x=m;B.cmp(d)!==0;){for(var N=B,yt=0;N.cmp(d)!==0;yt++)N=N.redSqr();i(yt<x);var I=this.pow(y,new a(1).iushln(x-yt-1));M=M.redMul(I),y=I.redSqr(),B=B.redMul(y),x=yt}return M},g.prototype.invm=function(n){var h=n._invmp(this.m);return h.negative!==0?(h.negative=0,this.imod(h).redNeg()):this.imod(h)},g.prototype.pow=function(n,h){if(h.isZero())return new a(1).toRed(this);if(h.cmpn(1)===0)return n.clone();var u=4,p=new Array(1<<u);p[0]=new a(1).toRed(this),p[1]=n;for(var m=2;m<p.length;m++)p[m]=this.mul(p[m-1],n);var d=p[0],o=0,c=0,v=h.bitLength()%26;for(v===0&&(v=26),m=h.length-1;m>=0;m--){for(var y=h.words[m],M=v-1;M>=0;M--){var B=y>>M&1;if(d!==p[0]&&(d=this.sqr(d)),B===0&&o===0){c=0;continue}o<<=1,o|=B,c++,!(c!==u&&(m!==0||M!==0))&&(d=this.mul(d,p[o]),c=0,o=0)}v=26}return d},g.prototype.convertTo=function(n){var h=n.umod(this.m);return h===n?h.clone():h},g.prototype.convertFrom=function(n){var h=n.clone();return h.red=null,h},a.mont=function(n){return new s(n)};function s(l){g.call(this,l),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}f(s,g),s.prototype.convertTo=function(n){return this.imod(n.ushln(this.shift))},s.prototype.convertFrom=function(n){var h=this.imod(n.mul(this.rinv));return h.red=null,h},s.prototype.imul=function(n,h){if(n.isZero()||h.isZero())return n.words[0]=0,n.length=1,n;var u=n.imul(h),p=u.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),m=u.isub(p).iushrn(this.shift),d=m;return m.cmp(this.m)>=0?d=m.isub(this.m):m.cmpn(0)<0&&(d=m.iadd(this.m)),d._forceRed(this)},s.prototype.mul=function(n,h){if(n.isZero()||h.isZero())return new a(0)._forceRed(this);var u=n.mul(h),p=u.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),m=u.isub(p).iushrn(this.shift),d=m;return m.cmp(this.m)>=0?d=m.isub(this.m):m.cmpn(0)<0&&(d=m.iadd(this.m)),d._forceRed(this)},s.prototype.invm=function(n){var h=this.imod(n._invmp(this.m).mul(this.r2));return h._forceRed(this)}})(r,wn)})(bn);var Fl=bn.exports,Cn={exports:{}};Cn.exports;(function(r){(function(t,e){function i(g,s){if(!g)throw new Error(s||"Assertion failed")}function f(g,s){g.super_=s;var l=function(){};l.prototype=s.prototype,g.prototype=new l,g.prototype.constructor=g}function a(g,s,l){if(a.isBN(g))return g;this.negative=0,this.words=null,this.length=0,this.red=null,g!==null&&((s==="le"||s==="be")&&(l=s,s=10),this._init(g||0,s||10,l||"be"))}typeof t=="object"?t.exports=a:e.BN=a,a.BN=a,a.wordSize=26;var w;try{w=Co("buffer").Buffer}catch{}a.isBN=function(s){return s instanceof a?!0:s!==null&&typeof s=="object"&&s.constructor.wordSize===a.wordSize&&Array.isArray(s.words)},a.max=function(s,l){return s.cmp(l)>0?s:l},a.min=function(s,l){return s.cmp(l)<0?s:l},a.prototype._init=function(s,l,n){if(typeof s=="number")return this._initNumber(s,l,n);if(typeof s=="object")return this._initArray(s,l,n);l==="hex"&&(l=16),i(l===(l|0)&&l>=2&&l<=36),s=s.toString().replace(/\s+/g,"");var h=0;s[0]==="-"&&h++,l===16?this._parseHex(s,h):this._parseBase(s,l,h),s[0]==="-"&&(this.negative=1),this.strip(),n==="le"&&this._initArray(this.toArray(),l,n)},a.prototype._initNumber=function(s,l,n){s<0&&(this.negative=1,s=-s),s<67108864?(this.words=[s&67108863],this.length=1):s<4503599627370496?(this.words=[s&67108863,s/67108864&67108863],this.length=2):(i(s<9007199254740992),this.words=[s&67108863,s/67108864&67108863,1],this.length=3),n==="le"&&this._initArray(this.toArray(),l,n)},a.prototype._initArray=function(s,l,n){if(i(typeof s.length=="number"),s.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(s.length/3),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var u,p,m=0;if(n==="be")for(h=s.length-1,u=0;h>=0;h-=3)p=s[h]|s[h-1]<<8|s[h-2]<<16,this.words[u]|=p<<m&67108863,this.words[u+1]=p>>>26-m&67108863,m+=24,m>=26&&(m-=26,u++);else if(n==="le")for(h=0,u=0;h<s.length;h+=3)p=s[h]|s[h+1]<<8|s[h+2]<<16,this.words[u]|=p<<m&67108863,this.words[u+1]=p>>>26-m&67108863,m+=24,m>=26&&(m-=26,u++);return this.strip()};function C(g,s,l){for(var n=0,h=Math.min(g.length,l),u=s;u<h;u++){var p=g.charCodeAt(u)-48;n<<=4,p>=49&&p<=54?n|=p-49+10:p>=17&&p<=22?n|=p-17+10:n|=p&15}return n}a.prototype._parseHex=function(s,l){this.length=Math.ceil((s.length-l)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var h,u,p=0;for(n=s.length-6,h=0;n>=l;n-=6)u=C(s,n,n+6),this.words[h]|=u<<p&67108863,this.words[h+1]|=u>>>26-p&4194303,p+=24,p>=26&&(p-=26,h++);n+6!==l&&(u=C(s,l,n+6),this.words[h]|=u<<p&67108863,this.words[h+1]|=u>>>26-p&4194303),this.strip()};function b(g,s,l,n){for(var h=0,u=Math.min(g.length,l),p=s;p<u;p++){var m=g.charCodeAt(p)-48;h*=n,m>=49?h+=m-49+10:m>=17?h+=m-17+10:h+=m}return h}a.prototype._parseBase=function(s,l,n){this.words=[0],this.length=1;for(var h=0,u=1;u<=67108863;u*=l)h++;h--,u=u/l|0;for(var p=s.length-n,m=p%h,d=Math.min(p,p-m)+n,o=0,c=n;c<d;c+=h)o=b(s,c,c+h,l),this.imuln(u),this.words[0]+o<67108864?this.words[0]+=o:this._iaddn(o);if(m!==0){var v=1;for(o=b(s,c,s.length,l),c=0;c<m;c++)v*=l;this.imuln(v),this.words[0]+o<67108864?this.words[0]+=o:this._iaddn(o)}},a.prototype.copy=function(s){s.words=new Array(this.length);for(var l=0;l<this.length;l++)s.words[l]=this.words[l];s.length=this.length,s.negative=this.negative,s.red=this.red},a.prototype.clone=function(){var s=new a(null);return this.copy(s),s},a.prototype._expand=function(s){for(;this.length<s;)this.words[this.length++]=0;return this},a.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},a.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},a.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var A=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],E=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],F=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(s,l){s=s||10,l=l|0||1;var n;if(s===16||s==="hex"){n="";for(var h=0,u=0,p=0;p<this.length;p++){var m=this.words[p],d=((m<<h|u)&16777215).toString(16);u=m>>>24-h&16777215,u!==0||p!==this.length-1?n=A[6-d.length]+d+n:n=d+n,h+=2,h>=26&&(h-=26,p--)}for(u!==0&&(n=u.toString(16)+n);n.length%l!==0;)n="0"+n;return this.negative!==0&&(n="-"+n),n}if(s===(s|0)&&s>=2&&s<=36){var o=E[s],c=F[s];n="";var v=this.clone();for(v.negative=0;!v.isZero();){var y=v.modn(c).toString(s);v=v.idivn(c),v.isZero()?n=y+n:n=A[o-y.length]+y+n}for(this.isZero()&&(n="0"+n);n.length%l!==0;)n="0"+n;return this.negative!==0&&(n="-"+n),n}i(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var s=this.words[0];return this.length===2?s+=this.words[1]*67108864:this.length===3&&this.words[2]===1?s+=4503599627370496+this.words[1]*67108864:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-s:s},a.prototype.toJSON=function(){return this.toString(16)},a.prototype.toBuffer=function(s,l){return i(typeof w<"u"),this.toArrayLike(w,s,l)},a.prototype.toArray=function(s,l){return this.toArrayLike(Array,s,l)},a.prototype.toArrayLike=function(s,l,n){var h=this.byteLength(),u=n||Math.max(1,h);i(h<=u,"byte array longer than desired length"),i(u>0,"Requested array length <= 0"),this.strip();var p=l==="le",m=new s(u),d,o,c=this.clone();if(p){for(o=0;!c.isZero();o++)d=c.andln(255),c.iushrn(8),m[o]=d;for(;o<u;o++)m[o]=0}else{for(o=0;o<u-h;o++)m[o]=0;for(o=0;!c.isZero();o++)d=c.andln(255),c.iushrn(8),m[u-o-1]=d}return m},Math.clz32?a.prototype._countBits=function(s){return 32-Math.clz32(s)}:a.prototype._countBits=function(s){var l=s,n=0;return l>=4096&&(n+=13,l>>>=13),l>=64&&(n+=7,l>>>=7),l>=8&&(n+=4,l>>>=4),l>=2&&(n+=2,l>>>=2),n+l},a.prototype._zeroBits=function(s){if(s===0)return 26;var l=s,n=0;return l&8191||(n+=13,l>>>=13),l&127||(n+=7,l>>>=7),l&15||(n+=4,l>>>=4),l&3||(n+=2,l>>>=2),l&1||n++,n},a.prototype.bitLength=function(){var s=this.words[this.length-1],l=this._countBits(s);return(this.length-1)*26+l};function S(g){for(var s=new Array(g.bitLength()),l=0;l<s.length;l++){var n=l/26|0,h=l%26;s[l]=(g.words[n]&1<<h)>>>h}return s}a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var s=0,l=0;l<this.length;l++){var n=this._zeroBits(this.words[l]);if(s+=n,n!==26)break}return s},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(s){return this.negative!==0?this.abs().inotn(s).iaddn(1):this.clone()},a.prototype.fromTwos=function(s){return this.testn(s-1)?this.notn(s).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return this.negative!==0},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(s){for(;this.length<s.length;)this.words[this.length++]=0;for(var l=0;l<s.length;l++)this.words[l]=this.words[l]|s.words[l];return this.strip()},a.prototype.ior=function(s){return i((this.negative|s.negative)===0),this.iuor(s)},a.prototype.or=function(s){return this.length>s.length?this.clone().ior(s):s.clone().ior(this)},a.prototype.uor=function(s){return this.length>s.length?this.clone().iuor(s):s.clone().iuor(this)},a.prototype.iuand=function(s){var l;this.length>s.length?l=s:l=this;for(var n=0;n<l.length;n++)this.words[n]=this.words[n]&s.words[n];return this.length=l.length,this.strip()},a.prototype.iand=function(s){return i((this.negative|s.negative)===0),this.iuand(s)},a.prototype.and=function(s){return this.length>s.length?this.clone().iand(s):s.clone().iand(this)},a.prototype.uand=function(s){return this.length>s.length?this.clone().iuand(s):s.clone().iuand(this)},a.prototype.iuxor=function(s){var l,n;this.length>s.length?(l=this,n=s):(l=s,n=this);for(var h=0;h<n.length;h++)this.words[h]=l.words[h]^n.words[h];if(this!==l)for(;h<l.length;h++)this.words[h]=l.words[h];return this.length=l.length,this.strip()},a.prototype.ixor=function(s){return i((this.negative|s.negative)===0),this.iuxor(s)},a.prototype.xor=function(s){return this.length>s.length?this.clone().ixor(s):s.clone().ixor(this)},a.prototype.uxor=function(s){return this.length>s.length?this.clone().iuxor(s):s.clone().iuxor(this)},a.prototype.inotn=function(s){i(typeof s=="number"&&s>=0);var l=Math.ceil(s/26)|0,n=s%26;this._expand(l),n>0&&l--;for(var h=0;h<l;h++)this.words[h]=~this.words[h]&67108863;return n>0&&(this.words[h]=~this.words[h]&67108863>>26-n),this.strip()},a.prototype.notn=function(s){return this.clone().inotn(s)},a.prototype.setn=function(s,l){i(typeof s=="number"&&s>=0);var n=s/26|0,h=s%26;return this._expand(n+1),l?this.words[n]=this.words[n]|1<<h:this.words[n]=this.words[n]&~(1<<h),this.strip()},a.prototype.iadd=function(s){var l;if(this.negative!==0&&s.negative===0)return this.negative=0,l=this.isub(s),this.negative^=1,this._normSign();if(this.negative===0&&s.negative!==0)return s.negative=0,l=this.isub(s),s.negative=1,l._normSign();var n,h;this.length>s.length?(n=this,h=s):(n=s,h=this);for(var u=0,p=0;p<h.length;p++)l=(n.words[p]|0)+(h.words[p]|0)+u,this.words[p]=l&67108863,u=l>>>26;for(;u!==0&&p<n.length;p++)l=(n.words[p]|0)+u,this.words[p]=l&67108863,u=l>>>26;if(this.length=n.length,u!==0)this.words[this.length]=u,this.length++;else if(n!==this)for(;p<n.length;p++)this.words[p]=n.words[p];return this},a.prototype.add=function(s){var l;return s.negative!==0&&this.negative===0?(s.negative=0,l=this.sub(s),s.negative^=1,l):s.negative===0&&this.negative!==0?(this.negative=0,l=s.sub(this),this.negative=1,l):this.length>s.length?this.clone().iadd(s):s.clone().iadd(this)},a.prototype.isub=function(s){if(s.negative!==0){s.negative=0;var l=this.iadd(s);return s.negative=1,l._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(s),this.negative=1,this._normSign();var n=this.cmp(s);if(n===0)return this.negative=0,this.length=1,this.words[0]=0,this;var h,u;n>0?(h=this,u=s):(h=s,u=this);for(var p=0,m=0;m<u.length;m++)l=(h.words[m]|0)-(u.words[m]|0)+p,p=l>>26,this.words[m]=l&67108863;for(;p!==0&&m<h.length;m++)l=(h.words[m]|0)+p,p=l>>26,this.words[m]=l&67108863;if(p===0&&m<h.length&&h!==this)for(;m<h.length;m++)this.words[m]=h.words[m];return this.length=Math.max(this.length,m),h!==this&&(this.negative=1),this.strip()},a.prototype.sub=function(s){return this.clone().isub(s)};function _(g,s,l){l.negative=s.negative^g.negative;var n=g.length+s.length|0;l.length=n,n=n-1|0;var h=g.words[0]|0,u=s.words[0]|0,p=h*u,m=p&67108863,d=p/67108864|0;l.words[0]=m;for(var o=1;o<n;o++){for(var c=d>>>26,v=d&67108863,y=Math.min(o,s.length-1),M=Math.max(0,o-g.length+1);M<=y;M++){var B=o-M|0;h=g.words[B]|0,u=s.words[M]|0,p=h*u+v,c+=p/67108864|0,v=p&67108863}l.words[o]=v|0,d=c|0}return d!==0?l.words[o]=d|0:l.length--,l.strip()}var bt=function(s,l,n){var h=s.words,u=l.words,p=n.words,m=0,d,o,c,v=h[0]|0,y=v&8191,M=v>>>13,B=h[1]|0,x=B&8191,N=B>>>13,yt=h[2]|0,I=yt&8191,tt=yt>>>13,It=h[3]|0,R=It&8191,rt=It>>>13,Tt=h[4]|0,$=Tt&8191,it=Tt>>>13,Nt=h[5]|0,U=Nt&8191,nt=Nt>>>13,Rt=h[6]|0,L=Rt&8191,st=Rt>>>13,$t=h[7]|0,O=$t&8191,ot=$t>>>13,Ut=h[8]|0,P=Ut&8191,at=Ut>>>13,Lt=h[9]|0,k=Lt&8191,lt=Lt>>>13,Ot=u[0]|0,q=Ot&8191,ht=Ot>>>13,Pt=u[1]|0,W=Pt&8191,ft=Pt>>>13,kt=u[2]|0,H=kt&8191,ut=kt>>>13,qt=u[3]|0,V=qt&8191,ct=qt>>>13,Wt=u[4]|0,K=Wt&8191,dt=Wt>>>13,Ht=u[5]|0,j=Ht&8191,pt=Ht>>>13,Vt=u[6]|0,G=Vt&8191,vt=Vt>>>13,Kt=u[7]|0,Z=Kt&8191,mt=Kt>>>13,jt=u[8]|0,z=jt&8191,gt=jt>>>13,Gt=u[9]|0,Y=Gt&8191,wt=Gt>>>13;n.negative=s.negative^l.negative,n.length=19,d=Math.imul(y,q),o=Math.imul(y,ht),o=o+Math.imul(M,q)|0,c=Math.imul(M,ht);var xt=(m+d|0)+((o&8191)<<13)|0;m=(c+(o>>>13)|0)+(xt>>>26)|0,xt&=67108863,d=Math.imul(x,q),o=Math.imul(x,ht),o=o+Math.imul(N,q)|0,c=Math.imul(N,ht),d=d+Math.imul(y,W)|0,o=o+Math.imul(y,ft)|0,o=o+Math.imul(M,W)|0,c=c+Math.imul(M,ft)|0;var St=(m+d|0)+((o&8191)<<13)|0;m=(c+(o>>>13)|0)+(St>>>26)|0,St&=67108863,d=Math.imul(I,q),o=Math.imul(I,ht),o=o+Math.imul(tt,q)|0,c=Math.imul(tt,ht),d=d+Math.imul(x,W)|0,o=o+Math.imul(x,ft)|0,o=o+Math.imul(N,W)|0,c=c+Math.imul(N,ft)|0,d=d+Math.imul(y,H)|0,o=o+Math.imul(y,ut)|0,o=o+Math.imul(M,H)|0,c=c+Math.imul(M,ut)|0;var he=(m+d|0)+((o&8191)<<13)|0;m=(c+(o>>>13)|0)+(he>>>26)|0,he&=67108863,d=Math.imul(R,q),o=Math.imul(R,ht),o=o+Math.imul(rt,q)|0,c=Math.imul(rt,ht),d=d+Math.imul(I,W)|0,o=o+Math.imul(I,ft)|0,o=o+Math.imul(tt,W)|0,c=c+Math.imul(tt,ft)|0,d=d+Math.imul(x,H)|0,o=o+Math.imul(x,ut)|0,o=o+Math.imul(N,H)|0,c=c+Math.imul(N,ut)|0,d=d+Math.imul(y,V)|0,o=o+Math.imul(y,ct)|0,o=o+Math.imul(M,V)|0,c=c+Math.imul(M,ct)|0;var fe=(m+d|0)+((o&8191)<<13)|0;m=(c+(o>>>13)|0)+(fe>>>26)|0,fe&=67108863,d=Math.imul($,q),o=Math.imul($,ht),o=o+Math.imul(it,q)|0,c=Math.imul(it,ht),d=d+Math.imul(R,W)|0,o=o+Math.imul(R,ft)|0,o=o+Math.imul(rt,W)|0,c=c+Math.imul(rt,ft)|0,d=d+Math.imul(I,H)|0,o=o+Math.imul(I,ut)|0,o=o+Math.imul(tt,H)|0,c=c+Math.imul(tt,ut)|0,d=d+Math.imul(x,V)|0,o=o+Math.imul(x,ct)|0,o=o+Math.imul(N,V)|0,c=c+Math.imul(N,ct)|0,d=d+Math.imul(y,K)|0,o=o+Math.imul(y,dt)|0,o=o+Math.imul(M,K)|0,c=c+Math.imul(M,dt)|0;var ue=(m+d|0)+((o&8191)<<13)|0;m=(c+(o>>>13)|0)+(ue>>>26)|0,ue&=67108863,d=Math.imul(U,q),o=Math.imul(U,ht),o=o+Math.imul(nt,q)|0,c=Math.imul(nt,ht),d=d+Math.imul($,W)|0,o=o+Math.imul($,ft)|0,o=o+Math.imul(it,W)|0,c=c+Math.imul(it,ft)|0,d=d+Math.imul(R,H)|0,o=o+Math.imul(R,ut)|0,o=o+Math.imul(rt,H)|0,c=c+Math.imul(rt,ut)|0,d=d+Math.imul(I,V)|0,o=o+Math.imul(I,ct)|0,o=o+Math.imul(tt,V)|0,c=c+Math.imul(tt,ct)|0,d=d+Math.imul(x,K)|0,o=o+Math.imul(x,dt)|0,o=o+Math.imul(N,K)|0,c=c+Math.imul(N,dt)|0,d=d+Math.imul(y,j)|0,o=o+Math.imul(y,pt)|0,o=o+Math.imul(M,j)|0,c=c+Math.imul(M,pt)|0;var ce=(m+d|0)+((o&8191)<<13)|0;m=(c+(o>>>13)|0)+(ce>>>26)|0,ce&=67108863,d=Math.imul(L,q),o=Math.imul(L,ht),o=o+Math.imul(st,q)|0,c=Math.imul(st,ht),d=d+Math.imul(U,W)|0,o=o+Math.imul(U,ft)|0,o=o+Math.imul(nt,W)|0,c=c+Math.imul(nt,ft)|0,d=d+Math.imul($,H)|0,o=o+Math.imul($,ut)|0,o=o+Math.imul(it,H)|0,c=c+Math.imul(it,ut)|0,d=d+Math.imul(R,V)|0,o=o+Math.imul(R,ct)|0,o=o+Math.imul(rt,V)|0,c=c+Math.imul(rt,ct)|0,d=d+Math.imul(I,K)|0,o=o+Math.imul(I,dt)|0,o=o+Math.imul(tt,K)|0,c=c+Math.imul(tt,dt)|0,d=d+Math.imul(x,j)|0,o=o+Math.imul(x,pt)|0,o=o+Math.imul(N,j)|0,c=c+Math.imul(N,pt)|0,d=d+Math.imul(y,G)|0,o=o+Math.imul(y,vt)|0,o=o+Math.imul(M,G)|0,c=c+Math.imul(M,vt)|0;var de=(m+d|0)+((o&8191)<<13)|0;m=(c+(o>>>13)|0)+(de>>>26)|0,de&=67108863,d=Math.imul(O,q),o=Math.imul(O,ht),o=o+Math.imul(ot,q)|0,c=Math.imul(ot,ht),d=d+Math.imul(L,W)|0,o=o+Math.imul(L,ft)|0,o=o+Math.imul(st,W)|0,c=c+Math.imul(st,ft)|0,d=d+Math.imul(U,H)|0,o=o+Math.imul(U,ut)|0,o=o+Math.imul(nt,H)|0,c=c+Math.imul(nt,ut)|0,d=d+Math.imul($,V)|0,o=o+Math.imul($,ct)|0,o=o+Math.imul(it,V)|0,c=c+Math.imul(it,ct)|0,d=d+Math.imul(R,K)|0,o=o+Math.imul(R,dt)|0,o=o+Math.imul(rt,K)|0,c=c+Math.imul(rt,dt)|0,d=d+Math.imul(I,j)|0,o=o+Math.imul(I,pt)|0,o=o+Math.imul(tt,j)|0,c=c+Math.imul(tt,pt)|0,d=d+Math.imul(x,G)|0,o=o+Math.imul(x,vt)|0,o=o+Math.imul(N,G)|0,c=c+Math.imul(N,vt)|0,d=d+Math.imul(y,Z)|0,o=o+Math.imul(y,mt)|0,o=o+Math.imul(M,Z)|0,c=c+Math.imul(M,mt)|0;var pe=(m+d|0)+((o&8191)<<13)|0;m=(c+(o>>>13)|0)+(pe>>>26)|0,pe&=67108863,d=Math.imul(P,q),o=Math.imul(P,ht),o=o+Math.imul(at,q)|0,c=Math.imul(at,ht),d=d+Math.imul(O,W)|0,o=o+Math.imul(O,ft)|0,o=o+Math.imul(ot,W)|0,c=c+Math.imul(ot,ft)|0,d=d+Math.imul(L,H)|0,o=o+Math.imul(L,ut)|0,o=o+Math.imul(st,H)|0,c=c+Math.imul(st,ut)|0,d=d+Math.imul(U,V)|0,o=o+Math.imul(U,ct)|0,o=o+Math.imul(nt,V)|0,c=c+Math.imul(nt,ct)|0,d=d+Math.imul($,K)|0,o=o+Math.imul($,dt)|0,o=o+Math.imul(it,K)|0,c=c+Math.imul(it,dt)|0,d=d+Math.imul(R,j)|0,o=o+Math.imul(R,pt)|0,o=o+Math.imul(rt,j)|0,c=c+Math.imul(rt,pt)|0,d=d+Math.imul(I,G)|0,o=o+Math.imul(I,vt)|0,o=o+Math.imul(tt,G)|0,c=c+Math.imul(tt,vt)|0,d=d+Math.imul(x,Z)|0,o=o+Math.imul(x,mt)|0,o=o+Math.imul(N,Z)|0,c=c+Math.imul(N,mt)|0,d=d+Math.imul(y,z)|0,o=o+Math.imul(y,gt)|0,o=o+Math.imul(M,z)|0,c=c+Math.imul(M,gt)|0;var ve=(m+d|0)+((o&8191)<<13)|0;m=(c+(o>>>13)|0)+(ve>>>26)|0,ve&=67108863,d=Math.imul(k,q),o=Math.imul(k,ht),o=o+Math.imul(lt,q)|0,c=Math.imul(lt,ht),d=d+Math.imul(P,W)|0,o=o+Math.imul(P,ft)|0,o=o+Math.imul(at,W)|0,c=c+Math.imul(at,ft)|0,d=d+Math.imul(O,H)|0,o=o+Math.imul(O,ut)|0,o=o+Math.imul(ot,H)|0,c=c+Math.imul(ot,ut)|0,d=d+Math.imul(L,V)|0,o=o+Math.imul(L,ct)|0,o=o+Math.imul(st,V)|0,c=c+Math.imul(st,ct)|0,d=d+Math.imul(U,K)|0,o=o+Math.imul(U,dt)|0,o=o+Math.imul(nt,K)|0,c=c+Math.imul(nt,dt)|0,d=d+Math.imul($,j)|0,o=o+Math.imul($,pt)|0,o=o+Math.imul(it,j)|0,c=c+Math.imul(it,pt)|0,d=d+Math.imul(R,G)|0,o=o+Math.imul(R,vt)|0,o=o+Math.imul(rt,G)|0,c=c+Math.imul(rt,vt)|0,d=d+Math.imul(I,Z)|0,o=o+Math.imul(I,mt)|0,o=o+Math.imul(tt,Z)|0,c=c+Math.imul(tt,mt)|0,d=d+Math.imul(x,z)|0,o=o+Math.imul(x,gt)|0,o=o+Math.imul(N,z)|0,c=c+Math.imul(N,gt)|0,d=d+Math.imul(y,Y)|0,o=o+Math.imul(y,wt)|0,o=o+Math.imul(M,Y)|0,c=c+Math.imul(M,wt)|0;var me=(m+d|0)+((o&8191)<<13)|0;m=(c+(o>>>13)|0)+(me>>>26)|0,me&=67108863,d=Math.imul(k,W),o=Math.imul(k,ft),o=o+Math.imul(lt,W)|0,c=Math.imul(lt,ft),d=d+Math.imul(P,H)|0,o=o+Math.imul(P,ut)|0,o=o+Math.imul(at,H)|0,c=c+Math.imul(at,ut)|0,d=d+Math.imul(O,V)|0,o=o+Math.imul(O,ct)|0,o=o+Math.imul(ot,V)|0,c=c+Math.imul(ot,ct)|0,d=d+Math.imul(L,K)|0,o=o+Math.imul(L,dt)|0,o=o+Math.imul(st,K)|0,c=c+Math.imul(st,dt)|0,d=d+Math.imul(U,j)|0,o=o+Math.imul(U,pt)|0,o=o+Math.imul(nt,j)|0,c=c+Math.imul(nt,pt)|0,d=d+Math.imul($,G)|0,o=o+Math.imul($,vt)|0,o=o+Math.imul(it,G)|0,c=c+Math.imul(it,vt)|0,d=d+Math.imul(R,Z)|0,o=o+Math.imul(R,mt)|0,o=o+Math.imul(rt,Z)|0,c=c+Math.imul(rt,mt)|0,d=d+Math.imul(I,z)|0,o=o+Math.imul(I,gt)|0,o=o+Math.imul(tt,z)|0,c=c+Math.imul(tt,gt)|0,d=d+Math.imul(x,Y)|0,o=o+Math.imul(x,wt)|0,o=o+Math.imul(N,Y)|0,c=c+Math.imul(N,wt)|0;var ge=(m+d|0)+((o&8191)<<13)|0;m=(c+(o>>>13)|0)+(ge>>>26)|0,ge&=67108863,d=Math.imul(k,H),o=Math.imul(k,ut),o=o+Math.imul(lt,H)|0,c=Math.imul(lt,ut),d=d+Math.imul(P,V)|0,o=o+Math.imul(P,ct)|0,o=o+Math.imul(at,V)|0,c=c+Math.imul(at,ct)|0,d=d+Math.imul(O,K)|0,o=o+Math.imul(O,dt)|0,o=o+Math.imul(ot,K)|0,c=c+Math.imul(ot,dt)|0,d=d+Math.imul(L,j)|0,o=o+Math.imul(L,pt)|0,o=o+Math.imul(st,j)|0,c=c+Math.imul(st,pt)|0,d=d+Math.imul(U,G)|0,o=o+Math.imul(U,vt)|0,o=o+Math.imul(nt,G)|0,c=c+Math.imul(nt,vt)|0,d=d+Math.imul($,Z)|0,o=o+Math.imul($,mt)|0,o=o+Math.imul(it,Z)|0,c=c+Math.imul(it,mt)|0,d=d+Math.imul(R,z)|0,o=o+Math.imul(R,gt)|0,o=o+Math.imul(rt,z)|0,c=c+Math.imul(rt,gt)|0,d=d+Math.imul(I,Y)|0,o=o+Math.imul(I,wt)|0,o=o+Math.imul(tt,Y)|0,c=c+Math.imul(tt,wt)|0;var we=(m+d|0)+((o&8191)<<13)|0;m=(c+(o>>>13)|0)+(we>>>26)|0,we&=67108863,d=Math.imul(k,V),o=Math.imul(k,ct),o=o+Math.imul(lt,V)|0,c=Math.imul(lt,ct),d=d+Math.imul(P,K)|0,o=o+Math.imul(P,dt)|0,o=o+Math.imul(at,K)|0,c=c+Math.imul(at,dt)|0,d=d+Math.imul(O,j)|0,o=o+Math.imul(O,pt)|0,o=o+Math.imul(ot,j)|0,c=c+Math.imul(ot,pt)|0,d=d+Math.imul(L,G)|0,o=o+Math.imul(L,vt)|0,o=o+Math.imul(st,G)|0,c=c+Math.imul(st,vt)|0,d=d+Math.imul(U,Z)|0,o=o+Math.imul(U,mt)|0,o=o+Math.imul(nt,Z)|0,c=c+Math.imul(nt,mt)|0,d=d+Math.imul($,z)|0,o=o+Math.imul($,gt)|0,o=o+Math.imul(it,z)|0,c=c+Math.imul(it,gt)|0,d=d+Math.imul(R,Y)|0,o=o+Math.imul(R,wt)|0,o=o+Math.imul(rt,Y)|0,c=c+Math.imul(rt,wt)|0;var ye=(m+d|0)+((o&8191)<<13)|0;m=(c+(o>>>13)|0)+(ye>>>26)|0,ye&=67108863,d=Math.imul(k,K),o=Math.imul(k,dt),o=o+Math.imul(lt,K)|0,c=Math.imul(lt,dt),d=d+Math.imul(P,j)|0,o=o+Math.imul(P,pt)|0,o=o+Math.imul(at,j)|0,c=c+Math.imul(at,pt)|0,d=d+Math.imul(O,G)|0,o=o+Math.imul(O,vt)|0,o=o+Math.imul(ot,G)|0,c=c+Math.imul(ot,vt)|0,d=d+Math.imul(L,Z)|0,o=o+Math.imul(L,mt)|0,o=o+Math.imul(st,Z)|0,c=c+Math.imul(st,mt)|0,d=d+Math.imul(U,z)|0,o=o+Math.imul(U,gt)|0,o=o+Math.imul(nt,z)|0,c=c+Math.imul(nt,gt)|0,d=d+Math.imul($,Y)|0,o=o+Math.imul($,wt)|0,o=o+Math.imul(it,Y)|0,c=c+Math.imul(it,wt)|0;var be=(m+d|0)+((o&8191)<<13)|0;m=(c+(o>>>13)|0)+(be>>>26)|0,be&=67108863,d=Math.imul(k,j),o=Math.imul(k,pt),o=o+Math.imul(lt,j)|0,c=Math.imul(lt,pt),d=d+Math.imul(P,G)|0,o=o+Math.imul(P,vt)|0,o=o+Math.imul(at,G)|0,c=c+Math.imul(at,vt)|0,d=d+Math.imul(O,Z)|0,o=o+Math.imul(O,mt)|0,o=o+Math.imul(ot,Z)|0,c=c+Math.imul(ot,mt)|0,d=d+Math.imul(L,z)|0,o=o+Math.imul(L,gt)|0,o=o+Math.imul(st,z)|0,c=c+Math.imul(st,gt)|0,d=d+Math.imul(U,Y)|0,o=o+Math.imul(U,wt)|0,o=o+Math.imul(nt,Y)|0,c=c+Math.imul(nt,wt)|0;var Ce=(m+d|0)+((o&8191)<<13)|0;m=(c+(o>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,d=Math.imul(k,G),o=Math.imul(k,vt),o=o+Math.imul(lt,G)|0,c=Math.imul(lt,vt),d=d+Math.imul(P,Z)|0,o=o+Math.imul(P,mt)|0,o=o+Math.imul(at,Z)|0,c=c+Math.imul(at,mt)|0,d=d+Math.imul(O,z)|0,o=o+Math.imul(O,gt)|0,o=o+Math.imul(ot,z)|0,c=c+Math.imul(ot,gt)|0,d=d+Math.imul(L,Y)|0,o=o+Math.imul(L,wt)|0,o=o+Math.imul(st,Y)|0,c=c+Math.imul(st,wt)|0;var Ee=(m+d|0)+((o&8191)<<13)|0;m=(c+(o>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,d=Math.imul(k,Z),o=Math.imul(k,mt),o=o+Math.imul(lt,Z)|0,c=Math.imul(lt,mt),d=d+Math.imul(P,z)|0,o=o+Math.imul(P,gt)|0,o=o+Math.imul(at,z)|0,c=c+Math.imul(at,gt)|0,d=d+Math.imul(O,Y)|0,o=o+Math.imul(O,wt)|0,o=o+Math.imul(ot,Y)|0,c=c+Math.imul(ot,wt)|0;var Ae=(m+d|0)+((o&8191)<<13)|0;m=(c+(o>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,d=Math.imul(k,z),o=Math.imul(k,gt),o=o+Math.imul(lt,z)|0,c=Math.imul(lt,gt),d=d+Math.imul(P,Y)|0,o=o+Math.imul(P,wt)|0,o=o+Math.imul(at,Y)|0,c=c+Math.imul(at,wt)|0;var Me=(m+d|0)+((o&8191)<<13)|0;m=(c+(o>>>13)|0)+(Me>>>26)|0,Me&=67108863,d=Math.imul(k,Y),o=Math.imul(k,wt),o=o+Math.imul(lt,Y)|0,c=Math.imul(lt,wt);var Be=(m+d|0)+((o&8191)<<13)|0;return m=(c+(o>>>13)|0)+(Be>>>26)|0,Be&=67108863,p[0]=xt,p[1]=St,p[2]=he,p[3]=fe,p[4]=ue,p[5]=ce,p[6]=de,p[7]=pe,p[8]=ve,p[9]=me,p[10]=ge,p[11]=we,p[12]=ye,p[13]=be,p[14]=Ce,p[15]=Ee,p[16]=Ae,p[17]=Me,p[18]=Be,m!==0&&(p[19]=m,n.length++),n};Math.imul||(bt=_);function T(g,s,l){l.negative=s.negative^g.negative,l.length=g.length+s.length;for(var n=0,h=0,u=0;u<l.length-1;u++){var p=h;h=0;for(var m=n&67108863,d=Math.min(u,s.length-1),o=Math.max(0,u-g.length+1);o<=d;o++){var c=u-o,v=g.words[c]|0,y=s.words[o]|0,M=v*y,B=M&67108863;p=p+(M/67108864|0)|0,B=B+m|0,m=B&67108863,p=p+(B>>>26)|0,h+=p>>>26,p&=67108863}l.words[u]=m,n=p,p=h}return n!==0?l.words[u]=n:l.length--,l.strip()}function Q(g,s,l){var n=new et;return n.mulp(g,s,l)}a.prototype.mulTo=function(s,l){var n,h=this.length+s.length;return this.length===10&&s.length===10?n=bt(this,s,l):h<63?n=_(this,s,l):h<1024?n=T(this,s,l):n=Q(this,s,l),n};function et(g,s){this.x=g,this.y=s}et.prototype.makeRBT=function(s){for(var l=new Array(s),n=a.prototype._countBits(s)-1,h=0;h<s;h++)l[h]=this.revBin(h,n,s);return l},et.prototype.revBin=function(s,l,n){if(s===0||s===n-1)return s;for(var h=0,u=0;u<l;u++)h|=(s&1)<<l-u-1,s>>=1;return h},et.prototype.permute=function(s,l,n,h,u,p){for(var m=0;m<p;m++)h[m]=l[s[m]],u[m]=n[s[m]]},et.prototype.transform=function(s,l,n,h,u,p){this.permute(p,s,l,n,h,u);for(var m=1;m<u;m<<=1)for(var d=m<<1,o=Math.cos(2*Math.PI/d),c=Math.sin(2*Math.PI/d),v=0;v<u;v+=d)for(var y=o,M=c,B=0;B<m;B++){var x=n[v+B],N=h[v+B],yt=n[v+B+m],I=h[v+B+m],tt=y*yt-M*I;I=y*I+M*yt,yt=tt,n[v+B]=x+yt,h[v+B]=N+I,n[v+B+m]=x-yt,h[v+B+m]=N-I,B!==d&&(tt=o*y-c*M,M=o*M+c*y,y=tt)}},et.prototype.guessLen13b=function(s,l){var n=Math.max(l,s)|1,h=n&1,u=0;for(n=n/2|0;n;n=n>>>1)u++;return 1<<u+1+h},et.prototype.conjugate=function(s,l,n){if(!(n<=1))for(var h=0;h<n/2;h++){var u=s[h];s[h]=s[n-h-1],s[n-h-1]=u,u=l[h],l[h]=-l[n-h-1],l[n-h-1]=-u}},et.prototype.normalize13b=function(s,l){for(var n=0,h=0;h<l/2;h++){var u=Math.round(s[2*h+1]/l)*8192+Math.round(s[2*h]/l)+n;s[h]=u&67108863,u<67108864?n=0:n=u/67108864|0}return s},et.prototype.convert13b=function(s,l,n,h){for(var u=0,p=0;p<l;p++)u=u+(s[p]|0),n[2*p]=u&8191,u=u>>>13,n[2*p+1]=u&8191,u=u>>>13;for(p=2*l;p<h;++p)n[p]=0;i(u===0),i((u&-8192)===0)},et.prototype.stub=function(s){for(var l=new Array(s),n=0;n<s;n++)l[n]=0;return l},et.prototype.mulp=function(s,l,n){var h=2*this.guessLen13b(s.length,l.length),u=this.makeRBT(h),p=this.stub(h),m=new Array(h),d=new Array(h),o=new Array(h),c=new Array(h),v=new Array(h),y=new Array(h),M=n.words;M.length=h,this.convert13b(s.words,s.length,m,h),this.convert13b(l.words,l.length,c,h),this.transform(m,p,d,o,h,u),this.transform(c,p,v,y,h,u);for(var B=0;B<h;B++){var x=d[B]*v[B]-o[B]*y[B];o[B]=d[B]*y[B]+o[B]*v[B],d[B]=x}return this.conjugate(d,o,h),this.transform(d,o,M,p,h,u),this.conjugate(M,p,h),this.normalize13b(M,h),n.negative=s.negative^l.negative,n.length=s.length+l.length,n.strip()},a.prototype.mul=function(s){var l=new a(null);return l.words=new Array(this.length+s.length),this.mulTo(s,l)},a.prototype.mulf=function(s){var l=new a(null);return l.words=new Array(this.length+s.length),Q(this,s,l)},a.prototype.imul=function(s){return this.clone().mulTo(s,this)},a.prototype.imuln=function(s){i(typeof s=="number"),i(s<67108864);for(var l=0,n=0;n<this.length;n++){var h=(this.words[n]|0)*s,u=(h&67108863)+(l&67108863);l>>=26,l+=h/67108864|0,l+=u>>>26,this.words[n]=u&67108863}return l!==0&&(this.words[n]=l,this.length++),this},a.prototype.muln=function(s){return this.clone().imuln(s)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(s){var l=S(s);if(l.length===0)return new a(1);for(var n=this,h=0;h<l.length&&l[h]===0;h++,n=n.sqr());if(++h<l.length)for(var u=n.sqr();h<l.length;h++,u=u.sqr())l[h]!==0&&(n=n.mul(u));return n},a.prototype.iushln=function(s){i(typeof s=="number"&&s>=0);var l=s%26,n=(s-l)/26,h=67108863>>>26-l<<26-l,u;if(l!==0){var p=0;for(u=0;u<this.length;u++){var m=this.words[u]&h,d=(this.words[u]|0)-m<<l;this.words[u]=d|p,p=m>>>26-l}p&&(this.words[u]=p,this.length++)}if(n!==0){for(u=this.length-1;u>=0;u--)this.words[u+n]=this.words[u];for(u=0;u<n;u++)this.words[u]=0;this.length+=n}return this.strip()},a.prototype.ishln=function(s){return i(this.negative===0),this.iushln(s)},a.prototype.iushrn=function(s,l,n){i(typeof s=="number"&&s>=0);var h;l?h=(l-l%26)/26:h=0;var u=s%26,p=Math.min((s-u)/26,this.length),m=67108863^67108863>>>u<<u,d=n;if(h-=p,h=Math.max(0,h),d){for(var o=0;o<p;o++)d.words[o]=this.words[o];d.length=p}if(p!==0)if(this.length>p)for(this.length-=p,o=0;o<this.length;o++)this.words[o]=this.words[o+p];else this.words[0]=0,this.length=1;var c=0;for(o=this.length-1;o>=0&&(c!==0||o>=h);o--){var v=this.words[o]|0;this.words[o]=c<<26-u|v>>>u,c=v&m}return d&&c!==0&&(d.words[d.length++]=c),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},a.prototype.ishrn=function(s,l,n){return i(this.negative===0),this.iushrn(s,l,n)},a.prototype.shln=function(s){return this.clone().ishln(s)},a.prototype.ushln=function(s){return this.clone().iushln(s)},a.prototype.shrn=function(s){return this.clone().ishrn(s)},a.prototype.ushrn=function(s){return this.clone().iushrn(s)},a.prototype.testn=function(s){i(typeof s=="number"&&s>=0);var l=s%26,n=(s-l)/26,h=1<<l;if(this.length<=n)return!1;var u=this.words[n];return!!(u&h)},a.prototype.imaskn=function(s){i(typeof s=="number"&&s>=0);var l=s%26,n=(s-l)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=n)return this;if(l!==0&&n++,this.length=Math.min(n,this.length),l!==0){var h=67108863^67108863>>>l<<l;this.words[this.length-1]&=h}return this.strip()},a.prototype.maskn=function(s){return this.clone().imaskn(s)},a.prototype.iaddn=function(s){return i(typeof s=="number"),i(s<67108864),s<0?this.isubn(-s):this.negative!==0?this.length===1&&(this.words[0]|0)<s?(this.words[0]=s-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(s),this.negative=1,this):this._iaddn(s)},a.prototype._iaddn=function(s){this.words[0]+=s;for(var l=0;l<this.length&&this.words[l]>=67108864;l++)this.words[l]-=67108864,l===this.length-1?this.words[l+1]=1:this.words[l+1]++;return this.length=Math.max(this.length,l+1),this},a.prototype.isubn=function(s){if(i(typeof s=="number"),i(s<67108864),s<0)return this.iaddn(-s);if(this.negative!==0)return this.negative=0,this.iaddn(s),this.negative=1,this;if(this.words[0]-=s,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var l=0;l<this.length&&this.words[l]<0;l++)this.words[l]+=67108864,this.words[l+1]-=1;return this.strip()},a.prototype.addn=function(s){return this.clone().iaddn(s)},a.prototype.subn=function(s){return this.clone().isubn(s)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(s,l,n){var h=s.length+n,u;this._expand(h);var p,m=0;for(u=0;u<s.length;u++){p=(this.words[u+n]|0)+m;var d=(s.words[u]|0)*l;p-=d&67108863,m=(p>>26)-(d/67108864|0),this.words[u+n]=p&67108863}for(;u<this.length-n;u++)p=(this.words[u+n]|0)+m,m=p>>26,this.words[u+n]=p&67108863;if(m===0)return this.strip();for(i(m===-1),m=0,u=0;u<this.length;u++)p=-(this.words[u]|0)+m,m=p>>26,this.words[u]=p&67108863;return this.negative=1,this.strip()},a.prototype._wordDiv=function(s,l){var n=this.length-s.length,h=this.clone(),u=s,p=u.words[u.length-1]|0,m=this._countBits(p);n=26-m,n!==0&&(u=u.ushln(n),h.iushln(n),p=u.words[u.length-1]|0);var d=h.length-u.length,o;if(l!=="mod"){o=new a(null),o.length=d+1,o.words=new Array(o.length);for(var c=0;c<o.length;c++)o.words[c]=0}var v=h.clone()._ishlnsubmul(u,1,d);v.negative===0&&(h=v,o&&(o.words[d]=1));for(var y=d-1;y>=0;y--){var M=(h.words[u.length+y]|0)*67108864+(h.words[u.length+y-1]|0);for(M=Math.min(M/p|0,67108863),h._ishlnsubmul(u,M,y);h.negative!==0;)M--,h.negative=0,h._ishlnsubmul(u,1,y),h.isZero()||(h.negative^=1);o&&(o.words[y]=M)}return o&&o.strip(),h.strip(),l!=="div"&&n!==0&&h.iushrn(n),{div:o||null,mod:h}},a.prototype.divmod=function(s,l,n){if(i(!s.isZero()),this.isZero())return{div:new a(0),mod:new a(0)};var h,u,p;return this.negative!==0&&s.negative===0?(p=this.neg().divmod(s,l),l!=="mod"&&(h=p.div.neg()),l!=="div"&&(u=p.mod.neg(),n&&u.negative!==0&&u.iadd(s)),{div:h,mod:u}):this.negative===0&&s.negative!==0?(p=this.divmod(s.neg(),l),l!=="mod"&&(h=p.div.neg()),{div:h,mod:p.mod}):this.negative&s.negative?(p=this.neg().divmod(s.neg(),l),l!=="div"&&(u=p.mod.neg(),n&&u.negative!==0&&u.isub(s)),{div:p.div,mod:u}):s.length>this.length||this.cmp(s)<0?{div:new a(0),mod:this}:s.length===1?l==="div"?{div:this.divn(s.words[0]),mod:null}:l==="mod"?{div:null,mod:new a(this.modn(s.words[0]))}:{div:this.divn(s.words[0]),mod:new a(this.modn(s.words[0]))}:this._wordDiv(s,l)},a.prototype.div=function(s){return this.divmod(s,"div",!1).div},a.prototype.mod=function(s){return this.divmod(s,"mod",!1).mod},a.prototype.umod=function(s){return this.divmod(s,"mod",!0).mod},a.prototype.divRound=function(s){var l=this.divmod(s);if(l.mod.isZero())return l.div;var n=l.div.negative!==0?l.mod.isub(s):l.mod,h=s.ushrn(1),u=s.andln(1),p=n.cmp(h);return p<0||u===1&&p===0?l.div:l.div.negative!==0?l.div.isubn(1):l.div.iaddn(1)},a.prototype.modn=function(s){i(s<=67108863);for(var l=(1<<26)%s,n=0,h=this.length-1;h>=0;h--)n=(l*n+(this.words[h]|0))%s;return n},a.prototype.idivn=function(s){i(s<=67108863);for(var l=0,n=this.length-1;n>=0;n--){var h=(this.words[n]|0)+l*67108864;this.words[n]=h/s|0,l=h%s}return this.strip()},a.prototype.divn=function(s){return this.clone().idivn(s)},a.prototype.egcd=function(s){i(s.negative===0),i(!s.isZero());var l=this,n=s.clone();l.negative!==0?l=l.umod(s):l=l.clone();for(var h=new a(1),u=new a(0),p=new a(0),m=new a(1),d=0;l.isEven()&&n.isEven();)l.iushrn(1),n.iushrn(1),++d;for(var o=n.clone(),c=l.clone();!l.isZero();){for(var v=0,y=1;!(l.words[0]&y)&&v<26;++v,y<<=1);if(v>0)for(l.iushrn(v);v-- >0;)(h.isOdd()||u.isOdd())&&(h.iadd(o),u.isub(c)),h.iushrn(1),u.iushrn(1);for(var M=0,B=1;!(n.words[0]&B)&&M<26;++M,B<<=1);if(M>0)for(n.iushrn(M);M-- >0;)(p.isOdd()||m.isOdd())&&(p.iadd(o),m.isub(c)),p.iushrn(1),m.iushrn(1);l.cmp(n)>=0?(l.isub(n),h.isub(p),u.isub(m)):(n.isub(l),p.isub(h),m.isub(u))}return{a:p,b:m,gcd:n.iushln(d)}},a.prototype._invmp=function(s){i(s.negative===0),i(!s.isZero());var l=this,n=s.clone();l.negative!==0?l=l.umod(s):l=l.clone();for(var h=new a(1),u=new a(0),p=n.clone();l.cmpn(1)>0&&n.cmpn(1)>0;){for(var m=0,d=1;!(l.words[0]&d)&&m<26;++m,d<<=1);if(m>0)for(l.iushrn(m);m-- >0;)h.isOdd()&&h.iadd(p),h.iushrn(1);for(var o=0,c=1;!(n.words[0]&c)&&o<26;++o,c<<=1);if(o>0)for(n.iushrn(o);o-- >0;)u.isOdd()&&u.iadd(p),u.iushrn(1);l.cmp(n)>=0?(l.isub(n),h.isub(u)):(n.isub(l),u.isub(h))}var v;return l.cmpn(1)===0?v=h:v=u,v.cmpn(0)<0&&v.iadd(s),v},a.prototype.gcd=function(s){if(this.isZero())return s.abs();if(s.isZero())return this.abs();var l=this.clone(),n=s.clone();l.negative=0,n.negative=0;for(var h=0;l.isEven()&&n.isEven();h++)l.iushrn(1),n.iushrn(1);do{for(;l.isEven();)l.iushrn(1);for(;n.isEven();)n.iushrn(1);var u=l.cmp(n);if(u<0){var p=l;l=n,n=p}else if(u===0||n.cmpn(1)===0)break;l.isub(n)}while(!0);return n.iushln(h)},a.prototype.invm=function(s){return this.egcd(s).a.umod(s)},a.prototype.isEven=function(){return(this.words[0]&1)===0},a.prototype.isOdd=function(){return(this.words[0]&1)===1},a.prototype.andln=function(s){return this.words[0]&s},a.prototype.bincn=function(s){i(typeof s=="number");var l=s%26,n=(s-l)/26,h=1<<l;if(this.length<=n)return this._expand(n+1),this.words[n]|=h,this;for(var u=h,p=n;u!==0&&p<this.length;p++){var m=this.words[p]|0;m+=u,u=m>>>26,m&=67108863,this.words[p]=m}return u!==0&&(this.words[p]=u,this.length++),this},a.prototype.isZero=function(){return this.length===1&&this.words[0]===0},a.prototype.cmpn=function(s){var l=s<0;if(this.negative!==0&&!l)return-1;if(this.negative===0&&l)return 1;this.strip();var n;if(this.length>1)n=1;else{l&&(s=-s),i(s<=67108863,"Number is too big");var h=this.words[0]|0;n=h===s?0:h<s?-1:1}return this.negative!==0?-n|0:n},a.prototype.cmp=function(s){if(this.negative!==0&&s.negative===0)return-1;if(this.negative===0&&s.negative!==0)return 1;var l=this.ucmp(s);return this.negative!==0?-l|0:l},a.prototype.ucmp=function(s){if(this.length>s.length)return 1;if(this.length<s.length)return-1;for(var l=0,n=this.length-1;n>=0;n--){var h=this.words[n]|0,u=s.words[n]|0;if(h!==u){h<u?l=-1:h>u&&(l=1);break}}return l},a.prototype.gtn=function(s){return this.cmpn(s)===1},a.prototype.gt=function(s){return this.cmp(s)===1},a.prototype.gten=function(s){return this.cmpn(s)>=0},a.prototype.gte=function(s){return this.cmp(s)>=0},a.prototype.ltn=function(s){return this.cmpn(s)===-1},a.prototype.lt=function(s){return this.cmp(s)===-1},a.prototype.lten=function(s){return this.cmpn(s)<=0},a.prototype.lte=function(s){return this.cmp(s)<=0},a.prototype.eqn=function(s){return this.cmpn(s)===0},a.prototype.eq=function(s){return this.cmp(s)===0},a.red=function(s){return new J(s)},a.prototype.toRed=function(s){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),s.convertTo(this)._forceRed(s)},a.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(s){return this.red=s,this},a.prototype.forceRed=function(s){return i(!this.red,"Already a number in reduction context"),this._forceRed(s)},a.prototype.redAdd=function(s){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,s)},a.prototype.redIAdd=function(s){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,s)},a.prototype.redSub=function(s){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,s)},a.prototype.redISub=function(s){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,s)},a.prototype.redShl=function(s){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,s)},a.prototype.redMul=function(s){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.mul(this,s)},a.prototype.redIMul=function(s){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.imul(this,s)},a.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(s){return i(this.red&&!s.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,s)};var Mt={k256:null,p224:null,p192:null,p25519:null};function X(g,s){this.name=g,this.p=new a(s,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}X.prototype._tmp=function(){var s=new a(null);return s.words=new Array(Math.ceil(this.n/13)),s},X.prototype.ireduce=function(s){var l=s,n;do this.split(l,this.tmp),l=this.imulK(l),l=l.iadd(this.tmp),n=l.bitLength();while(n>this.n);var h=n<this.n?-1:l.ucmp(this.p);return h===0?(l.words[0]=0,l.length=1):h>0?l.isub(this.p):l.strip(),l},X.prototype.split=function(s,l){s.iushrn(this.n,0,l)},X.prototype.imulK=function(s){return s.imul(this.k)};function At(){X.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}f(At,X),At.prototype.split=function(s,l){for(var n=4194303,h=Math.min(s.length,9),u=0;u<h;u++)l.words[u]=s.words[u];if(l.length=h,s.length<=9){s.words[0]=0,s.length=1;return}var p=s.words[9];for(l.words[l.length++]=p&n,u=10;u<s.length;u++){var m=s.words[u]|0;s.words[u-10]=(m&n)<<4|p>>>22,p=m}p>>>=22,s.words[u-10]=p,p===0&&s.length>10?s.length-=10:s.length-=9},At.prototype.imulK=function(s){s.words[s.length]=0,s.words[s.length+1]=0,s.length+=2;for(var l=0,n=0;n<s.length;n++){var h=s.words[n]|0;l+=h*977,s.words[n]=l&67108863,l=h*64+(l/67108864|0)}return s.words[s.length-1]===0&&(s.length--,s.words[s.length-1]===0&&s.length--),s};function _t(){X.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}f(_t,X);function Xt(){X.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}f(Xt,X);function Zt(){X.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}f(Zt,X),Zt.prototype.imulK=function(s){for(var l=0,n=0;n<s.length;n++){var h=(s.words[n]|0)*19+l,u=h&67108863;h>>>=26,s.words[n]=u,l=h}return l!==0&&(s.words[s.length++]=l),s},a._prime=function(s){if(Mt[s])return Mt[s];var l;if(s==="k256")l=new At;else if(s==="p224")l=new _t;else if(s==="p192")l=new Xt;else if(s==="p25519")l=new Zt;else throw new Error("Unknown prime "+s);return Mt[s]=l,l};function J(g){if(typeof g=="string"){var s=a._prime(g);this.m=s.p,this.prime=s}else i(g.gtn(1),"modulus must be greater than 1"),this.m=g,this.prime=null}J.prototype._verify1=function(s){i(s.negative===0,"red works only with positives"),i(s.red,"red works only with red numbers")},J.prototype._verify2=function(s,l){i((s.negative|l.negative)===0,"red works only with positives"),i(s.red&&s.red===l.red,"red works only with red numbers")},J.prototype.imod=function(s){return this.prime?this.prime.ireduce(s)._forceRed(this):s.umod(this.m)._forceRed(this)},J.prototype.neg=function(s){return s.isZero()?s.clone():this.m.sub(s)._forceRed(this)},J.prototype.add=function(s,l){this._verify2(s,l);var n=s.add(l);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},J.prototype.iadd=function(s,l){this._verify2(s,l);var n=s.iadd(l);return n.cmp(this.m)>=0&&n.isub(this.m),n},J.prototype.sub=function(s,l){this._verify2(s,l);var n=s.sub(l);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},J.prototype.isub=function(s,l){this._verify2(s,l);var n=s.isub(l);return n.cmpn(0)<0&&n.iadd(this.m),n},J.prototype.shl=function(s,l){return this._verify1(s),this.imod(s.ushln(l))},J.prototype.imul=function(s,l){return this._verify2(s,l),this.imod(s.imul(l))},J.prototype.mul=function(s,l){return this._verify2(s,l),this.imod(s.mul(l))},J.prototype.isqr=function(s){return this.imul(s,s.clone())},J.prototype.sqr=function(s){return this.mul(s,s)},J.prototype.sqrt=function(s){if(s.isZero())return s.clone();var l=this.m.andln(3);if(i(l%2===1),l===3){var n=this.m.add(new a(1)).iushrn(2);return this.pow(s,n)}for(var h=this.m.subn(1),u=0;!h.isZero()&&h.andln(1)===0;)u++,h.iushrn(1);i(!h.isZero());var p=new a(1).toRed(this),m=p.redNeg(),d=this.m.subn(1).iushrn(1),o=this.m.bitLength();for(o=new a(2*o*o).toRed(this);this.pow(o,d).cmp(m)!==0;)o.redIAdd(m);for(var c=this.pow(o,h),v=this.pow(s,h.addn(1).iushrn(1)),y=this.pow(s,h),M=u;y.cmp(p)!==0;){for(var B=y,x=0;B.cmp(p)!==0;x++)B=B.redSqr();i(x<M);var N=this.pow(c,new a(1).iushln(M-x-1));v=v.redMul(N),c=N.redSqr(),y=y.redMul(c),M=x}return v},J.prototype.invm=function(s){var l=s._invmp(this.m);return l.negative!==0?(l.negative=0,this.imod(l).redNeg()):this.imod(l)},J.prototype.pow=function(s,l){if(l.isZero())return new a(1);if(l.cmpn(1)===0)return s.clone();var n=4,h=new Array(1<<n);h[0]=new a(1).toRed(this),h[1]=s;for(var u=2;u<h.length;u++)h[u]=this.mul(h[u-1],s);var p=h[0],m=0,d=0,o=l.bitLength()%26;for(o===0&&(o=26),u=l.length-1;u>=0;u--){for(var c=l.words[u],v=o-1;v>=0;v--){var y=c>>v&1;if(p!==h[0]&&(p=this.sqr(p)),y===0&&m===0){d=0;continue}m<<=1,m|=y,d++,!(d!==n&&(u!==0||v!==0))&&(p=this.mul(p,h[m]),d=0,m=0)}o=26}return p},J.prototype.convertTo=function(s){var l=s.umod(this.m);return l===s?l.clone():l},J.prototype.convertFrom=function(s){var l=s.clone();return l.red=null,l},a.mont=function(s){return new zt(s)};function zt(g){J.call(this,g),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}f(zt,J),zt.prototype.convertTo=function(s){return this.imod(s.ushln(this.shift))},zt.prototype.convertFrom=function(s){var l=this.imod(s.mul(this.rinv));return l.red=null,l},zt.prototype.imul=function(s,l){if(s.isZero()||l.isZero())return s.words[0]=0,s.length=1,s;var n=s.imul(l),h=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),u=n.isub(h).iushrn(this.shift),p=u;return u.cmp(this.m)>=0?p=u.isub(this.m):u.cmpn(0)<0&&(p=u.iadd(this.m)),p._forceRed(this)},zt.prototype.mul=function(s,l){if(s.isZero()||l.isZero())return new a(0)._forceRed(this);var n=s.mul(l),h=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),u=n.isub(h).iushrn(this.shift),p=u;return u.cmp(this.m)>=0?p=u.isub(this.m):u.cmpn(0)<0&&(p=u.iadd(this.m)),p._forceRed(this)},zt.prototype.invm=function(s){var l=this.imod(s._invmp(this.m).mul(this.r2));return l._forceRed(this)}})(r,wn)})(Cn);var xl=Cn.exports,En={exports:{}};En.exports;(function(r){(function(t,e){function i(g,s){if(!g)throw new Error(s||"Assertion failed")}function f(g,s){g.super_=s;var l=function(){};l.prototype=s.prototype,g.prototype=new l,g.prototype.constructor=g}function a(g,s,l){if(a.isBN(g))return g;this.negative=0,this.words=null,this.length=0,this.red=null,g!==null&&((s==="le"||s==="be")&&(l=s,s=10),this._init(g||0,s||10,l||"be"))}typeof t=="object"?t.exports=a:e.BN=a,a.BN=a,a.wordSize=26;var w;try{w=Co("buffer").Buffer}catch{}a.isBN=function(s){return s instanceof a?!0:s!==null&&typeof s=="object"&&s.constructor.wordSize===a.wordSize&&Array.isArray(s.words)},a.max=function(s,l){return s.cmp(l)>0?s:l},a.min=function(s,l){return s.cmp(l)<0?s:l},a.prototype._init=function(s,l,n){if(typeof s=="number")return this._initNumber(s,l,n);if(typeof s=="object")return this._initArray(s,l,n);l==="hex"&&(l=16),i(l===(l|0)&&l>=2&&l<=36),s=s.toString().replace(/\s+/g,"");var h=0;s[0]==="-"&&h++,l===16?this._parseHex(s,h):this._parseBase(s,l,h),s[0]==="-"&&(this.negative=1),this.strip(),n==="le"&&this._initArray(this.toArray(),l,n)},a.prototype._initNumber=function(s,l,n){s<0&&(this.negative=1,s=-s),s<67108864?(this.words=[s&67108863],this.length=1):s<4503599627370496?(this.words=[s&67108863,s/67108864&67108863],this.length=2):(i(s<9007199254740992),this.words=[s&67108863,s/67108864&67108863,1],this.length=3),n==="le"&&this._initArray(this.toArray(),l,n)},a.prototype._initArray=function(s,l,n){if(i(typeof s.length=="number"),s.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(s.length/3),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var u,p,m=0;if(n==="be")for(h=s.length-1,u=0;h>=0;h-=3)p=s[h]|s[h-1]<<8|s[h-2]<<16,this.words[u]|=p<<m&67108863,this.words[u+1]=p>>>26-m&67108863,m+=24,m>=26&&(m-=26,u++);else if(n==="le")for(h=0,u=0;h<s.length;h+=3)p=s[h]|s[h+1]<<8|s[h+2]<<16,this.words[u]|=p<<m&67108863,this.words[u+1]=p>>>26-m&67108863,m+=24,m>=26&&(m-=26,u++);return this.strip()};function C(g,s,l){for(var n=0,h=Math.min(g.length,l),u=s;u<h;u++){var p=g.charCodeAt(u)-48;n<<=4,p>=49&&p<=54?n|=p-49+10:p>=17&&p<=22?n|=p-17+10:n|=p&15}return n}a.prototype._parseHex=function(s,l){this.length=Math.ceil((s.length-l)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var h,u,p=0;for(n=s.length-6,h=0;n>=l;n-=6)u=C(s,n,n+6),this.words[h]|=u<<p&67108863,this.words[h+1]|=u>>>26-p&4194303,p+=24,p>=26&&(p-=26,h++);n+6!==l&&(u=C(s,l,n+6),this.words[h]|=u<<p&67108863,this.words[h+1]|=u>>>26-p&4194303),this.strip()};function b(g,s,l,n){for(var h=0,u=Math.min(g.length,l),p=s;p<u;p++){var m=g.charCodeAt(p)-48;h*=n,m>=49?h+=m-49+10:m>=17?h+=m-17+10:h+=m}return h}a.prototype._parseBase=function(s,l,n){this.words=[0],this.length=1;for(var h=0,u=1;u<=67108863;u*=l)h++;h--,u=u/l|0;for(var p=s.length-n,m=p%h,d=Math.min(p,p-m)+n,o=0,c=n;c<d;c+=h)o=b(s,c,c+h,l),this.imuln(u),this.words[0]+o<67108864?this.words[0]+=o:this._iaddn(o);if(m!==0){var v=1;for(o=b(s,c,s.length,l),c=0;c<m;c++)v*=l;this.imuln(v),this.words[0]+o<67108864?this.words[0]+=o:this._iaddn(o)}},a.prototype.copy=function(s){s.words=new Array(this.length);for(var l=0;l<this.length;l++)s.words[l]=this.words[l];s.length=this.length,s.negative=this.negative,s.red=this.red},a.prototype.clone=function(){var s=new a(null);return this.copy(s),s},a.prototype._expand=function(s){for(;this.length<s;)this.words[this.length++]=0;return this},a.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},a.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},a.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var A=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],E=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],F=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(s,l){s=s||10,l=l|0||1;var n;if(s===16||s==="hex"){n="";for(var h=0,u=0,p=0;p<this.length;p++){var m=this.words[p],d=((m<<h|u)&16777215).toString(16);u=m>>>24-h&16777215,u!==0||p!==this.length-1?n=A[6-d.length]+d+n:n=d+n,h+=2,h>=26&&(h-=26,p--)}for(u!==0&&(n=u.toString(16)+n);n.length%l!==0;)n="0"+n;return this.negative!==0&&(n="-"+n),n}if(s===(s|0)&&s>=2&&s<=36){var o=E[s],c=F[s];n="";var v=this.clone();for(v.negative=0;!v.isZero();){var y=v.modn(c).toString(s);v=v.idivn(c),v.isZero()?n=y+n:n=A[o-y.length]+y+n}for(this.isZero()&&(n="0"+n);n.length%l!==0;)n="0"+n;return this.negative!==0&&(n="-"+n),n}i(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var s=this.words[0];return this.length===2?s+=this.words[1]*67108864:this.length===3&&this.words[2]===1?s+=4503599627370496+this.words[1]*67108864:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-s:s},a.prototype.toJSON=function(){return this.toString(16)},a.prototype.toBuffer=function(s,l){return i(typeof w<"u"),this.toArrayLike(w,s,l)},a.prototype.toArray=function(s,l){return this.toArrayLike(Array,s,l)},a.prototype.toArrayLike=function(s,l,n){var h=this.byteLength(),u=n||Math.max(1,h);i(h<=u,"byte array longer than desired length"),i(u>0,"Requested array length <= 0"),this.strip();var p=l==="le",m=new s(u),d,o,c=this.clone();if(p){for(o=0;!c.isZero();o++)d=c.andln(255),c.iushrn(8),m[o]=d;for(;o<u;o++)m[o]=0}else{for(o=0;o<u-h;o++)m[o]=0;for(o=0;!c.isZero();o++)d=c.andln(255),c.iushrn(8),m[u-o-1]=d}return m},Math.clz32?a.prototype._countBits=function(s){return 32-Math.clz32(s)}:a.prototype._countBits=function(s){var l=s,n=0;return l>=4096&&(n+=13,l>>>=13),l>=64&&(n+=7,l>>>=7),l>=8&&(n+=4,l>>>=4),l>=2&&(n+=2,l>>>=2),n+l},a.prototype._zeroBits=function(s){if(s===0)return 26;var l=s,n=0;return l&8191||(n+=13,l>>>=13),l&127||(n+=7,l>>>=7),l&15||(n+=4,l>>>=4),l&3||(n+=2,l>>>=2),l&1||n++,n},a.prototype.bitLength=function(){var s=this.words[this.length-1],l=this._countBits(s);return(this.length-1)*26+l};function S(g){for(var s=new Array(g.bitLength()),l=0;l<s.length;l++){var n=l/26|0,h=l%26;s[l]=(g.words[n]&1<<h)>>>h}return s}a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var s=0,l=0;l<this.length;l++){var n=this._zeroBits(this.words[l]);if(s+=n,n!==26)break}return s},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(s){return this.negative!==0?this.abs().inotn(s).iaddn(1):this.clone()},a.prototype.fromTwos=function(s){return this.testn(s-1)?this.notn(s).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return this.negative!==0},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(s){for(;this.length<s.length;)this.words[this.length++]=0;for(var l=0;l<s.length;l++)this.words[l]=this.words[l]|s.words[l];return this.strip()},a.prototype.ior=function(s){return i((this.negative|s.negative)===0),this.iuor(s)},a.prototype.or=function(s){return this.length>s.length?this.clone().ior(s):s.clone().ior(this)},a.prototype.uor=function(s){return this.length>s.length?this.clone().iuor(s):s.clone().iuor(this)},a.prototype.iuand=function(s){var l;this.length>s.length?l=s:l=this;for(var n=0;n<l.length;n++)this.words[n]=this.words[n]&s.words[n];return this.length=l.length,this.strip()},a.prototype.iand=function(s){return i((this.negative|s.negative)===0),this.iuand(s)},a.prototype.and=function(s){return this.length>s.length?this.clone().iand(s):s.clone().iand(this)},a.prototype.uand=function(s){return this.length>s.length?this.clone().iuand(s):s.clone().iuand(this)},a.prototype.iuxor=function(s){var l,n;this.length>s.length?(l=this,n=s):(l=s,n=this);for(var h=0;h<n.length;h++)this.words[h]=l.words[h]^n.words[h];if(this!==l)for(;h<l.length;h++)this.words[h]=l.words[h];return this.length=l.length,this.strip()},a.prototype.ixor=function(s){return i((this.negative|s.negative)===0),this.iuxor(s)},a.prototype.xor=function(s){return this.length>s.length?this.clone().ixor(s):s.clone().ixor(this)},a.prototype.uxor=function(s){return this.length>s.length?this.clone().iuxor(s):s.clone().iuxor(this)},a.prototype.inotn=function(s){i(typeof s=="number"&&s>=0);var l=Math.ceil(s/26)|0,n=s%26;this._expand(l),n>0&&l--;for(var h=0;h<l;h++)this.words[h]=~this.words[h]&67108863;return n>0&&(this.words[h]=~this.words[h]&67108863>>26-n),this.strip()},a.prototype.notn=function(s){return this.clone().inotn(s)},a.prototype.setn=function(s,l){i(typeof s=="number"&&s>=0);var n=s/26|0,h=s%26;return this._expand(n+1),l?this.words[n]=this.words[n]|1<<h:this.words[n]=this.words[n]&~(1<<h),this.strip()},a.prototype.iadd=function(s){var l;if(this.negative!==0&&s.negative===0)return this.negative=0,l=this.isub(s),this.negative^=1,this._normSign();if(this.negative===0&&s.negative!==0)return s.negative=0,l=this.isub(s),s.negative=1,l._normSign();var n,h;this.length>s.length?(n=this,h=s):(n=s,h=this);for(var u=0,p=0;p<h.length;p++)l=(n.words[p]|0)+(h.words[p]|0)+u,this.words[p]=l&67108863,u=l>>>26;for(;u!==0&&p<n.length;p++)l=(n.words[p]|0)+u,this.words[p]=l&67108863,u=l>>>26;if(this.length=n.length,u!==0)this.words[this.length]=u,this.length++;else if(n!==this)for(;p<n.length;p++)this.words[p]=n.words[p];return this},a.prototype.add=function(s){var l;return s.negative!==0&&this.negative===0?(s.negative=0,l=this.sub(s),s.negative^=1,l):s.negative===0&&this.negative!==0?(this.negative=0,l=s.sub(this),this.negative=1,l):this.length>s.length?this.clone().iadd(s):s.clone().iadd(this)},a.prototype.isub=function(s){if(s.negative!==0){s.negative=0;var l=this.iadd(s);return s.negative=1,l._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(s),this.negative=1,this._normSign();var n=this.cmp(s);if(n===0)return this.negative=0,this.length=1,this.words[0]=0,this;var h,u;n>0?(h=this,u=s):(h=s,u=this);for(var p=0,m=0;m<u.length;m++)l=(h.words[m]|0)-(u.words[m]|0)+p,p=l>>26,this.words[m]=l&67108863;for(;p!==0&&m<h.length;m++)l=(h.words[m]|0)+p,p=l>>26,this.words[m]=l&67108863;if(p===0&&m<h.length&&h!==this)for(;m<h.length;m++)this.words[m]=h.words[m];return this.length=Math.max(this.length,m),h!==this&&(this.negative=1),this.strip()},a.prototype.sub=function(s){return this.clone().isub(s)};function _(g,s,l){l.negative=s.negative^g.negative;var n=g.length+s.length|0;l.length=n,n=n-1|0;var h=g.words[0]|0,u=s.words[0]|0,p=h*u,m=p&67108863,d=p/67108864|0;l.words[0]=m;for(var o=1;o<n;o++){for(var c=d>>>26,v=d&67108863,y=Math.min(o,s.length-1),M=Math.max(0,o-g.length+1);M<=y;M++){var B=o-M|0;h=g.words[B]|0,u=s.words[M]|0,p=h*u+v,c+=p/67108864|0,v=p&67108863}l.words[o]=v|0,d=c|0}return d!==0?l.words[o]=d|0:l.length--,l.strip()}var bt=function(s,l,n){var h=s.words,u=l.words,p=n.words,m=0,d,o,c,v=h[0]|0,y=v&8191,M=v>>>13,B=h[1]|0,x=B&8191,N=B>>>13,yt=h[2]|0,I=yt&8191,tt=yt>>>13,It=h[3]|0,R=It&8191,rt=It>>>13,Tt=h[4]|0,$=Tt&8191,it=Tt>>>13,Nt=h[5]|0,U=Nt&8191,nt=Nt>>>13,Rt=h[6]|0,L=Rt&8191,st=Rt>>>13,$t=h[7]|0,O=$t&8191,ot=$t>>>13,Ut=h[8]|0,P=Ut&8191,at=Ut>>>13,Lt=h[9]|0,k=Lt&8191,lt=Lt>>>13,Ot=u[0]|0,q=Ot&8191,ht=Ot>>>13,Pt=u[1]|0,W=Pt&8191,ft=Pt>>>13,kt=u[2]|0,H=kt&8191,ut=kt>>>13,qt=u[3]|0,V=qt&8191,ct=qt>>>13,Wt=u[4]|0,K=Wt&8191,dt=Wt>>>13,Ht=u[5]|0,j=Ht&8191,pt=Ht>>>13,Vt=u[6]|0,G=Vt&8191,vt=Vt>>>13,Kt=u[7]|0,Z=Kt&8191,mt=Kt>>>13,jt=u[8]|0,z=jt&8191,gt=jt>>>13,Gt=u[9]|0,Y=Gt&8191,wt=Gt>>>13;n.negative=s.negative^l.negative,n.length=19,d=Math.imul(y,q),o=Math.imul(y,ht),o=o+Math.imul(M,q)|0,c=Math.imul(M,ht);var xt=(m+d|0)+((o&8191)<<13)|0;m=(c+(o>>>13)|0)+(xt>>>26)|0,xt&=67108863,d=Math.imul(x,q),o=Math.imul(x,ht),o=o+Math.imul(N,q)|0,c=Math.imul(N,ht),d=d+Math.imul(y,W)|0,o=o+Math.imul(y,ft)|0,o=o+Math.imul(M,W)|0,c=c+Math.imul(M,ft)|0;var St=(m+d|0)+((o&8191)<<13)|0;m=(c+(o>>>13)|0)+(St>>>26)|0,St&=67108863,d=Math.imul(I,q),o=Math.imul(I,ht),o=o+Math.imul(tt,q)|0,c=Math.imul(tt,ht),d=d+Math.imul(x,W)|0,o=o+Math.imul(x,ft)|0,o=o+Math.imul(N,W)|0,c=c+Math.imul(N,ft)|0,d=d+Math.imul(y,H)|0,o=o+Math.imul(y,ut)|0,o=o+Math.imul(M,H)|0,c=c+Math.imul(M,ut)|0;var he=(m+d|0)+((o&8191)<<13)|0;m=(c+(o>>>13)|0)+(he>>>26)|0,he&=67108863,d=Math.imul(R,q),o=Math.imul(R,ht),o=o+Math.imul(rt,q)|0,c=Math.imul(rt,ht),d=d+Math.imul(I,W)|0,o=o+Math.imul(I,ft)|0,o=o+Math.imul(tt,W)|0,c=c+Math.imul(tt,ft)|0,d=d+Math.imul(x,H)|0,o=o+Math.imul(x,ut)|0,o=o+Math.imul(N,H)|0,c=c+Math.imul(N,ut)|0,d=d+Math.imul(y,V)|0,o=o+Math.imul(y,ct)|0,o=o+Math.imul(M,V)|0,c=c+Math.imul(M,ct)|0;var fe=(m+d|0)+((o&8191)<<13)|0;m=(c+(o>>>13)|0)+(fe>>>26)|0,fe&=67108863,d=Math.imul($,q),o=Math.imul($,ht),o=o+Math.imul(it,q)|0,c=Math.imul(it,ht),d=d+Math.imul(R,W)|0,o=o+Math.imul(R,ft)|0,o=o+Math.imul(rt,W)|0,c=c+Math.imul(rt,ft)|0,d=d+Math.imul(I,H)|0,o=o+Math.imul(I,ut)|0,o=o+Math.imul(tt,H)|0,c=c+Math.imul(tt,ut)|0,d=d+Math.imul(x,V)|0,o=o+Math.imul(x,ct)|0,o=o+Math.imul(N,V)|0,c=c+Math.imul(N,ct)|0,d=d+Math.imul(y,K)|0,o=o+Math.imul(y,dt)|0,o=o+Math.imul(M,K)|0,c=c+Math.imul(M,dt)|0;var ue=(m+d|0)+((o&8191)<<13)|0;m=(c+(o>>>13)|0)+(ue>>>26)|0,ue&=67108863,d=Math.imul(U,q),o=Math.imul(U,ht),o=o+Math.imul(nt,q)|0,c=Math.imul(nt,ht),d=d+Math.imul($,W)|0,o=o+Math.imul($,ft)|0,o=o+Math.imul(it,W)|0,c=c+Math.imul(it,ft)|0,d=d+Math.imul(R,H)|0,o=o+Math.imul(R,ut)|0,o=o+Math.imul(rt,H)|0,c=c+Math.imul(rt,ut)|0,d=d+Math.imul(I,V)|0,o=o+Math.imul(I,ct)|0,o=o+Math.imul(tt,V)|0,c=c+Math.imul(tt,ct)|0,d=d+Math.imul(x,K)|0,o=o+Math.imul(x,dt)|0,o=o+Math.imul(N,K)|0,c=c+Math.imul(N,dt)|0,d=d+Math.imul(y,j)|0,o=o+Math.imul(y,pt)|0,o=o+Math.imul(M,j)|0,c=c+Math.imul(M,pt)|0;var ce=(m+d|0)+((o&8191)<<13)|0;m=(c+(o>>>13)|0)+(ce>>>26)|0,ce&=67108863,d=Math.imul(L,q),o=Math.imul(L,ht),o=o+Math.imul(st,q)|0,c=Math.imul(st,ht),d=d+Math.imul(U,W)|0,o=o+Math.imul(U,ft)|0,o=o+Math.imul(nt,W)|0,c=c+Math.imul(nt,ft)|0,d=d+Math.imul($,H)|0,o=o+Math.imul($,ut)|0,o=o+Math.imul(it,H)|0,c=c+Math.imul(it,ut)|0,d=d+Math.imul(R,V)|0,o=o+Math.imul(R,ct)|0,o=o+Math.imul(rt,V)|0,c=c+Math.imul(rt,ct)|0,d=d+Math.imul(I,K)|0,o=o+Math.imul(I,dt)|0,o=o+Math.imul(tt,K)|0,c=c+Math.imul(tt,dt)|0,d=d+Math.imul(x,j)|0,o=o+Math.imul(x,pt)|0,o=o+Math.imul(N,j)|0,c=c+Math.imul(N,pt)|0,d=d+Math.imul(y,G)|0,o=o+Math.imul(y,vt)|0,o=o+Math.imul(M,G)|0,c=c+Math.imul(M,vt)|0;var de=(m+d|0)+((o&8191)<<13)|0;m=(c+(o>>>13)|0)+(de>>>26)|0,de&=67108863,d=Math.imul(O,q),o=Math.imul(O,ht),o=o+Math.imul(ot,q)|0,c=Math.imul(ot,ht),d=d+Math.imul(L,W)|0,o=o+Math.imul(L,ft)|0,o=o+Math.imul(st,W)|0,c=c+Math.imul(st,ft)|0,d=d+Math.imul(U,H)|0,o=o+Math.imul(U,ut)|0,o=o+Math.imul(nt,H)|0,c=c+Math.imul(nt,ut)|0,d=d+Math.imul($,V)|0,o=o+Math.imul($,ct)|0,o=o+Math.imul(it,V)|0,c=c+Math.imul(it,ct)|0,d=d+Math.imul(R,K)|0,o=o+Math.imul(R,dt)|0,o=o+Math.imul(rt,K)|0,c=c+Math.imul(rt,dt)|0,d=d+Math.imul(I,j)|0,o=o+Math.imul(I,pt)|0,o=o+Math.imul(tt,j)|0,c=c+Math.imul(tt,pt)|0,d=d+Math.imul(x,G)|0,o=o+Math.imul(x,vt)|0,o=o+Math.imul(N,G)|0,c=c+Math.imul(N,vt)|0,d=d+Math.imul(y,Z)|0,o=o+Math.imul(y,mt)|0,o=o+Math.imul(M,Z)|0,c=c+Math.imul(M,mt)|0;var pe=(m+d|0)+((o&8191)<<13)|0;m=(c+(o>>>13)|0)+(pe>>>26)|0,pe&=67108863,d=Math.imul(P,q),o=Math.imul(P,ht),o=o+Math.imul(at,q)|0,c=Math.imul(at,ht),d=d+Math.imul(O,W)|0,o=o+Math.imul(O,ft)|0,o=o+Math.imul(ot,W)|0,c=c+Math.imul(ot,ft)|0,d=d+Math.imul(L,H)|0,o=o+Math.imul(L,ut)|0,o=o+Math.imul(st,H)|0,c=c+Math.imul(st,ut)|0,d=d+Math.imul(U,V)|0,o=o+Math.imul(U,ct)|0,o=o+Math.imul(nt,V)|0,c=c+Math.imul(nt,ct)|0,d=d+Math.imul($,K)|0,o=o+Math.imul($,dt)|0,o=o+Math.imul(it,K)|0,c=c+Math.imul(it,dt)|0,d=d+Math.imul(R,j)|0,o=o+Math.imul(R,pt)|0,o=o+Math.imul(rt,j)|0,c=c+Math.imul(rt,pt)|0,d=d+Math.imul(I,G)|0,o=o+Math.imul(I,vt)|0,o=o+Math.imul(tt,G)|0,c=c+Math.imul(tt,vt)|0,d=d+Math.imul(x,Z)|0,o=o+Math.imul(x,mt)|0,o=o+Math.imul(N,Z)|0,c=c+Math.imul(N,mt)|0,d=d+Math.imul(y,z)|0,o=o+Math.imul(y,gt)|0,o=o+Math.imul(M,z)|0,c=c+Math.imul(M,gt)|0;var ve=(m+d|0)+((o&8191)<<13)|0;m=(c+(o>>>13)|0)+(ve>>>26)|0,ve&=67108863,d=Math.imul(k,q),o=Math.imul(k,ht),o=o+Math.imul(lt,q)|0,c=Math.imul(lt,ht),d=d+Math.imul(P,W)|0,o=o+Math.imul(P,ft)|0,o=o+Math.imul(at,W)|0,c=c+Math.imul(at,ft)|0,d=d+Math.imul(O,H)|0,o=o+Math.imul(O,ut)|0,o=o+Math.imul(ot,H)|0,c=c+Math.imul(ot,ut)|0,d=d+Math.imul(L,V)|0,o=o+Math.imul(L,ct)|0,o=o+Math.imul(st,V)|0,c=c+Math.imul(st,ct)|0,d=d+Math.imul(U,K)|0,o=o+Math.imul(U,dt)|0,o=o+Math.imul(nt,K)|0,c=c+Math.imul(nt,dt)|0,d=d+Math.imul($,j)|0,o=o+Math.imul($,pt)|0,o=o+Math.imul(it,j)|0,c=c+Math.imul(it,pt)|0,d=d+Math.imul(R,G)|0,o=o+Math.imul(R,vt)|0,o=o+Math.imul(rt,G)|0,c=c+Math.imul(rt,vt)|0,d=d+Math.imul(I,Z)|0,o=o+Math.imul(I,mt)|0,o=o+Math.imul(tt,Z)|0,c=c+Math.imul(tt,mt)|0,d=d+Math.imul(x,z)|0,o=o+Math.imul(x,gt)|0,o=o+Math.imul(N,z)|0,c=c+Math.imul(N,gt)|0,d=d+Math.imul(y,Y)|0,o=o+Math.imul(y,wt)|0,o=o+Math.imul(M,Y)|0,c=c+Math.imul(M,wt)|0;var me=(m+d|0)+((o&8191)<<13)|0;m=(c+(o>>>13)|0)+(me>>>26)|0,me&=67108863,d=Math.imul(k,W),o=Math.imul(k,ft),o=o+Math.imul(lt,W)|0,c=Math.imul(lt,ft),d=d+Math.imul(P,H)|0,o=o+Math.imul(P,ut)|0,o=o+Math.imul(at,H)|0,c=c+Math.imul(at,ut)|0,d=d+Math.imul(O,V)|0,o=o+Math.imul(O,ct)|0,o=o+Math.imul(ot,V)|0,c=c+Math.imul(ot,ct)|0,d=d+Math.imul(L,K)|0,o=o+Math.imul(L,dt)|0,o=o+Math.imul(st,K)|0,c=c+Math.imul(st,dt)|0,d=d+Math.imul(U,j)|0,o=o+Math.imul(U,pt)|0,o=o+Math.imul(nt,j)|0,c=c+Math.imul(nt,pt)|0,d=d+Math.imul($,G)|0,o=o+Math.imul($,vt)|0,o=o+Math.imul(it,G)|0,c=c+Math.imul(it,vt)|0,d=d+Math.imul(R,Z)|0,o=o+Math.imul(R,mt)|0,o=o+Math.imul(rt,Z)|0,c=c+Math.imul(rt,mt)|0,d=d+Math.imul(I,z)|0,o=o+Math.imul(I,gt)|0,o=o+Math.imul(tt,z)|0,c=c+Math.imul(tt,gt)|0,d=d+Math.imul(x,Y)|0,o=o+Math.imul(x,wt)|0,o=o+Math.imul(N,Y)|0,c=c+Math.imul(N,wt)|0;var ge=(m+d|0)+((o&8191)<<13)|0;m=(c+(o>>>13)|0)+(ge>>>26)|0,ge&=67108863,d=Math.imul(k,H),o=Math.imul(k,ut),o=o+Math.imul(lt,H)|0,c=Math.imul(lt,ut),d=d+Math.imul(P,V)|0,o=o+Math.imul(P,ct)|0,o=o+Math.imul(at,V)|0,c=c+Math.imul(at,ct)|0,d=d+Math.imul(O,K)|0,o=o+Math.imul(O,dt)|0,o=o+Math.imul(ot,K)|0,c=c+Math.imul(ot,dt)|0,d=d+Math.imul(L,j)|0,o=o+Math.imul(L,pt)|0,o=o+Math.imul(st,j)|0,c=c+Math.imul(st,pt)|0,d=d+Math.imul(U,G)|0,o=o+Math.imul(U,vt)|0,o=o+Math.imul(nt,G)|0,c=c+Math.imul(nt,vt)|0,d=d+Math.imul($,Z)|0,o=o+Math.imul($,mt)|0,o=o+Math.imul(it,Z)|0,c=c+Math.imul(it,mt)|0,d=d+Math.imul(R,z)|0,o=o+Math.imul(R,gt)|0,o=o+Math.imul(rt,z)|0,c=c+Math.imul(rt,gt)|0,d=d+Math.imul(I,Y)|0,o=o+Math.imul(I,wt)|0,o=o+Math.imul(tt,Y)|0,c=c+Math.imul(tt,wt)|0;var we=(m+d|0)+((o&8191)<<13)|0;m=(c+(o>>>13)|0)+(we>>>26)|0,we&=67108863,d=Math.imul(k,V),o=Math.imul(k,ct),o=o+Math.imul(lt,V)|0,c=Math.imul(lt,ct),d=d+Math.imul(P,K)|0,o=o+Math.imul(P,dt)|0,o=o+Math.imul(at,K)|0,c=c+Math.imul(at,dt)|0,d=d+Math.imul(O,j)|0,o=o+Math.imul(O,pt)|0,o=o+Math.imul(ot,j)|0,c=c+Math.imul(ot,pt)|0,d=d+Math.imul(L,G)|0,o=o+Math.imul(L,vt)|0,o=o+Math.imul(st,G)|0,c=c+Math.imul(st,vt)|0,d=d+Math.imul(U,Z)|0,o=o+Math.imul(U,mt)|0,o=o+Math.imul(nt,Z)|0,c=c+Math.imul(nt,mt)|0,d=d+Math.imul($,z)|0,o=o+Math.imul($,gt)|0,o=o+Math.imul(it,z)|0,c=c+Math.imul(it,gt)|0,d=d+Math.imul(R,Y)|0,o=o+Math.imul(R,wt)|0,o=o+Math.imul(rt,Y)|0,c=c+Math.imul(rt,wt)|0;var ye=(m+d|0)+((o&8191)<<13)|0;m=(c+(o>>>13)|0)+(ye>>>26)|0,ye&=67108863,d=Math.imul(k,K),o=Math.imul(k,dt),o=o+Math.imul(lt,K)|0,c=Math.imul(lt,dt),d=d+Math.imul(P,j)|0,o=o+Math.imul(P,pt)|0,o=o+Math.imul(at,j)|0,c=c+Math.imul(at,pt)|0,d=d+Math.imul(O,G)|0,o=o+Math.imul(O,vt)|0,o=o+Math.imul(ot,G)|0,c=c+Math.imul(ot,vt)|0,d=d+Math.imul(L,Z)|0,o=o+Math.imul(L,mt)|0,o=o+Math.imul(st,Z)|0,c=c+Math.imul(st,mt)|0,d=d+Math.imul(U,z)|0,o=o+Math.imul(U,gt)|0,o=o+Math.imul(nt,z)|0,c=c+Math.imul(nt,gt)|0,d=d+Math.imul($,Y)|0,o=o+Math.imul($,wt)|0,o=o+Math.imul(it,Y)|0,c=c+Math.imul(it,wt)|0;var be=(m+d|0)+((o&8191)<<13)|0;m=(c+(o>>>13)|0)+(be>>>26)|0,be&=67108863,d=Math.imul(k,j),o=Math.imul(k,pt),o=o+Math.imul(lt,j)|0,c=Math.imul(lt,pt),d=d+Math.imul(P,G)|0,o=o+Math.imul(P,vt)|0,o=o+Math.imul(at,G)|0,c=c+Math.imul(at,vt)|0,d=d+Math.imul(O,Z)|0,o=o+Math.imul(O,mt)|0,o=o+Math.imul(ot,Z)|0,c=c+Math.imul(ot,mt)|0,d=d+Math.imul(L,z)|0,o=o+Math.imul(L,gt)|0,o=o+Math.imul(st,z)|0,c=c+Math.imul(st,gt)|0,d=d+Math.imul(U,Y)|0,o=o+Math.imul(U,wt)|0,o=o+Math.imul(nt,Y)|0,c=c+Math.imul(nt,wt)|0;var Ce=(m+d|0)+((o&8191)<<13)|0;m=(c+(o>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,d=Math.imul(k,G),o=Math.imul(k,vt),o=o+Math.imul(lt,G)|0,c=Math.imul(lt,vt),d=d+Math.imul(P,Z)|0,o=o+Math.imul(P,mt)|0,o=o+Math.imul(at,Z)|0,c=c+Math.imul(at,mt)|0,d=d+Math.imul(O,z)|0,o=o+Math.imul(O,gt)|0,o=o+Math.imul(ot,z)|0,c=c+Math.imul(ot,gt)|0,d=d+Math.imul(L,Y)|0,o=o+Math.imul(L,wt)|0,o=o+Math.imul(st,Y)|0,c=c+Math.imul(st,wt)|0;var Ee=(m+d|0)+((o&8191)<<13)|0;m=(c+(o>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,d=Math.imul(k,Z),o=Math.imul(k,mt),o=o+Math.imul(lt,Z)|0,c=Math.imul(lt,mt),d=d+Math.imul(P,z)|0,o=o+Math.imul(P,gt)|0,o=o+Math.imul(at,z)|0,c=c+Math.imul(at,gt)|0,d=d+Math.imul(O,Y)|0,o=o+Math.imul(O,wt)|0,o=o+Math.imul(ot,Y)|0,c=c+Math.imul(ot,wt)|0;var Ae=(m+d|0)+((o&8191)<<13)|0;m=(c+(o>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,d=Math.imul(k,z),o=Math.imul(k,gt),o=o+Math.imul(lt,z)|0,c=Math.imul(lt,gt),d=d+Math.imul(P,Y)|0,o=o+Math.imul(P,wt)|0,o=o+Math.imul(at,Y)|0,c=c+Math.imul(at,wt)|0;var Me=(m+d|0)+((o&8191)<<13)|0;m=(c+(o>>>13)|0)+(Me>>>26)|0,Me&=67108863,d=Math.imul(k,Y),o=Math.imul(k,wt),o=o+Math.imul(lt,Y)|0,c=Math.imul(lt,wt);var Be=(m+d|0)+((o&8191)<<13)|0;return m=(c+(o>>>13)|0)+(Be>>>26)|0,Be&=67108863,p[0]=xt,p[1]=St,p[2]=he,p[3]=fe,p[4]=ue,p[5]=ce,p[6]=de,p[7]=pe,p[8]=ve,p[9]=me,p[10]=ge,p[11]=we,p[12]=ye,p[13]=be,p[14]=Ce,p[15]=Ee,p[16]=Ae,p[17]=Me,p[18]=Be,m!==0&&(p[19]=m,n.length++),n};Math.imul||(bt=_);function T(g,s,l){l.negative=s.negative^g.negative,l.length=g.length+s.length;for(var n=0,h=0,u=0;u<l.length-1;u++){var p=h;h=0;for(var m=n&67108863,d=Math.min(u,s.length-1),o=Math.max(0,u-g.length+1);o<=d;o++){var c=u-o,v=g.words[c]|0,y=s.words[o]|0,M=v*y,B=M&67108863;p=p+(M/67108864|0)|0,B=B+m|0,m=B&67108863,p=p+(B>>>26)|0,h+=p>>>26,p&=67108863}l.words[u]=m,n=p,p=h}return n!==0?l.words[u]=n:l.length--,l.strip()}function Q(g,s,l){var n=new et;return n.mulp(g,s,l)}a.prototype.mulTo=function(s,l){var n,h=this.length+s.length;return this.length===10&&s.length===10?n=bt(this,s,l):h<63?n=_(this,s,l):h<1024?n=T(this,s,l):n=Q(this,s,l),n};function et(g,s){this.x=g,this.y=s}et.prototype.makeRBT=function(s){for(var l=new Array(s),n=a.prototype._countBits(s)-1,h=0;h<s;h++)l[h]=this.revBin(h,n,s);return l},et.prototype.revBin=function(s,l,n){if(s===0||s===n-1)return s;for(var h=0,u=0;u<l;u++)h|=(s&1)<<l-u-1,s>>=1;return h},et.prototype.permute=function(s,l,n,h,u,p){for(var m=0;m<p;m++)h[m]=l[s[m]],u[m]=n[s[m]]},et.prototype.transform=function(s,l,n,h,u,p){this.permute(p,s,l,n,h,u);for(var m=1;m<u;m<<=1)for(var d=m<<1,o=Math.cos(2*Math.PI/d),c=Math.sin(2*Math.PI/d),v=0;v<u;v+=d)for(var y=o,M=c,B=0;B<m;B++){var x=n[v+B],N=h[v+B],yt=n[v+B+m],I=h[v+B+m],tt=y*yt-M*I;I=y*I+M*yt,yt=tt,n[v+B]=x+yt,h[v+B]=N+I,n[v+B+m]=x-yt,h[v+B+m]=N-I,B!==d&&(tt=o*y-c*M,M=o*M+c*y,y=tt)}},et.prototype.guessLen13b=function(s,l){var n=Math.max(l,s)|1,h=n&1,u=0;for(n=n/2|0;n;n=n>>>1)u++;return 1<<u+1+h},et.prototype.conjugate=function(s,l,n){if(!(n<=1))for(var h=0;h<n/2;h++){var u=s[h];s[h]=s[n-h-1],s[n-h-1]=u,u=l[h],l[h]=-l[n-h-1],l[n-h-1]=-u}},et.prototype.normalize13b=function(s,l){for(var n=0,h=0;h<l/2;h++){var u=Math.round(s[2*h+1]/l)*8192+Math.round(s[2*h]/l)+n;s[h]=u&67108863,u<67108864?n=0:n=u/67108864|0}return s},et.prototype.convert13b=function(s,l,n,h){for(var u=0,p=0;p<l;p++)u=u+(s[p]|0),n[2*p]=u&8191,u=u>>>13,n[2*p+1]=u&8191,u=u>>>13;for(p=2*l;p<h;++p)n[p]=0;i(u===0),i((u&-8192)===0)},et.prototype.stub=function(s){for(var l=new Array(s),n=0;n<s;n++)l[n]=0;return l},et.prototype.mulp=function(s,l,n){var h=2*this.guessLen13b(s.length,l.length),u=this.makeRBT(h),p=this.stub(h),m=new Array(h),d=new Array(h),o=new Array(h),c=new Array(h),v=new Array(h),y=new Array(h),M=n.words;M.length=h,this.convert13b(s.words,s.length,m,h),this.convert13b(l.words,l.length,c,h),this.transform(m,p,d,o,h,u),this.transform(c,p,v,y,h,u);for(var B=0;B<h;B++){var x=d[B]*v[B]-o[B]*y[B];o[B]=d[B]*y[B]+o[B]*v[B],d[B]=x}return this.conjugate(d,o,h),this.transform(d,o,M,p,h,u),this.conjugate(M,p,h),this.normalize13b(M,h),n.negative=s.negative^l.negative,n.length=s.length+l.length,n.strip()},a.prototype.mul=function(s){var l=new a(null);return l.words=new Array(this.length+s.length),this.mulTo(s,l)},a.prototype.mulf=function(s){var l=new a(null);return l.words=new Array(this.length+s.length),Q(this,s,l)},a.prototype.imul=function(s){return this.clone().mulTo(s,this)},a.prototype.imuln=function(s){i(typeof s=="number"),i(s<67108864);for(var l=0,n=0;n<this.length;n++){var h=(this.words[n]|0)*s,u=(h&67108863)+(l&67108863);l>>=26,l+=h/67108864|0,l+=u>>>26,this.words[n]=u&67108863}return l!==0&&(this.words[n]=l,this.length++),this},a.prototype.muln=function(s){return this.clone().imuln(s)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(s){var l=S(s);if(l.length===0)return new a(1);for(var n=this,h=0;h<l.length&&l[h]===0;h++,n=n.sqr());if(++h<l.length)for(var u=n.sqr();h<l.length;h++,u=u.sqr())l[h]!==0&&(n=n.mul(u));return n},a.prototype.iushln=function(s){i(typeof s=="number"&&s>=0);var l=s%26,n=(s-l)/26,h=67108863>>>26-l<<26-l,u;if(l!==0){var p=0;for(u=0;u<this.length;u++){var m=this.words[u]&h,d=(this.words[u]|0)-m<<l;this.words[u]=d|p,p=m>>>26-l}p&&(this.words[u]=p,this.length++)}if(n!==0){for(u=this.length-1;u>=0;u--)this.words[u+n]=this.words[u];for(u=0;u<n;u++)this.words[u]=0;this.length+=n}return this.strip()},a.prototype.ishln=function(s){return i(this.negative===0),this.iushln(s)},a.prototype.iushrn=function(s,l,n){i(typeof s=="number"&&s>=0);var h;l?h=(l-l%26)/26:h=0;var u=s%26,p=Math.min((s-u)/26,this.length),m=67108863^67108863>>>u<<u,d=n;if(h-=p,h=Math.max(0,h),d){for(var o=0;o<p;o++)d.words[o]=this.words[o];d.length=p}if(p!==0)if(this.length>p)for(this.length-=p,o=0;o<this.length;o++)this.words[o]=this.words[o+p];else this.words[0]=0,this.length=1;var c=0;for(o=this.length-1;o>=0&&(c!==0||o>=h);o--){var v=this.words[o]|0;this.words[o]=c<<26-u|v>>>u,c=v&m}return d&&c!==0&&(d.words[d.length++]=c),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},a.prototype.ishrn=function(s,l,n){return i(this.negative===0),this.iushrn(s,l,n)},a.prototype.shln=function(s){return this.clone().ishln(s)},a.prototype.ushln=function(s){return this.clone().iushln(s)},a.prototype.shrn=function(s){return this.clone().ishrn(s)},a.prototype.ushrn=function(s){return this.clone().iushrn(s)},a.prototype.testn=function(s){i(typeof s=="number"&&s>=0);var l=s%26,n=(s-l)/26,h=1<<l;if(this.length<=n)return!1;var u=this.words[n];return!!(u&h)},a.prototype.imaskn=function(s){i(typeof s=="number"&&s>=0);var l=s%26,n=(s-l)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=n)return this;if(l!==0&&n++,this.length=Math.min(n,this.length),l!==0){var h=67108863^67108863>>>l<<l;this.words[this.length-1]&=h}return this.strip()},a.prototype.maskn=function(s){return this.clone().imaskn(s)},a.prototype.iaddn=function(s){return i(typeof s=="number"),i(s<67108864),s<0?this.isubn(-s):this.negative!==0?this.length===1&&(this.words[0]|0)<s?(this.words[0]=s-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(s),this.negative=1,this):this._iaddn(s)},a.prototype._iaddn=function(s){this.words[0]+=s;for(var l=0;l<this.length&&this.words[l]>=67108864;l++)this.words[l]-=67108864,l===this.length-1?this.words[l+1]=1:this.words[l+1]++;return this.length=Math.max(this.length,l+1),this},a.prototype.isubn=function(s){if(i(typeof s=="number"),i(s<67108864),s<0)return this.iaddn(-s);if(this.negative!==0)return this.negative=0,this.iaddn(s),this.negative=1,this;if(this.words[0]-=s,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var l=0;l<this.length&&this.words[l]<0;l++)this.words[l]+=67108864,this.words[l+1]-=1;return this.strip()},a.prototype.addn=function(s){return this.clone().iaddn(s)},a.prototype.subn=function(s){return this.clone().isubn(s)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(s,l,n){var h=s.length+n,u;this._expand(h);var p,m=0;for(u=0;u<s.length;u++){p=(this.words[u+n]|0)+m;var d=(s.words[u]|0)*l;p-=d&67108863,m=(p>>26)-(d/67108864|0),this.words[u+n]=p&67108863}for(;u<this.length-n;u++)p=(this.words[u+n]|0)+m,m=p>>26,this.words[u+n]=p&67108863;if(m===0)return this.strip();for(i(m===-1),m=0,u=0;u<this.length;u++)p=-(this.words[u]|0)+m,m=p>>26,this.words[u]=p&67108863;return this.negative=1,this.strip()},a.prototype._wordDiv=function(s,l){var n=this.length-s.length,h=this.clone(),u=s,p=u.words[u.length-1]|0,m=this._countBits(p);n=26-m,n!==0&&(u=u.ushln(n),h.iushln(n),p=u.words[u.length-1]|0);var d=h.length-u.length,o;if(l!=="mod"){o=new a(null),o.length=d+1,o.words=new Array(o.length);for(var c=0;c<o.length;c++)o.words[c]=0}var v=h.clone()._ishlnsubmul(u,1,d);v.negative===0&&(h=v,o&&(o.words[d]=1));for(var y=d-1;y>=0;y--){var M=(h.words[u.length+y]|0)*67108864+(h.words[u.length+y-1]|0);for(M=Math.min(M/p|0,67108863),h._ishlnsubmul(u,M,y);h.negative!==0;)M--,h.negative=0,h._ishlnsubmul(u,1,y),h.isZero()||(h.negative^=1);o&&(o.words[y]=M)}return o&&o.strip(),h.strip(),l!=="div"&&n!==0&&h.iushrn(n),{div:o||null,mod:h}},a.prototype.divmod=function(s,l,n){if(i(!s.isZero()),this.isZero())return{div:new a(0),mod:new a(0)};var h,u,p;return this.negative!==0&&s.negative===0?(p=this.neg().divmod(s,l),l!=="mod"&&(h=p.div.neg()),l!=="div"&&(u=p.mod.neg(),n&&u.negative!==0&&u.iadd(s)),{div:h,mod:u}):this.negative===0&&s.negative!==0?(p=this.divmod(s.neg(),l),l!=="mod"&&(h=p.div.neg()),{div:h,mod:p.mod}):this.negative&s.negative?(p=this.neg().divmod(s.neg(),l),l!=="div"&&(u=p.mod.neg(),n&&u.negative!==0&&u.isub(s)),{div:p.div,mod:u}):s.length>this.length||this.cmp(s)<0?{div:new a(0),mod:this}:s.length===1?l==="div"?{div:this.divn(s.words[0]),mod:null}:l==="mod"?{div:null,mod:new a(this.modn(s.words[0]))}:{div:this.divn(s.words[0]),mod:new a(this.modn(s.words[0]))}:this._wordDiv(s,l)},a.prototype.div=function(s){return this.divmod(s,"div",!1).div},a.prototype.mod=function(s){return this.divmod(s,"mod",!1).mod},a.prototype.umod=function(s){return this.divmod(s,"mod",!0).mod},a.prototype.divRound=function(s){var l=this.divmod(s);if(l.mod.isZero())return l.div;var n=l.div.negative!==0?l.mod.isub(s):l.mod,h=s.ushrn(1),u=s.andln(1),p=n.cmp(h);return p<0||u===1&&p===0?l.div:l.div.negative!==0?l.div.isubn(1):l.div.iaddn(1)},a.prototype.modn=function(s){i(s<=67108863);for(var l=(1<<26)%s,n=0,h=this.length-1;h>=0;h--)n=(l*n+(this.words[h]|0))%s;return n},a.prototype.idivn=function(s){i(s<=67108863);for(var l=0,n=this.length-1;n>=0;n--){var h=(this.words[n]|0)+l*67108864;this.words[n]=h/s|0,l=h%s}return this.strip()},a.prototype.divn=function(s){return this.clone().idivn(s)},a.prototype.egcd=function(s){i(s.negative===0),i(!s.isZero());var l=this,n=s.clone();l.negative!==0?l=l.umod(s):l=l.clone();for(var h=new a(1),u=new a(0),p=new a(0),m=new a(1),d=0;l.isEven()&&n.isEven();)l.iushrn(1),n.iushrn(1),++d;for(var o=n.clone(),c=l.clone();!l.isZero();){for(var v=0,y=1;!(l.words[0]&y)&&v<26;++v,y<<=1);if(v>0)for(l.iushrn(v);v-- >0;)(h.isOdd()||u.isOdd())&&(h.iadd(o),u.isub(c)),h.iushrn(1),u.iushrn(1);for(var M=0,B=1;!(n.words[0]&B)&&M<26;++M,B<<=1);if(M>0)for(n.iushrn(M);M-- >0;)(p.isOdd()||m.isOdd())&&(p.iadd(o),m.isub(c)),p.iushrn(1),m.iushrn(1);l.cmp(n)>=0?(l.isub(n),h.isub(p),u.isub(m)):(n.isub(l),p.isub(h),m.isub(u))}return{a:p,b:m,gcd:n.iushln(d)}},a.prototype._invmp=function(s){i(s.negative===0),i(!s.isZero());var l=this,n=s.clone();l.negative!==0?l=l.umod(s):l=l.clone();for(var h=new a(1),u=new a(0),p=n.clone();l.cmpn(1)>0&&n.cmpn(1)>0;){for(var m=0,d=1;!(l.words[0]&d)&&m<26;++m,d<<=1);if(m>0)for(l.iushrn(m);m-- >0;)h.isOdd()&&h.iadd(p),h.iushrn(1);for(var o=0,c=1;!(n.words[0]&c)&&o<26;++o,c<<=1);if(o>0)for(n.iushrn(o);o-- >0;)u.isOdd()&&u.iadd(p),u.iushrn(1);l.cmp(n)>=0?(l.isub(n),h.isub(u)):(n.isub(l),u.isub(h))}var v;return l.cmpn(1)===0?v=h:v=u,v.cmpn(0)<0&&v.iadd(s),v},a.prototype.gcd=function(s){if(this.isZero())return s.abs();if(s.isZero())return this.abs();var l=this.clone(),n=s.clone();l.negative=0,n.negative=0;for(var h=0;l.isEven()&&n.isEven();h++)l.iushrn(1),n.iushrn(1);do{for(;l.isEven();)l.iushrn(1);for(;n.isEven();)n.iushrn(1);var u=l.cmp(n);if(u<0){var p=l;l=n,n=p}else if(u===0||n.cmpn(1)===0)break;l.isub(n)}while(!0);return n.iushln(h)},a.prototype.invm=function(s){return this.egcd(s).a.umod(s)},a.prototype.isEven=function(){return(this.words[0]&1)===0},a.prototype.isOdd=function(){return(this.words[0]&1)===1},a.prototype.andln=function(s){return this.words[0]&s},a.prototype.bincn=function(s){i(typeof s=="number");var l=s%26,n=(s-l)/26,h=1<<l;if(this.length<=n)return this._expand(n+1),this.words[n]|=h,this;for(var u=h,p=n;u!==0&&p<this.length;p++){var m=this.words[p]|0;m+=u,u=m>>>26,m&=67108863,this.words[p]=m}return u!==0&&(this.words[p]=u,this.length++),this},a.prototype.isZero=function(){return this.length===1&&this.words[0]===0},a.prototype.cmpn=function(s){var l=s<0;if(this.negative!==0&&!l)return-1;if(this.negative===0&&l)return 1;this.strip();var n;if(this.length>1)n=1;else{l&&(s=-s),i(s<=67108863,"Number is too big");var h=this.words[0]|0;n=h===s?0:h<s?-1:1}return this.negative!==0?-n|0:n},a.prototype.cmp=function(s){if(this.negative!==0&&s.negative===0)return-1;if(this.negative===0&&s.negative!==0)return 1;var l=this.ucmp(s);return this.negative!==0?-l|0:l},a.prototype.ucmp=function(s){if(this.length>s.length)return 1;if(this.length<s.length)return-1;for(var l=0,n=this.length-1;n>=0;n--){var h=this.words[n]|0,u=s.words[n]|0;if(h!==u){h<u?l=-1:h>u&&(l=1);break}}return l},a.prototype.gtn=function(s){return this.cmpn(s)===1},a.prototype.gt=function(s){return this.cmp(s)===1},a.prototype.gten=function(s){return this.cmpn(s)>=0},a.prototype.gte=function(s){return this.cmp(s)>=0},a.prototype.ltn=function(s){return this.cmpn(s)===-1},a.prototype.lt=function(s){return this.cmp(s)===-1},a.prototype.lten=function(s){return this.cmpn(s)<=0},a.prototype.lte=function(s){return this.cmp(s)<=0},a.prototype.eqn=function(s){return this.cmpn(s)===0},a.prototype.eq=function(s){return this.cmp(s)===0},a.red=function(s){return new J(s)},a.prototype.toRed=function(s){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),s.convertTo(this)._forceRed(s)},a.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(s){return this.red=s,this},a.prototype.forceRed=function(s){return i(!this.red,"Already a number in reduction context"),this._forceRed(s)},a.prototype.redAdd=function(s){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,s)},a.prototype.redIAdd=function(s){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,s)},a.prototype.redSub=function(s){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,s)},a.prototype.redISub=function(s){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,s)},a.prototype.redShl=function(s){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,s)},a.prototype.redMul=function(s){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.mul(this,s)},a.prototype.redIMul=function(s){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.imul(this,s)},a.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(s){return i(this.red&&!s.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,s)};var Mt={k256:null,p224:null,p192:null,p25519:null};function X(g,s){this.name=g,this.p=new a(s,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}X.prototype._tmp=function(){var s=new a(null);return s.words=new Array(Math.ceil(this.n/13)),s},X.prototype.ireduce=function(s){var l=s,n;do this.split(l,this.tmp),l=this.imulK(l),l=l.iadd(this.tmp),n=l.bitLength();while(n>this.n);var h=n<this.n?-1:l.ucmp(this.p);return h===0?(l.words[0]=0,l.length=1):h>0?l.isub(this.p):l.strip(),l},X.prototype.split=function(s,l){s.iushrn(this.n,0,l)},X.prototype.imulK=function(s){return s.imul(this.k)};function At(){X.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}f(At,X),At.prototype.split=function(s,l){for(var n=4194303,h=Math.min(s.length,9),u=0;u<h;u++)l.words[u]=s.words[u];if(l.length=h,s.length<=9){s.words[0]=0,s.length=1;return}var p=s.words[9];for(l.words[l.length++]=p&n,u=10;u<s.length;u++){var m=s.words[u]|0;s.words[u-10]=(m&n)<<4|p>>>22,p=m}p>>>=22,s.words[u-10]=p,p===0&&s.length>10?s.length-=10:s.length-=9},At.prototype.imulK=function(s){s.words[s.length]=0,s.words[s.length+1]=0,s.length+=2;for(var l=0,n=0;n<s.length;n++){var h=s.words[n]|0;l+=h*977,s.words[n]=l&67108863,l=h*64+(l/67108864|0)}return s.words[s.length-1]===0&&(s.length--,s.words[s.length-1]===0&&s.length--),s};function _t(){X.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}f(_t,X);function Xt(){X.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}f(Xt,X);function Zt(){X.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}f(Zt,X),Zt.prototype.imulK=function(s){for(var l=0,n=0;n<s.length;n++){var h=(s.words[n]|0)*19+l,u=h&67108863;h>>>=26,s.words[n]=u,l=h}return l!==0&&(s.words[s.length++]=l),s},a._prime=function(s){if(Mt[s])return Mt[s];var l;if(s==="k256")l=new At;else if(s==="p224")l=new _t;else if(s==="p192")l=new Xt;else if(s==="p25519")l=new Zt;else throw new Error("Unknown prime "+s);return Mt[s]=l,l};function J(g){if(typeof g=="string"){var s=a._prime(g);this.m=s.p,this.prime=s}else i(g.gtn(1),"modulus must be greater than 1"),this.m=g,this.prime=null}J.prototype._verify1=function(s){i(s.negative===0,"red works only with positives"),i(s.red,"red works only with red numbers")},J.prototype._verify2=function(s,l){i((s.negative|l.negative)===0,"red works only with positives"),i(s.red&&s.red===l.red,"red works only with red numbers")},J.prototype.imod=function(s){return this.prime?this.prime.ireduce(s)._forceRed(this):s.umod(this.m)._forceRed(this)},J.prototype.neg=function(s){return s.isZero()?s.clone():this.m.sub(s)._forceRed(this)},J.prototype.add=function(s,l){this._verify2(s,l);var n=s.add(l);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},J.prototype.iadd=function(s,l){this._verify2(s,l);var n=s.iadd(l);return n.cmp(this.m)>=0&&n.isub(this.m),n},J.prototype.sub=function(s,l){this._verify2(s,l);var n=s.sub(l);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},J.prototype.isub=function(s,l){this._verify2(s,l);var n=s.isub(l);return n.cmpn(0)<0&&n.iadd(this.m),n},J.prototype.shl=function(s,l){return this._verify1(s),this.imod(s.ushln(l))},J.prototype.imul=function(s,l){return this._verify2(s,l),this.imod(s.imul(l))},J.prototype.mul=function(s,l){return this._verify2(s,l),this.imod(s.mul(l))},J.prototype.isqr=function(s){return this.imul(s,s.clone())},J.prototype.sqr=function(s){return this.mul(s,s)},J.prototype.sqrt=function(s){if(s.isZero())return s.clone();var l=this.m.andln(3);if(i(l%2===1),l===3){var n=this.m.add(new a(1)).iushrn(2);return this.pow(s,n)}for(var h=this.m.subn(1),u=0;!h.isZero()&&h.andln(1)===0;)u++,h.iushrn(1);i(!h.isZero());var p=new a(1).toRed(this),m=p.redNeg(),d=this.m.subn(1).iushrn(1),o=this.m.bitLength();for(o=new a(2*o*o).toRed(this);this.pow(o,d).cmp(m)!==0;)o.redIAdd(m);for(var c=this.pow(o,h),v=this.pow(s,h.addn(1).iushrn(1)),y=this.pow(s,h),M=u;y.cmp(p)!==0;){for(var B=y,x=0;B.cmp(p)!==0;x++)B=B.redSqr();i(x<M);var N=this.pow(c,new a(1).iushln(M-x-1));v=v.redMul(N),c=N.redSqr(),y=y.redMul(c),M=x}return v},J.prototype.invm=function(s){var l=s._invmp(this.m);return l.negative!==0?(l.negative=0,this.imod(l).redNeg()):this.imod(l)},J.prototype.pow=function(s,l){if(l.isZero())return new a(1);if(l.cmpn(1)===0)return s.clone();var n=4,h=new Array(1<<n);h[0]=new a(1).toRed(this),h[1]=s;for(var u=2;u<h.length;u++)h[u]=this.mul(h[u-1],s);var p=h[0],m=0,d=0,o=l.bitLength()%26;for(o===0&&(o=26),u=l.length-1;u>=0;u--){for(var c=l.words[u],v=o-1;v>=0;v--){var y=c>>v&1;if(p!==h[0]&&(p=this.sqr(p)),y===0&&m===0){d=0;continue}m<<=1,m|=y,d++,!(d!==n&&(u!==0||v!==0))&&(p=this.mul(p,h[m]),d=0,m=0)}o=26}return p},J.prototype.convertTo=function(s){var l=s.umod(this.m);return l===s?l.clone():l},J.prototype.convertFrom=function(s){var l=s.clone();return l.red=null,l},a.mont=function(s){return new zt(s)};function zt(g){J.call(this,g),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}f(zt,J),zt.prototype.convertTo=function(s){return this.imod(s.ushln(this.shift))},zt.prototype.convertFrom=function(s){var l=this.imod(s.mul(this.rinv));return l.red=null,l},zt.prototype.imul=function(s,l){if(s.isZero()||l.isZero())return s.words[0]=0,s.length=1,s;var n=s.imul(l),h=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),u=n.isub(h).iushrn(this.shift),p=u;return u.cmp(this.m)>=0?p=u.isub(this.m):u.cmpn(0)<0&&(p=u.iadd(this.m)),p._forceRed(this)},zt.prototype.mul=function(s,l){if(s.isZero()||l.isZero())return new a(0)._forceRed(this);var n=s.mul(l),h=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),u=n.isub(h).iushrn(this.shift),p=u;return u.cmp(this.m)>=0?p=u.isub(this.m):u.cmpn(0)<0&&(p=u.iadd(this.m)),p._forceRed(this)},zt.prototype.invm=function(s){var l=this.imod(s._invmp(this.m).mul(this.r2));return l._forceRed(this)}})(r,wn)})(En);var Sl=En.exports,Dl=function(t){if(typeof t!="string")throw new Error("[is-hex-prefixed] value must be type 'string', is currently type "+typeof t+", while checking isHexPrefixed.");return t.slice(0,2)==="0x"},_l=Dl,Il=function(t){return typeof t!="string"?t:_l(t)?t.slice(2):t},fr=Sl,hs=Il,Tl=function(t){if(typeof t=="string"||typeof t=="number"){var e=new fr(1),i=String(t).toLowerCase().trim(),f=i.substr(0,2)==="0x"||i.substr(0,3)==="-0x",a=hs(i);if(a.substr(0,1)==="-"&&(a=hs(a.slice(1)),e=new fr(-1,10)),a=a===""?"0":a,!a.match(/^-?[0-9]+$/)&&a.match(/^[0-9A-Fa-f]+$/)||a.match(/^[a-fA-F]+$/)||f===!0&&a.match(/^[0-9A-Fa-f]+$/))return new fr(a,16).mul(e);if((a.match(/^-?[0-9]+$/)||a==="")&&f===!1)return new fr(a,10).mul(e)}else if(typeof t=="object"&&t.toString&&!t.pop&&!t.push&&t.toString(10).match(/^-?[0-9]+$/)&&(t.mul||t.dividedToIntegerBy))return new fr(t.toString(10),10);throw new Error("[number-to-bn] while converting number "+JSON.stringify(t)+" to BN.js instance, error: invalid number value. Value must be an integer, hex string, BN or BigNumber instance. Note, decimals are not supported.")},er=xl,Nl=Tl,Rl=new er(0),Eo=new er(-1),Cr={noether:"0",wei:"1",kwei:"1000",Kwei:"1000",babbage:"1000",femtoether:"1000",mwei:"1000000",Mwei:"1000000",lovelace:"1000000",picoether:"1000000",gwei:"1000000000",Gwei:"1000000000",shannon:"1000000000",nanoether:"1000000000",nano:"1000000000",szabo:"1000000000000",microether:"1000000000000",micro:"1000000000000",finney:"1000000000000000",milliether:"1000000000000000",milli:"1000000000000000",ether:"1000000000000000000",kether:"1000000000000000000000",grand:"1000000000000000000000",mether:"1000000000000000000000000",gether:"1000000000000000000000000000",tether:"1000000000000000000000000000000"};function An(r){var t=r?r.toLowerCase():"ether",e=Cr[t];if(typeof e!="string")throw new Error("[ethjs-unit] the unit provided "+r+" doesn't exists, please use the one of the following units "+JSON.stringify(Cr,null,2));return new er(e,10)}function Ao(r){if(typeof r=="string"){if(!r.match(/^-?[0-9.]+$/))throw new Error("while converting number to string, invalid number value '"+r+"', should be a number matching (^-?[0-9.]+).");return r}else{if(typeof r=="number")return String(r);if(typeof r=="object"&&r.toString&&(r.toTwos||r.dividedToIntegerBy))return r.toPrecision?String(r.toPrecision()):r.toString(10)}throw new Error("while converting number to string, invalid number value '"+r+"' type "+typeof r+".")}function $l(r,t,e){var i=Nl(r),f=i.lt(Rl),a=An(t),w=Cr[t].length-1||1,C=e||{};f&&(i=i.mul(Eo));for(var b=i.mod(a).toString(10);b.length<w;)b="0"+b;C.pad||(b=b.match(/^([0-9]*[1-9]|0)(0*)/)[1]);var A=i.div(a).toString(10);C.commify&&(A=A.replace(/\B(?=(\d{3})+(?!\d))/g,","));var E=""+A+(b=="0"?"":"."+b);return f&&(E="-"+E),E}function Ul(r,t){var e=Ao(r),i=An(t),f=Cr[t].length-1||1,a=e.substring(0,1)==="-";if(a&&(e=e.substring(1)),e===".")throw new Error("[ethjs-unit] while converting number "+r+" to wei, invalid value");var w=e.split(".");if(w.length>2)throw new Error("[ethjs-unit] while converting number "+r+" to wei,  too many decimal points");var C=w[0],b=w[1];if(C||(C="0"),b||(b="0"),b.length>f)throw new Error("[ethjs-unit] while converting number "+r+" to wei, too many decimal places");for(;b.length<f;)b+="0";C=new er(C),b=new er(b);var A=C.mul(i).add(b);return a&&(A=A.mul(Eo)),new er(A.toString(10),10)}var Ll={unitMap:Cr,numberToString:Ao,getValueOfUnit:An,fromWei:$l,toWei:Ul};/**
 * @file Web Cryptography API shim
 * @author Artem S Vybornov <vybornov@gmail.com>
 * @license MIT
 */(function(r,t){typeof define=="function"&&define.amd?define([],function(){return t(r)}):typeof module=="object"&&module.exports?module.exports=t(r):t(r)})(typeof self<"u"?self:void 0,function(r){if(typeof Promise!="function")throw"Promise support required";var t=r.crypto||r.msCrypto;if(!t)return;var e=t.subtle||t.webkitSubtle;if(!e)return;var i=r.Crypto||t.constructor||Object,f=r.SubtleCrypto||e.constructor||Object;r.CryptoKey||r.Key;var a=r.navigator.userAgent.indexOf("Edge/")>-1,w=!!r.msCrypto&&!a,C=!t.subtle&&!!t.webkitSubtle;if(!w&&!C)return;function b(g){return btoa(g).replace(/\=+$/,"").replace(/\+/g,"-").replace(/\//g,"_")}function A(g){return g+="===",g=g.slice(0,-g.length%4),atob(g.replace(/-/g,"+").replace(/_/g,"/"))}function E(g){for(var s=new Uint8Array(g.length),l=0;l<g.length;l++)s[l]=g.charCodeAt(l);return s}function F(g){return g instanceof ArrayBuffer&&(g=new Uint8Array(g)),String.fromCharCode.apply(String,g)}function S(g){var s={name:(g.name||g||"").toUpperCase().replace("V","v")};switch(s.name){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":break;case"AES-CBC":case"AES-GCM":case"AES-KW":g.length&&(s.length=g.length);break;case"HMAC":g.hash&&(s.hash=S(g.hash)),g.length&&(s.length=g.length);break;case"RSAES-PKCS1-v1_5":g.publicExponent&&(s.publicExponent=new Uint8Array(g.publicExponent)),g.modulusLength&&(s.modulusLength=g.modulusLength);break;case"RSASSA-PKCS1-v1_5":case"RSA-OAEP":g.hash&&(s.hash=S(g.hash)),g.publicExponent&&(s.publicExponent=new Uint8Array(g.publicExponent)),g.modulusLength&&(s.modulusLength=g.modulusLength);break;default:throw new SyntaxError("Bad algorithm name")}return s}function _(g){return{HMAC:{"SHA-1":"HS1","SHA-256":"HS256","SHA-384":"HS384","SHA-512":"HS512"},"RSASSA-PKCS1-v1_5":{"SHA-1":"RS1","SHA-256":"RS256","SHA-384":"RS384","SHA-512":"RS512"},"RSAES-PKCS1-v1_5":{"":"RSA1_5"},"RSA-OAEP":{"SHA-1":"RSA-OAEP","SHA-256":"RSA-OAEP-256"},"AES-KW":{128:"A128KW",192:"A192KW",256:"A256KW"},"AES-GCM":{128:"A128GCM",192:"A192GCM",256:"A256GCM"},"AES-CBC":{128:"A128CBC",192:"A192CBC",256:"A256CBC"}}[g.name][(g.hash||{}).name||g.length||""]}function bt(g){(g instanceof ArrayBuffer||g instanceof Uint8Array)&&(g=JSON.parse(decodeURIComponent(escape(F(g)))));var s={kty:g.kty,alg:g.alg,ext:g.ext||g.extractable};switch(s.kty){case"oct":s.k=g.k;case"RSA":["n","e","d","p","q","dp","dq","qi","oth"].forEach(function(l){l in g&&(s[l]=g[l])});break;default:throw new TypeError("Unsupported key type")}return s}function T(g){var s=bt(g);return w&&(s.extractable=s.ext,delete s.ext),E(unescape(encodeURIComponent(JSON.stringify(s)))).buffer}function Q(g){var s=At(g),l=!1;s.length>2&&(l=!0,s.shift());var n={ext:!0};switch(s[0][0]){case"1.2.840.113549.1.1.1":var h=["n","e","d","p","q","dp","dq","qi"],u=At(s[1]);l&&u.shift();for(var p=0;p<u.length;p++)u[p][0]||(u[p]=u[p].subarray(1)),n[h[p]]=b(F(u[p]));n.kty="RSA";break;default:throw new TypeError("Unsupported key type")}return n}function et(g){var s,l=[["",null]],n=!1;switch(g.kty){case"RSA":for(var h=["n","e","d","p","q","dp","dq","qi"],u=[],p=0;p<h.length&&h[p]in g;p++){var m=u[p]=E(A(g[h[p]]));m[0]&128&&(u[p]=new Uint8Array(m.length+1),u[p].set(m,1))}u.length>2&&(n=!0,u.unshift(new Uint8Array([0]))),l[0][0]="1.2.840.113549.1.1.1",s=u;break;default:throw new TypeError("Unsupported key type")}return l.push(new Uint8Array(_t(s)).buffer),n?l.unshift(new Uint8Array([0])):l[1]={tag:3,value:l[1]},new Uint8Array(_t(l)).buffer}var Mt={KoZIhvcNAQEB:"1.2.840.113549.1.1.1"},X={"1.2.840.113549.1.1.1":"KoZIhvcNAQEB"};function At(g,s){if(g instanceof ArrayBuffer&&(g=new Uint8Array(g)),s||(s={pos:0,end:g.length}),s.end-s.pos<2||s.end>g.length)throw new RangeError("Malformed DER");var l=g[s.pos++],n=g[s.pos++];if(n>=128){if(n&=127,s.end-s.pos<n)throw new RangeError("Malformed DER");for(var h=0;n--;)h<<=8,h|=g[s.pos++];n=h}if(s.end-s.pos<n)throw new RangeError("Malformed DER");var u;switch(l){case 2:u=g.subarray(s.pos,s.pos+=n);break;case 3:if(g[s.pos++])throw new Error("Unsupported bit string");n--;case 4:u=new Uint8Array(g.subarray(s.pos,s.pos+=n)).buffer;break;case 5:u=null;break;case 6:var p=btoa(F(g.subarray(s.pos,s.pos+=n)));if(!(p in Mt))throw new Error("Unsupported OBJECT ID "+p);u=Mt[p];break;case 48:u=[];for(var m=s.pos+n;s.pos<m;)u.push(At(g,s));break;default:throw new Error("Unsupported DER tag 0x"+l.toString(16))}return u}function _t(g,s){s||(s=[]);var l=0,n=0,h=s.length+2;if(s.push(0,0),g instanceof Uint8Array){l=2,n=g.length;for(var u=0;u<n;u++)s.push(g[u])}else if(g instanceof ArrayBuffer){l=4,n=g.byteLength,g=new Uint8Array(g);for(var u=0;u<n;u++)s.push(g[u])}else if(g===null)l=5,n=0;else if(typeof g=="string"&&g in X){var p=E(atob(X[g]));l=6,n=p.length;for(var u=0;u<n;u++)s.push(p[u])}else if(g instanceof Array){for(var u=0;u<g.length;u++)_t(g[u],s);l=48,n=s.length-h}else if(typeof g=="object"&&g.tag===3&&g.value instanceof ArrayBuffer){g=new Uint8Array(g.value),l=3,n=g.byteLength,s.push(0);for(var u=0;u<n;u++)s.push(g[u]);n++}else throw new Error("Unsupported DER value "+g);if(n>=128){var m=n,n=4;for(s.splice(h,0,m>>24&255,m>>16&255,m>>8&255,m&255);n>1&&!(m>>24);)m<<=8,n--;n<4&&s.splice(h,4-n),n|=128}return s.splice(h-2,2,l,n),s}function Xt(g,s,l,n){Object.defineProperties(this,{_key:{value:g},type:{value:g.type,enumerable:!0},extractable:{value:l===void 0?g.extractable:l,enumerable:!0},algorithm:{value:s===void 0?g.algorithm:s,enumerable:!0},usages:{value:n===void 0?g.usages:n,enumerable:!0}})}function Zt(g){return g==="verify"||g==="encrypt"||g==="wrapKey"}function J(g){return g==="sign"||g==="decrypt"||g==="unwrapKey"}if(["generateKey","importKey","unwrapKey"].forEach(function(g){var s=e[g];e[g]=function(l,n,h){var u=[].slice.call(arguments),p,m,d;switch(g){case"generateKey":p=S(l),m=n,d=h;break;case"importKey":p=S(h),m=u[3],d=u[4],l==="jwk"&&(n=bt(n),n.alg||(n.alg=_(p)),n.key_ops||(n.key_ops=n.kty!=="oct"?"d"in n?d.filter(J):d.filter(Zt):d.slice()),u[1]=T(n));break;case"unwrapKey":p=u[4],m=u[5],d=u[6],u[2]=h._key;break}if(g==="generateKey"&&p.name==="HMAC"&&p.hash)return p.length=p.length||{"SHA-1":512,"SHA-256":512,"SHA-384":1024,"SHA-512":1024}[p.hash.name],e.importKey("raw",t.getRandomValues(new Uint8Array(p.length+7>>3)),p,m,d);if(C&&g==="generateKey"&&p.name==="RSASSA-PKCS1-v1_5"&&(!p.modulusLength||p.modulusLength>=2048))return l=S(l),l.name="RSAES-PKCS1-v1_5",delete l.hash,e.generateKey(l,!0,["encrypt","decrypt"]).then(function(c){return Promise.all([e.exportKey("jwk",c.publicKey),e.exportKey("jwk",c.privateKey)])}).then(function(c){return c[0].alg=c[1].alg=_(p),c[0].key_ops=d.filter(Zt),c[1].key_ops=d.filter(J),Promise.all([e.importKey("jwk",c[0],p,!0,c[0].key_ops),e.importKey("jwk",c[1],p,m,c[1].key_ops)])}).then(function(c){return{publicKey:c[0],privateKey:c[1]}});if((C||w&&(p.hash||{}).name==="SHA-1")&&g==="importKey"&&l==="jwk"&&p.name==="HMAC"&&n.kty==="oct")return e.importKey("raw",E(A(n.k)),h,u[3],u[4]);if(C&&g==="importKey"&&(l==="spki"||l==="pkcs8"))return e.importKey("jwk",Q(n),h,u[3],u[4]);if(w&&g==="unwrapKey")return e.decrypt(u[3],h,n).then(function(c){return e.importKey(l,c,u[4],u[5],u[6])});var o;try{o=s.apply(e,u)}catch(c){return Promise.reject(c)}return w&&(o=new Promise(function(c,v){o.onabort=o.onerror=function(y){v(y)},o.oncomplete=function(y){c(y.target.result)}})),o=o.then(function(c){return p.name==="HMAC"&&(p.length||(p.length=8*c.algorithm.length)),p.name.search("RSA")==0&&(p.modulusLength||(p.modulusLength=(c.publicKey||c).algorithm.modulusLength),p.publicExponent||(p.publicExponent=(c.publicKey||c).algorithm.publicExponent)),c.publicKey&&c.privateKey?c={publicKey:new Xt(c.publicKey,p,m,d.filter(Zt)),privateKey:new Xt(c.privateKey,p,m,d.filter(J))}:c=new Xt(c,p,m,d),c}),o}}),["exportKey","wrapKey"].forEach(function(g){var s=e[g];e[g]=function(l,n,h){var u=[].slice.call(arguments);switch(g){case"exportKey":u[1]=n._key;break;case"wrapKey":u[1]=n._key,u[2]=h._key;break}if((C||w&&(n.algorithm.hash||{}).name==="SHA-1")&&g==="exportKey"&&l==="jwk"&&n.algorithm.name==="HMAC"&&(u[0]="raw"),C&&g==="exportKey"&&(l==="spki"||l==="pkcs8")&&(u[0]="jwk"),w&&g==="wrapKey")return e.exportKey(l,n).then(function(m){return l==="jwk"&&(m=E(unescape(encodeURIComponent(JSON.stringify(bt(m)))))),e.encrypt(u[3],h,m)});var p;try{p=s.apply(e,u)}catch(m){return Promise.reject(m)}return w&&(p=new Promise(function(m,d){p.onabort=p.onerror=function(o){d(o)},p.oncomplete=function(o){m(o.target.result)}})),g==="exportKey"&&l==="jwk"&&(p=p.then(function(m){return(C||w&&(n.algorithm.hash||{}).name==="SHA-1")&&n.algorithm.name==="HMAC"?{kty:"oct",alg:_(n.algorithm),key_ops:n.usages.slice(),ext:!0,k:b(F(m))}:(m=bt(m),m.alg||(m.alg=_(n.algorithm)),m.key_ops||(m.key_ops=n.type==="public"?n.usages.filter(Zt):n.type==="private"?n.usages.filter(J):n.usages.slice()),m)})),C&&g==="exportKey"&&(l==="spki"||l==="pkcs8")&&(p=p.then(function(m){return m=et(bt(m)),m})),p}}),["encrypt","decrypt","sign","verify"].forEach(function(g){var s=e[g];e[g]=function(l,n,h,u){if(w&&(!h.byteLength||u&&!u.byteLength))throw new Error("Empy input is not allowed");var p=[].slice.call(arguments),m=S(l);if(w&&g==="decrypt"&&m.name==="AES-GCM"){var d=l.tagLength>>3;p[2]=(h.buffer||h).slice(0,h.byteLength-d),l.tag=(h.buffer||h).slice(h.byteLength-d)}p[1]=n._key;var o;try{o=s.apply(e,p)}catch(c){return Promise.reject(c)}return w&&(o=new Promise(function(c,v){o.onabort=o.onerror=function(y){v(y)},o.oncomplete=function(M){var M=M.target.result;if(g==="encrypt"&&M instanceof AesGcmEncryptResult){var B=M.ciphertext,x=M.tag;M=new Uint8Array(B.byteLength+x.byteLength),M.set(new Uint8Array(B),0),M.set(new Uint8Array(x),B.byteLength),M=M.buffer}c(M)}})),o}}),w){var zt=e.digest;e.digest=function(g,s){if(!s.byteLength)throw new Error("Empy input is not allowed");var l;try{l=zt.call(e,g,s)}catch(n){return Promise.reject(n)}return l=new Promise(function(n,h){l.onabort=l.onerror=function(u){h(u)},l.oncomplete=function(u){n(u.target.result)}}),l},r.crypto=Object.create(t,{getRandomValues:{value:function(g){return t.getRandomValues(g)}},subtle:{value:e}}),r.CryptoKey=Xt}C&&(t.subtle=e,r.Crypto=i,r.SubtleCrypto=f,r.CryptoKey=Xt)});const Ol=window.crypto,Pl=Object.freeze(Object.defineProperty({__proto__:null,default:Ol},Symbol.toStringTag,{value:"Module"})),kl=je(Pl),Mn=Fl,ui=Bl,Mo=Ll,Bo=typeof self<"u"&&self.crypto&&self.crypto.subtle;let Fo=null;Bo||(Fo=kl);function ql(r){return Bo?crypto.subtle.digest("SHA-256",r):Fo.subtle.digest({name:"SHA-256"},r)}function Wl(r){if(!Mn.isBN(r)&&typeof r!="string")throw new Error("Please pass numbers as strings or BN objects to avoid precision errors.");return Mo.toWei(r,"gwei")}function Hl(r){if(!Mn.isBN(r)&&typeof r!="string")throw new Error("Please pass numbers as strings or BN objects to avoid precision errors.");return Mo.fromWei(r,"gwei")}const xo=[],Zi={};for(let r=0;r<=255;r++){let t=r.toString(16);t.length<2&&(t="0"+t),xo.push(t),Zi[t]=r}function Vl(r){const t=[];for(let e=0;e<r.byteLength;e++)t.push(xo[r[e]]);return t.join("")}function Kl(r){r=r.toLowerCase();const t=r.length;if(t%2!==0)throw"hex string must have length a multiple of 2";const e=t/2,i=new Uint8Array(e);for(let f=0;f<e;f++){const a=f*2,w=r.substring(a,a+2);if(!Zi.hasOwnProperty(w))throw new Error("invalid hex character "+w);i[f]=Zi[w]}return i}function jl(r,t=1){let e,i;t===1&&(e=new ArrayBuffer(r.length),i=new Uint8Array(e)),t===2&&(e=new ArrayBuffer(r.length*2),i=new Uint16Array(e)),t===4&&(e=new ArrayBuffer(r.length*4),i=new Uint32Array(e));for(let f=0,a=r.length;f<a;f++)i[f]=r.charCodeAt(f);return new Uint8Array(i.buffer)}function Gl(r,t){r^=4294967295;for(let i=0;i<t.length;i++)r^=t[i],r=r&1?r>>>1^2197175160:r>>>1,r=r&1?r>>>1^2197175160:r>>>1,r=r&1?r>>>1^2197175160:r>>>1,r=r&1?r>>>1^2197175160:r>>>1,r=r&1?r>>>1^2197175160:r>>>1,r=r&1?r>>>1^2197175160:r>>>1,r=r&1?r>>>1^2197175160:r>>>1,r=r&1?r>>>1^2197175160:r>>>1;return r^4294967295}function Zl(r){const t=Gl(0,r),e=new ArrayBuffer(4);return new DataView(e).setUint32(0,t,!1),new Uint8Array(e).reverse()}function zl(r){let e=0;const i=new Uint8Array(r.length+2);i.set(r);for(let f of i){let a=128;for(;a>0;)e<<=1,f&a&&(e+=1),a>>=1,e>65535&&(e&=65535,e^=4129)}return new Uint8Array([Math.floor(e/256),e%256])}function Yl(r,t){const e=new Uint8Array(r.length+t.length);return e.set(r),e.set(t,r.length),e}function Xl(r,t){return r.toString()===t.toString()}const Te=(()=>{const r=[];for(let f=0;f<26;++f)r.push(String.fromCharCode(65+f));for(let f=0;f<26;++f)r.push(String.fromCharCode(97+f));for(let f=0;f<10;++f)r.push(String.fromCharCode(48+f));return r.push("+"),r.push("/"),r})();function Ql(r){let t="",e;const i=r.length;for(e=2;e<i;e+=3)t+=Te[r[e-2]>>2],t+=Te[(r[e-2]&3)<<4|r[e-1]>>4],t+=Te[(r[e-1]&15)<<2|r[e]>>6],t+=Te[r[e]&63];return e===i+1&&(t+=Te[r[e-2]>>2],t+=Te[(r[e-2]&3)<<4],t+="=="),e===i&&(t+=Te[r[e-2]>>2],t+=Te[(r[e-2]&3)<<4|r[e-1]>>4],t+=Te[(r[e-1]&15)<<2],t+="="),t}function So(r){return typeof self>"u"?Buffer.from(r,"base64").toString("binary"):atob(r)}function Jl(r){return typeof self>"u"?Buffer.from(r,"binary").toString("base64"):btoa(r)}function th(r){const t=So(r),e=t.length,i=new Uint8Array(e);for(let f=0;f<e;f++)i[f]=t.charCodeAt(f);return i}function eh(r,t){let e=0;for(let i=0;i<r;i++)e*=256,e+=t[i];return e}function rh(r){return ui.sign.keyPair.fromSeed(r)}function ih(){return ui.sign.keyPair()}function nh(){return ui.sign.keyPair().secretKey.slice(0,32)}var ci={BN:Mn,nacl:ui,sha256:ql,fromNano:Hl,toNano:Wl,bytesToHex:Vl,hexToBytes:Kl,stringToBytes:jl,crc32c:Zl,crc16:zl,concatBytes:Yl,bytesToBase64:Ql,base64ToBytes:th,base64toString:So,stringToBase64:Jl,compareBytes:Xl,readNBytesUIntFromArray:eh,keyPairFromSeed:rh,newKeyPair:ih,newSeed:nh},Do={};const{crc16:_o,hexToBytes:sh,bytesToHex:oh,stringToBytes:ah,base64toString:lh,stringToBase64:hh}=ci,zi=17,Io=81,Yi=128;function fh(r){if(r.length!==48)throw new Error("User-friendly address should contain strictly 48 characters");const t=ah(lh(r));if(t.length!==36)throw"Unknown address type: byte length is not equal to 36";const e=t.slice(0,34),i=t.slice(34,36),f=_o(e);if(!(f[0]===i[0]&&f[1]===i[1]))throw"Wrong crc16 hashsum";let a=e[0],w=!1,C=!1;if(a&Yi&&(w=!0,a=a^Yi),a!==zi&&a!==Io)throw"Unknown address tag";C=a===zi;let b=null;if(e[1]===255?b=-1:b=e[1],b!==0&&b!==-1)throw new Error("Invalid address wc "+b);const A=e.slice(2,34);return{isTestOnly:w,isBounceable:C,workchain:b,hashPart:A}}let uh=class Xi{static isValid(t){try{return new Xi(t),!0}catch{return!1}}constructor(t){if(t==null)throw"Invalid address";if(t instanceof Xi){this.wc=t.wc,this.hashPart=t.hashPart,this.isTestOnly=t.isTestOnly,this.isUserFriendly=t.isUserFriendly,this.isBounceable=t.isBounceable,this.isUrlSafe=t.isUrlSafe;return}if(this.isUrlSafe=!0,t.search(/\-/)>0||t.search(/_/)>0?t=t.replace(/\-/g,"+").replace(/_/g,"/"):this.isUrlSafe=!1,t.indexOf(":")>-1){const e=t.split(":");if(e.length!==2)throw new Error("Invalid address "+t);const i=parseInt(e[0]);if(i!==0&&i!==-1)throw new Error("Invalid address wc "+t);const f=e[1];if(f.length!==64)throw new Error("Invalid address hex "+t);this.isUserFriendly=!1,this.wc=i,this.hashPart=sh(f),this.isTestOnly=!1,this.isBounceable=!1}else{this.isUserFriendly=!0;const e=fh(t);this.wc=e.workchain,this.hashPart=e.hashPart,this.isTestOnly=e.isTestOnly,this.isBounceable=e.isBounceable}}toString(t,e,i,f){if(t===void 0&&(t=this.isUserFriendly),e===void 0&&(e=this.isUrlSafe),i===void 0&&(i=this.isBounceable),f===void 0&&(f=this.isTestOnly),t){let a=i?zi:Io;f&&(a|=Yi);const w=new Int8Array(34);w[0]=a,w[1]=this.wc,w.set(this.hashPart,2);const C=new Uint8Array(36);C.set(w),C.set(_o(w),34);let b=hh(String.fromCharCode.apply(null,new Uint8Array(C)));return e&&(b=b.replace(/\+/g,"-").replace(/\//g,"_")),b}else return this.wc+":"+oh(this.hashPart)}};Do.default=uh;var To={};const{hexToBytes:ch,bytesToHex:dh}=ci;let ph=class Qi{static isValid(t){try{return new Qi(t),!0}catch{return!1}}constructor(t){if(t==null)throw"Invalid address";if(t instanceof Qi)this.bytes=t.bytes;else if(t instanceof Uint8Array){if(t.length!==32)throw new Error("invalid adnl bytes length");this.bytes=t}else if(typeof t=="string"){if(t.length!==64)throw new Error("invalid adnl hex length");this.bytes=ch(t)}else throw new Error("unsupported type")}toHex(){let t=dh(this.bytes);for(;t.length<64;)t="0"+t;return t}};To.default=ph;var No={};const{hexToBytes:vh,bytesToHex:mh}=ci;let gh=class Ji{static isValid(t){try{return new Ji(t),!0}catch{return!1}}constructor(t){if(t==null)throw"Invalid address";if(t instanceof Ji)this.bytes=t.bytes;else if(t instanceof Uint8Array){if(t.length!==32)throw new Error("invalid bag id bytes length");this.bytes=t}else if(typeof t=="string"){if(t.length!==64)throw new Error("invalid bag id hex length");this.bytes=vh(t)}else throw new Error("unsupported type")}toHex(){let t=mh(this.bytes);for(;t.length<64;)t="0"+t;return t}};No.default=gh;const{BN:Ro,nacl:wh,sha256:yh,fromNano:bh,toNano:Ch,bytesToHex:Eh,hexToBytes:Ah,stringToBytes:Mh,crc32c:Bh,crc16:Fh,concatBytes:xh,bytesToBase64:Sh,base64ToBytes:Dh,base64toString:_h,stringToBase64:Ih,compareBytes:Th,readNBytesUIntFromArray:Nh,keyPairFromSeed:Rh,newKeyPair:$h,newSeed:Uh}=ci,$o=Do.default,Lh=To.default,Oh=No.default;function Ph(r){const t="ton://transfer/";if(!r.startsWith(t))throw new Error("must starts with "+t);const e=r.substring(t.length).split("?");if(e.length>2)throw new Error('multiple "?"');const i=e[0];if(!$o.isValid(i))throw new Error("invalid address format "+i);const f={address:i},a=e[1];if(a&&a.length){const w=a.split("&").map(C=>C.split("="));for(const C of w){if(C.length!==2)throw new Error("invalid url pair");const b=C[0],A=C[1];if(b==="amount"){if(f.amount)throw new Error("amount already set");if(new Ro(A).isNeg())throw new Error("negative amount");f.amount=A}else if(b==="text"){if(f.text)throw new Error("text already set");f.text=decodeURIComponent(A)}else throw new Error("unknown url var "+b)}}return f}function kh(r,t,e){let i="ton://transfer/"+r;const f=[];return t&&f.push("amount="+t),e&&f.push("text="+encodeURIComponent(e)),f.length===0?i:i+"?"+f.join("&")}var Bt={Address:$o,AdnlAddress:Lh,StorageBagId:Oh,BN:Ro,nacl:wh,sha256:yh,fromNano:bh,toNano:Ch,bytesToHex:Eh,hexToBytes:Ah,stringToBytes:Mh,crc32c:Bh,crc16:Fh,concatBytes:xh,bytesToBase64:Sh,base64ToBytes:Dh,base64toString:_h,stringToBase64:Ih,compareBytes:Th,readNBytesUIntFromArray:Nh,parseTransferUrl:Ph,formatTransferUrl:kh,keyPairFromSeed:Rh,newKeyPair:$h,newSeed:Uh};const{BN:ur,bytesToHex:qh}=Bt;let Wh=class Uo{constructor(t){this.array=Uint8Array.from({length:Math.ceil(t/8)},()=>0),this.cursor=0,this.length=t}getFreeBits(){return this.length-this.cursor}getUsedBits(){return this.cursor}getUsedBytes(){return Math.ceil(this.cursor/8)}get(t){return(this.array[t/8|0]&1<<7-t%8)>0}checkRange(t){if(t>this.length)throw Error("BitString overflow")}on(t){this.checkRange(t),this.array[t/8|0]|=1<<7-t%8}off(t){this.checkRange(t),this.array[t/8|0]&=~(1<<7-t%8)}toggle(t){this.checkRange(t),this.array[t/8|0]^=1<<7-t%8}forEach(t){const e=this.cursor;for(let i=0;i<e;i++)t(this.get(i))}writeBit(t){t&&t>0?this.on(this.cursor):this.off(this.cursor),this.cursor=this.cursor+1}writeBitArray(t){for(let e=0;e<t.length;e++)this.writeBit(t[e])}writeUint(t,e){if(isNaN(t))throw new Error("writeUint: value is NaN");if(t===null)throw new Error("writeUint: value is null");if(t===void 0)throw new Error("writeUint: value is undefined");if(!e)throw new Error("writeUint: no bitLength");if(t=new ur(t),e==0||t.toString(2).length>e){if(t==0)return;throw Error("bitLength is too small for number, got number="+t+",bitLength="+e)}const i=t.toString(2,e);for(let f=0;f<e;f++)this.writeBit(i[f]==1)}writeInt(t,e){if(isNaN(t))throw new Error("writeInt: value is NaN");if(t===null)throw new Error("writeInt: value is null");if(t===void 0)throw new Error("writeInt: value is undefined");if(!e)throw new Error("writeInt: no bitLength");if(t=new ur(t),e==1){if(t==-1){this.writeBit(!0);return}if(t==0){this.writeBit(!1);return}throw Error("Bitlength is too small for number")}else if(t.isNeg()){this.writeBit(!0);const f=new ur(2).pow(new ur(e-1));this.writeUint(f.add(t),e-1)}else this.writeBit(!1),this.writeUint(t,e-1)}writeUint8(t){this.writeUint(t,8)}writeBytes(t){for(let e=0;e<t.length;e++)this.writeUint8(t[e])}writeString(t){this.writeBytes(new TextEncoder().encode(t))}writeGrams(t){if(t==0)this.writeUint(0,4);else{t=new ur(t);const e=Math.ceil(t.toString(16).length/2);this.writeUint(e,4),this.writeUint(t,e*8)}}writeCoins(t){this.writeGrams(t)}writeAddress(t){t==null?this.writeUint(0,2):(this.writeUint(2,2),this.writeUint(0,1),this.writeInt(t.wc,8),this.writeBytes(t.hashPart))}writeBitString(t){t.forEach(e=>{this.writeBit(e)})}clone(){const t=new Uo(0);return t.array=this.array.slice(0),t.length=this.length,t.cursor=this.cursor,t}toString(){return this.toHex()}getTopUppedArray(){const t=this.clone();let e=Math.ceil(t.cursor/8)*8-t.cursor;if(e>0)for(e=e-1,t.writeBit(!0);e>0;)e=e-1,t.writeBit(!1);return t.array=t.array.slice(0,Math.ceil(t.cursor/8)),t.array}toHex(){if(this.cursor%4===0){const t=qh(this.array.slice(0,Math.ceil(this.cursor/8))).toUpperCase();return this.cursor%8===0?t:t.substr(0,t.length-1)}else{const t=this.clone();for(t.writeBit(1);t.cursor%4!==0;)t.writeBit(0);return t.toHex().toUpperCase()+"_"}}setTopUppedArray(t,e=!0){if(this.length=t.length*8,this.array=t,this.cursor=this.length,!(e||!this.length)){let i=!1;for(let f=0;f<7;f++)if(this.cursor-=1,this.get(this.cursor)){i=!0,this.off(this.cursor);break}if(!i)throw console.log(t,e),new Error("Incorrect TopUppedArray")}}};var Bn={BitString:Wh};const{BN:qe,Address:Hh,bytesToHex:Vh}=Bt,{BitString:Kh}=Bn;let jh=class{constructor(t,e,i){this.array=t,this.length=e,this.readCursor=0,this.refs=i,this.refCursor=0}getFreeBits(){return this.length-this.readCursor}checkRange(t){if(t>this.length)throw Error("BitString overflow")}get(t){return this.checkRange(t),(this.array[t/8|0]&1<<7-t%8)>0}loadBit(){const t=this.get(this.readCursor);return this.readCursor++,t}loadBits(t){const e=new Kh(t);for(let i=0;i<t;i++)e.writeBit(this.loadBit());return e.array}loadUint(t){if(t<1)throw"Incorrect bitLength";let e="";for(let i=0;i<t;i++)e+=this.loadBit()?"1":"0";return new qe(e,2)}loadInt(t){if(t<1)throw"Incorrect bitLength";const e=this.loadBit();if(t===1)return e?new qe(-1):new qe(0);let i=this.loadUint(t-1);if(e){const a=new qe(2).pow(new qe(t-1));i=i.sub(a)}return i}loadVarUint(t){const e=this.loadUint(new qe(t).toString(2).length-1);return e.toNumber()===0?new qe(0):this.loadUint(e*8)}loadCoins(){return this.loadVarUint(16)}loadAddress(){const t=this.loadUint(2);if(t.toNumber()===0)return null;if(t.toNumber()!==2)throw new Error("unsupported address type");if(this.loadBit())throw new Error("unsupported address type");const e=this.loadInt(8).toNumber(),i=this.loadBits(256);return new Hh(e+":"+Vh(i))}loadRef(){if(this.refCursor>=4)throw new Error("refs overflow");const t=this.refs[this.refCursor];return this.refCursor++,t}};var Lo={Slice:jh};const{BitString:fs}=Bn,{bytesToBase64:Z2,compareBytes:Ir,concatBytes:cr,crc32c:Oo,hexToBytes:Mr,readNBytesUIntFromArray:Ve,sha256:Gh,bytesToHex:z2}=Bt,{Slice:Zh}=Lo,Po=Mr("B5EE9C72"),zh=Mr("68ff65f3"),Yh=Mr("acc3a728");let ko=class{constructor(){this.bits=new fs(1023),this.refs=[],this.isExotic=!1}static fromBoc(t){return us(t)}static oneFromBoc(t){const e=us(t);if(e.length!==1)throw new Error("expected 1 root cell but have "+e.length);return e[0]}writeCell(t){this.bits.writeBitString(t.bits),this.refs=this.refs.concat(t.refs)}getMaxLevel(){let t=0;for(let e in this.refs){const i=this.refs[e];i.getMaxLevel()>t&&(t=i.getMaxLevel())}return t}isExplicitlyStoredHashes(){return 0}getMaxDepth(){let t=0;if(this.refs.length>0){for(let e=0;e<this.refs.length;e++){let f=this.refs[e].getMaxDepth();f>t&&(t=f)}t=t+1}return t}getMaxDepthAsArray(){const t=this.getMaxDepth(),e=Uint8Array.from({length:2},()=>0);return e[1]=t%256,e[0]=Math.floor(t/256),e}getRefsDescriptor(){const t=Uint8Array.from({length:1},()=>0);return t[0]=this.refs.length+this.isExotic*8+this.getMaxLevel()*32,t}getBitsDescriptor(){const t=Uint8Array.from({length:1},()=>0);return t[0]=Math.ceil(this.bits.cursor/8)+Math.floor(this.bits.cursor/8),t}getDataWithDescriptors(){const t=this.getRefsDescriptor(),e=this.getBitsDescriptor(),i=this.bits.getTopUppedArray();return cr(cr(t,e),i)}async getRepr(){const t=[];t.push(this.getDataWithDescriptors());for(let i in this.refs){const f=this.refs[i];t.push(f.getMaxDepthAsArray())}for(let i in this.refs){const f=this.refs[i];t.push(await f.hash())}let e=new Uint8Array;for(let i in t){const f=t[i];e=cr(e,f)}return e}async hash(){return new Uint8Array(await Gh(await this.getRepr()))}beginParse(){const t=this.refs.map(e=>e.beginParse());return new Zh(this.bits.array.slice(),this.bits.length,t)}print(t){t=t||"";let e=t+"x{"+this.bits.toHex()+`}
`;for(let i in this.refs){const f=this.refs[i];e+=f.print(t+" ")}return e}async toBoc(t=!0,e=!0,i=!1,f=0){const w=await this.treeWalk(),C=w[0],b=w[1],A=C.length,E=A.toString(2).length,F=Math.min(Math.ceil(E/8),1);let S=0,_=[];for(let Mt of C)_.push(S),S=S+await Mt[1].bocSerializationSize(b,F);const bt=S.toString(2).length,T=Math.max(Math.ceil(bt/8),1),Q=new fs((1023+32*4+32*3)*C.length);Q.writeBytes(Po),Q.writeBitArray([t,e,i]),Q.writeUint(f,2),Q.writeUint(F,3),Q.writeUint8(T),Q.writeUint(A,F*8),Q.writeUint(1,F*8),Q.writeUint(0,F*8),Q.writeUint(S,T*8),Q.writeUint(0,F*8),t&&C.forEach((Mt,X)=>Q.writeUint(_[X],T*8));for(let Mt of C){const X=await Mt[1].serializeForBoc(b,F);Q.writeBytes(X)}let et=Q.getTopUppedArray();return e&&(et=cr(et,Oo(et))),et}async serializeForBoc(t,e){const i=[];if(i.push(this.getDataWithDescriptors()),this.isExplicitlyStoredHashes())throw new Error("Cell hashes explicit storing is not implemented");for(let a in this.refs){const C=await this.refs[a].hash();let A=t[C].toString(16);A.length%2&&(A="0"+A);const E=Mr(A);i.push(E)}let f=new Uint8Array;for(let a in i){const w=i[a];f=cr(f,w)}return f}async bocSerializationSize(t,e){return(await this.serializeForBoc(t,e)).length}async treeWalk(){return Wo(this,[],{})}};async function qo(r,t,e){const i=r[e];for(let a in r)r[a]>i&&(r[a]=r[a]-1);r[e]=t.length-1;const f=t.splice(i,1)[0];t.push(f);for(let a of f[1].refs)await qo(r,t,await a.hash())}async function Wo(r,t,e,i=null){const f=await r.hash();if(f in e)return i&&e[i]>e[f]&&await qo(e,t,f),[t,e];e[f]=t.length,t.push([f,r]);for(let a of r.refs){const w=await Wo(a,t,e,f);t=w[0],e=w[1]}return[t,e]}function Xh(r){if(r.length<5)throw"Not enough bytes for magic prefix";const t=r,e=r.slice(0,4);r=r.slice(4);let i,f,a,w,C;if(Ir(e,Po)){const Q=r[0];i=Q&128,f=Q&64,a=Q&32,w=(Q&16)*2+(Q&8),C=Q%8}if(Ir(e,zh)&&(i=1,f=0,a=0,w=0,C=r[0]),Ir(e,Yh)&&(i=1,f=1,a=0,w=0,C=r[0]),r=r.slice(1),r.length<1+5*C)throw"Not enough bytes for encoding cells counters";const b=r[0];r=r.slice(1);const A=Ve(C,r);r=r.slice(C);const E=Ve(C,r);r=r.slice(C);const F=Ve(C,r);r=r.slice(C);const S=Ve(b,r);if(r=r.slice(b),r.length<E*C)throw"Not enough bytes for encoding root cells hashes";let _=[];for(let Q=0;Q<E;Q++)_.push(Ve(C,r)),r=r.slice(C);let bt=!1;if(i){if(bt=[],r.length<b*A)throw"Not enough bytes for index encoding";for(let Q=0;Q<A;Q++)bt.push(Ve(b,r)),r=r.slice(b)}if(r.length<S)throw"Not enough bytes for cells data";const T=r.slice(0,S);if(r=r.slice(S),f){if(r.length<4)throw"Not enough bytes for crc32c hashsum";const Q=t.length;if(!Ir(Oo(t.slice(0,Q-4)),r.slice(0,4)))throw"Crc32c hashsum mismatch";r=r.slice(4)}if(r.length)throw"Too much bytes in BoC serialization";return{has_idx:i,hash_crc32:f,has_cache_bits:a,flags:w,size_bytes:C,off_bytes:b,cells_num:A,roots_num:E,absent_num:F,tot_cells_size:S,root_list:_,index:bt,cells_data:T}}function Qh(r,t){if(r.length<2)throw"Not enough bytes to encode cell descriptors";const e=r[0],i=r[1];r=r.slice(2);const f=e&8,a=e%8,w=Math.ceil(i/2),C=!(i%2);let b=new ko;if(b.isExotic=f,r.length<w+t*a)throw"Not enough bytes to encode cell data";b.bits.setTopUppedArray(r.slice(0,w),C),r=r.slice(w);for(let A=0;A<a;A++)b.refs.push(Ve(t,r)),r=r.slice(t);return{cell:b,residue:r}}function us(r){typeof r=="string"&&(r=Mr(r));const t=Xh(r);let e=t.cells_data,i=[];for(let a=0;a<t.cells_num;a++){let w=Qh(e,t.size_bytes);e=w.residue,i.push(w.cell)}for(let a=t.cells_num-1;a>=0;a--){let w=i[a];for(let C=0;C<w.refs.length;C++){const b=w.refs[C];if(b<a)throw"Topological order is broken";w.refs[C]=i[b]}}let f=[];for(let a of t.root_list)f.push(i[a]);return f}var Jh={Cell:ko};const{BitString:tf}=Bn,{Cell:ef}=Jh,{Slice:rf}=Lo;var Ft={BitString:tf,Cell:ef,Slice:rf};const{Cell:Xe}=Ft,{Address:Re,bytesToBase64:dr,bytesToHex:nf,BN:sf}=Bt;let of=class Qr{constructor(t,e){this.provider=t,this.options=e,this.address=e.address?new Re(e.address):null,e.wc||(e.wc=this.address?this.address.wc:0),this.methods={}}async getAddress(){return this.address||(this.address=(await this.createStateInit()).address),this.address}createCodeCell(){if(!this.options.code)throw new Error("Contract: options.code is not defined");return this.options.code}createDataCell(){return new Xe}async createStateInit(){const t=this.createCodeCell(),e=this.createDataCell(),i=Qr.createStateInit(t,e),f=await i.hash(),a=new Re(this.options.wc+":"+nf(f));return{stateInit:i,address:a,code:t,data:e}}static createStateInit(t,e,i=null,f=null,a=null){if(i)throw"Library in state init is not implemented";if(f)throw"Split depth in state init is not implemented";if(a)throw"Ticktock in state init is not implemented";const w=new Xe;return w.bits.writeBitArray([!!f,!!a,!!t,!!e,!!i]),t&&w.refs.push(t),e&&w.refs.push(e),i&&w.refs.push(i),w}static createInternalMessageHeader(t,e=0,i=!0,f=null,a=!1,w=null,C=null,b=0,A=0,E=0,F=0){const S=new Xe;if(S.bits.writeBit(!1),S.bits.writeBit(i),f!==null?S.bits.writeBit(f):S.bits.writeBit(new Re(t).isBounceable),S.bits.writeBit(a),S.bits.writeAddress(w?new Re(w):null),S.bits.writeAddress(new Re(t)),S.bits.writeGrams(e),C)throw"Currency collections are not implemented yet";return S.bits.writeBit(!!C),S.bits.writeGrams(b),S.bits.writeGrams(A),S.bits.writeUint(E,64),S.bits.writeUint(F,32),S}static createExternalMessageHeader(t,e=null,i=0){const f=new Xe;return f.bits.writeUint(2,2),f.bits.writeAddress(e?new Re(e):null),f.bits.writeAddress(new Re(t)),f.bits.writeGrams(i),f}static createOutMsg(t,e,i,f=null){let a=new Xe;i&&(i.refs?a=i:typeof i=="string"?i.length>0&&(a.bits.writeUint(0,32),a.bits.writeString(i)):a.bits.writeBytes(i));const w=Qr.createInternalMessageHeader(new Re(t),new sf(e));return Qr.createCommonMsgInfo(w,f,a)}static createCommonMsgInfo(t,e=null,i=null){const f=new Xe;return f.writeCell(t),e?(f.bits.writeBit(!0),f.bits.writeBit(!0),f.refs.push(e)):f.bits.writeBit(!1),i?f.bits.getFreeBits()>=i.bits.getUsedBits()&&f.refs.length+i.refs.length<=4?(f.bits.writeBit(!1),f.writeCell(i)):(f.bits.writeBit(!0),f.refs.push(i)):f.bits.writeBit(!1),f}static createMethod(t,e){return{getBody:async()=>(await e).body,getQuery:async()=>(await e).message,send:async()=>{const i=await e,f=dr(await i.message.toBoc(!1));return t.sendBoc(f)},estimateFee:async()=>{const i=await e,f=i.code?{address:i.address.toString(!0,!0,!1),body:dr(await i.body.toBoc(!1)),init_code:dr(await i.code.toBoc(!1)),init_data:dr(await i.data.toBoc(!1))}:{address:i.address.toString(!0,!0,!0),body:dr(await i.body.toBoc(!1))};return t.getEstimateFee(f)}}}};var ee={Contract:of};const{Cell:af}=Ft,{Address:lf,BN:X2,bytesToHex:hf}=Bt,{Contract:Di}=ee;let ff=class{constructor(t,e){this.transport=t,this.ton=e,this.ADDRESS_FORMAT_HEX=0,this.ADDRESS_FORMAT_USER_FRIENDLY=1,this.ADDRESS_FORMAT_URL_SAFE=2,this.ADDRESS_FORMAT_BOUNCEABLE=4,this.ADDRESS_FORMAT_TEST_ONLY=8}async getAppConfiguration(){const t=await this.transport.send(224,1,0,0);return{version:""+t[0]+"."+t[1]+"."+t[2]}}async getPublicKey(t,e){const i=Buffer.alloc(4);i.writeInt32BE(t);const f=await this.transport.send(224,2,e?1:0,0,i),a=f[0];return{publicKey:new Uint8Array(f.slice(1,1+a))}}async getAddress(t,e,i){const f=Buffer.alloc(4);f.writeInt32BE(t);const a=await this.transport.send(224,5,e?1:0,i,f),w=a[0],C=new Uint8Array(a.slice(1,1+w));return{address:new lf("0:"+hf(C))}}async sign(t,e){const i=Buffer.alloc(4);i.writeInt32BE(t);const f=Buffer.concat([i,Buffer.from(e)]),a=await this.transport.send(224,3,0,0,f),w=a[0];return{signature:a.slice(1,1+w)}}async transfer(t,e,i,f,a,w){const b=await e.createTransferMessage(null,i,f,a,null,3,!0),A=Buffer.alloc(4);A.writeInt32BE(t);const E=Buffer.concat([A,Buffer.from(await b.signingMessage.toBoc())]),F=await this.transport.send(224,4,w,0,E),S=F[0],_=F.slice(1,1+S),bt=new Uint8Array(_),T=new af;T.bits.writeBytes(bt),T.writeCell(b.signingMessage);let Q=null,et=null,Mt=null;if(a===0){const Zt=await e.createStateInit();Q=Zt.stateInit,et=Zt.code,Mt=Zt.data}const X=await e.getAddress(),At=Di.createExternalMessageHeader(X),_t=Di.createCommonMsgInfo(At,Q,T),Xt=new Promise(Zt=>{Zt({address:X,message:_t,body:T,signature:bt,signingMessage:b.signingMessage,stateInit:Q,code:et,data:Mt})});return Di.createMethod(this.ton.provider,Xt)}};var uf=ff,Ho={},Vo={};const{BN:_i,base64ToBytes:cs}=Bt,{Cell:ds}=Ft;let cf=class Ke{static parseObject(t){const e=t["@type"];switch(e){case"tvm.list":case"tvm.tuple":return t.elements.map(Ke.parseObject);case"tvm.cell":return ds.oneFromBoc(cs(t.bytes));case"tvm.stackEntryCell":return Ke.parseObject(t.cell);case"tvm.stackEntryTuple":return Ke.parseObject(t.tuple);case"tvm.stackEntryNumber":return Ke.parseObject(t.number);case"tvm.numberDecimal":return new _i(t.number,10);default:throw new Error("unknown type "+e)}}static parseResponseStack(t){const e=t[0],i=t[1];switch(e){case"num":return new _i(i.replace(/0x/,""),16);case"list":case"tuple":return Ke.parseObject(i);case"cell":const f=cs(i.bytes);return ds.oneFromBoc(f);default:throw new Error("unknown type "+e)}}static parseResponse(t){if(t.exit_code!==0){const i=new Error("http provider parse response error");throw i.result=t,i}const e=t.stack.map(Ke.parseResponseStack);return e.length===1?e[0]:e}static makeArg(t){if(t instanceof _i||t instanceof Number)return["num",t];throw new Error("unknown arg type "+t)}static makeArgs(t){return t.map(this.makeArg)}};Vo.default=cf;const{Cell:df}=Ft,{base64ToBytes:pf}=Bt,vf=Vo.default;typeof fetch>"u"&&(fetch=bo);const tn="-9223372036854775808";let Ko=class{constructor(t,e){this.host=t||"https://toncenter.com/api/v2/jsonRPC",this.options=e||{}}sendImpl(t,e){const i={"Content-Type":"application/json"};return this.options.apiKey&&(i["X-API-Key"]=this.options.apiKey),fetch(t,{method:"POST",headers:i,body:JSON.stringify(e)}).then(f=>f.json()).then(({result:f,error:a})=>f||Promise.reject(a))}send(t,e){return this.sendImpl(this.host,{id:1,jsonrpc:"2.0",method:t,params:e})}async getAddressInfo(t){return this.send("getAddressInformation",{address:t})}async getExtendedAddressInfo(t){return this.send("getExtendedAddressInformation",{address:t})}async getWalletInfo(t){return this.send("getWalletInformation",{address:t})}async getTransactions(t,e=20,i=void 0,f=void 0,a=void 0,w=void 0){return this.send("getTransactions",{address:t,limit:e,lt:i,hash:f,to_lt:a,archival:w})}async getBalance(t){return this.send("getAddressBalance",{address:t})}async sendBoc(t){return this.send("sendBoc",{boc:t})}async sendQuery(t){return this.send("sendQuerySimple",t)}async getEstimateFee(t){return this.send("estimateFee",t)}async call(t,e,i=[]){return this.send("runGetMethod",{address:t,method:e,stack:i})}async call2(t,e,i=[]){const f=await this.send("runGetMethod",{address:t,method:e,stack:i});return vf.parseResponse(f)}async getConfigParam(t){const e=await this.send("getConfigParam",{config_id:t});if(e["@type"]!=="configInfo")throw new Error("getConfigParam expected type configInfo");if(!e.config)throw new Error("getConfigParam expected config");if(e.config["@type"]!=="tvm.cell")throw new Error("getConfigParam expected type tvm.cell");if(!e.config.bytes)throw new Error("getConfigParam expected bytes");return df.oneFromBoc(pf(e.config.bytes))}async getMasterchainInfo(){return this.send("getMasterchainInfo",{})}async getBlockShards(t){return this.send("shards",{seqno:t})}async getBlockTransactions(t,e,i,f,a,w){return this.send("getBlockTransactions",{workchain:t,shard:e,seqno:i,count:f,after_lt:a,after_hash:w})}async getMasterchainBlockTransactions(t,e,i,f){return this.getBlockTransactions(-1,tn,t,e,i,f)}async getBlockHeader(t,e,i){return this.send("getBlockHeader",{workchain:t,shard:e,seqno:i})}async getMasterchainBlockHeader(t){return this.getBlockHeader(-1,tn,t)}};Ko.SHARD_ID_ALL=tn;Ho.default=Ko;var jo={};const{Contract:Se}=ee,{Cell:Tr}=Ft,{nacl:Nr,stringToBytes:ty,Address:ey,BN:ry}=Bt;let mf=class extends Se{constructor(t,e){if(!e.publicKey&&!e.address)throw new Error("WalletContract required publicKey or address in options");super(t,e),this.methods={transfer:i=>Se.createMethod(t,this.createTransferMessage(i.secretKey,i.toAddress,i.amount,i.seqno,i.payload,i.sendMode,!i.secretKey,i.stateInit,i.expireAt)),transfers:i=>Se.createMethod(t,this.createTransferMessages(i.secretKey,i.seqno,i.messages,!i.secretKey,i.expireAt)),seqno:()=>({call:async()=>{const i=await this.getAddress();let f=null;try{f=(await t.call2(i.toString(),"seqno")).toNumber()}catch{}return f}})},this.deploy=i=>Se.createMethod(t,this.createInitExternalMessage(i))}getName(){throw new Error("override me")}createDataCell(){const t=new Tr;return t.bits.writeUint(0,32),t.bits.writeBytes(this.options.publicKey),t}createSigningMessage(t){t=t||0;const e=new Tr;return e.bits.writeUint(t,32),e}async createInitExternalMessage(t){if(!this.options.publicKey){const F=Nr.sign.keyPair.fromSecretKey(t);this.options.publicKey=F.publicKey}const{stateInit:e,address:i,code:f,data:a}=await this.createStateInit(),w=this.createSigningMessage(),C=Nr.sign.detached(await w.hash(),t),b=new Tr;b.bits.writeBytes(C),b.writeCell(w);const A=Se.createExternalMessageHeader(i),E=Se.createCommonMsgInfo(A,e,b);return{address:i,message:E,body:b,signingMessage:w,stateInit:e,code:f,data:a}}async createExternalMessage(t,e,i,f=!1){const a=f?new Uint8Array(64):Nr.sign.detached(await t.hash(),e),w=new Tr;w.bits.writeBytes(a),w.writeCell(t);let C=null,b=null,A=null;if(i===0){if(!this.options.publicKey){const bt=Nr.sign.keyPair.fromSecretKey(e);this.options.publicKey=bt.publicKey}const _=await this.createStateInit();C=_.stateInit,b=_.code,A=_.data}const E=await this.getAddress(),F=Se.createExternalMessageHeader(E),S=Se.createCommonMsgInfo(F,C,w);return{address:E,message:S,body:w,signature:a,signingMessage:t,stateInit:C,code:b,data:A}}async createTransferMessage(t,e,i,f,a="",w=3,C=!1,b=null,A=void 0){if(f==null||f<0)throw new Error("seqno must be number >= 0");const E=this.createSigningMessage(f,A);return w==null&&(w=3),E.bits.writeUint8(w),E.refs.push(Se.createOutMsg(e,i,a,b)),this.createExternalMessage(E,t,f,C)}async createTransferMessages(t,e,i,f=!1,a=void 0){if(e==null||e<0)throw new Error("seqno must be number >= 0");const w=this.createSigningMessage(e,a);if(i.length<1||i.length>4)throw new Error("put 1-4 messages");for(const C of i){let b=C.sendMode;b==null&&(b=3),w.bits.writeUint8(b),w.refs.push(Se.createOutMsg(C.toAddress,C.amount,C.payload,C.stateInit))}return this.createExternalMessage(w,t,e,f)}};var Ge={WalletContract:mf};const{Cell:Fn}=Ft,{WalletContract:xn}=Ge;let gf=class extends xn{constructor(t,e){e.code=Fn.oneFromBoc("B5EE9C72410101010044000084FF0020DDA4F260810200D71820D70B1FED44D0D31FD3FFD15112BAF2A122F901541044F910F2A2F80001D31F3120D74A96D307D402FB00DED1A4C8CB1FCBFFC9ED5441FDF089"),super(t,e)}getName(){return"simpleR1"}},wf=class extends xn{constructor(t,e){e.code=Fn.oneFromBoc("B5EE9C724101010100530000A2FF0020DD2082014C97BA9730ED44D0D70B1FE0A4F260810200D71820D70B1FED44D0D31FD3FFD15112BAF2A122F901541044F910F2A2F80001D31F3120D74A96D307D402FB00DED1A4C8CB1FCBFFC9ED54D0E2786F"),super(t,e)}getName(){return"simpleR2"}},yf=class extends xn{constructor(t,e){e.code=Fn.oneFromBoc("B5EE9C7241010101005F0000BAFF0020DD2082014C97BA218201339CBAB19C71B0ED44D0D31FD70BFFE304E0A4F260810200D71820D70B1FED44D0D31FD3FFD15112BAF2A122F901541044F910F2A2F80001D31F3120D74A96D307D402FB00DED1A4C8CB1FCBFFC9ED54B5B86E42"),super(t,e)}getName(){return"simpleR3"}};var bf={SimpleWalletContractR1:gf,SimpleWalletContractR2:wf,SimpleWalletContractR3:yf};const{Cell:Sn}=Ft,{WalletContract:Cf}=Ge;class Go extends Cf{createSigningMessage(t,e){t=t||0,e=e||Math.floor(Date.now()/1e3)+60;const i=new Sn;if(i.bits.writeUint(t,32),t===0)for(let f=0;f<32;f++)i.bits.writeBit(1);else i.bits.writeUint(e,32);return i}}let Ef=class extends Go{constructor(t,e){e.code=Sn.oneFromBoc("B5EE9C724101010100570000AAFF0020DD2082014C97BA9730ED44D0D70B1FE0A4F2608308D71820D31FD31F01F823BBF263ED44D0D31FD3FFD15131BAF2A103F901541042F910F2A2F800029320D74A96D307D402FB00E8D1A4C8CB1FCBFFC9ED54A1370BB6"),super(t,e)}getName(){return"v2R1"}},Af=class extends Go{constructor(t,e){e.code=Sn.oneFromBoc("B5EE9C724101010100630000C2FF0020DD2082014C97BA218201339CBAB19C71B0ED44D0D31FD70BFFE304E0A4F2608308D71820D31FD31F01F823BBF263ED44D0D31FD3FFD15131BAF2A103F901541042F910F2A2F800029320D74A96D307D402FB00E8D1A4C8CB1FCBFFC9ED54044CD7A1"),super(t,e)}getName(){return"v2R2"}};var Mf={WalletV2ContractR1:Ef,WalletV2ContractR2:Af};const{BN:Je}=Bt;function Zo(r){if(r.loadBits(512),r.loadUint(32).toNumber()!==698983191)throw new Error("invalid walletId");const e=r.loadUint(32).toNumber(),i=r.loadUint(32).toNumber();if(r.loadUint(8).toNumber()!==3)throw new Error("invalid sendMode");let a=r.loadRef();if(a.loadBit())throw Error("invalid internal header");if(!a.loadBit())throw Error("invalid ihrDisabled");const w=a.loadBit();if(a.loadBit())throw Error("invalid bounced");if(a.loadAddress()!==null)throw Error("invalid externalSourceAddress");const b=a.loadAddress(),A=a.loadCoins();if(a.loadBit())throw Error("invalid currencyCollection");if(!a.loadCoins().eq(new Je(0)))throw new Error("invalid ihrFees");if(!a.loadCoins().eq(new Je(0)))throw new Error("invalid fwdFees");if(!a.loadUint(64).eq(new Je(0)))throw new Error("invalid createdLt");if(!a.loadUint(32).eq(new Je(0)))throw new Error("invalid createdAt");a.loadBit()&&a.loadRef();let bt=null;if(a.getFreeBits()>0&&(a.loadBit()&&(a=a.loadRef()),a.getFreeBits()>32)){const T=a.loadUint(32),Q=a.loadBits(a.getFreeBits());bt=T.eq(new Je(0))?new TextDecoder().decode(Q):""}return{toAddress:b,value:A,bounce:w,seqno:i,expireAt:e,payload:bt}}function Bf(r){const t=r.beginParse();if(t.loadUint(2).toNumber()!==2)throw Error("invalid header");if(t.loadAddress()!==null)throw Error("invalid externalSourceAddress");const i=t.loadAddress();if(!t.loadCoins().eq(new Je(0)))throw new Error("invalid externalImportFee");t.loadBit()&&t.loadBit()&&t.loadRef();const a=t.loadBit()?t.loadRef():t;return{fromAddress:i,...Zo(a)}}var Dn={parseWalletV3TransferQuery:Bf,parseWalletV3TransferBody:Zo};const{Cell:ni}=Ft,{WalletContract:Ff}=Ge,{parseWalletV3TransferQuery:zo,parseWalletV3TransferBody:Yo}=Dn;class Xo extends Ff{createSigningMessage(t,e){t=t||0,e=e||Math.floor(Date.now()/1e3)+60;const i=new ni;if(i.bits.writeUint(this.options.walletId,32),t===0)for(let f=0;f<32;f++)i.bits.writeBit(1);else i.bits.writeUint(e,32);return i.bits.writeUint(t,32),i}createDataCell(){const t=new ni;return t.bits.writeUint(0,32),t.bits.writeUint(this.options.walletId,32),t.bits.writeBytes(this.options.publicKey),t}}let _n=class extends Xo{constructor(t,e){e.code=ni.oneFromBoc("B5EE9C724101010100620000C0FF0020DD2082014C97BA9730ED44D0D70B1FE0A4F2608308D71820D31FD31FD31FF82313BBF263ED44D0D31FD31FD3FFD15132BAF2A15144BAF2A204F901541055F910F2A3F8009320D74A96D307D402FB00E8D101A4C8CB1FCB1FCBFFC9ED543FBE6EE0"),super(t,e),this.options.walletId||(this.options.walletId=698983191+this.options.wc)}getName(){return"v3R1"}};_n.parseTransferQuery=zo;_n.parseTransferBody=Yo;let In=class extends Xo{constructor(t,e){e.code=ni.oneFromBoc("B5EE9C724101010100710000DEFF0020DD2082014C97BA218201339CBAB19F71B0ED44D0D31FD31F31D70BFFE304E0A4F2608308D71820D31FD31FD31FF82313BBF263ED44D0D31FD31FD3FFD15132BAF2A15144BAF2A204F901541055F910F2A3F8009320D74A96D307D402FB00E8D101A4C8CB1FCB1FCBFFC9ED5410BD6DAD"),super(t,e),this.options.walletId||(this.options.walletId=698983191+this.options.wc)}getName(){return"v3R2"}};In.parseTransferQuery=zo;In.parseTransferBody=Yo;var xf={WalletV3ContractR1:_n,WalletV3ContractR2:In};const{Cell:Ii}=Ft,{Contract:uy}=ee,{Address:cy,bytesToHex:dy,BN:py}=Bt,{WalletContract:Sf}=Ge,{parseWalletV3TransferQuery:Df,parseWalletV3TransferBody:_f}=Dn;let Tn=class extends Sf{constructor(t,e){e.code=Ii.oneFromBoc("B5EE9C72410215010002F5000114FF00F4A413F4BCF2C80B010201200203020148040504F8F28308D71820D31FD31FD31F02F823BBF263ED44D0D31FD31FD3FFF404D15143BAF2A15151BAF2A205F901541064F910F2A3F80024A4C8CB1F5240CB1F5230CBFF5210F400C9ED54F80F01D30721C0009F6C519320D74A96D307D402FB00E830E021C001E30021C002E30001C0039130E30D03A4C8CB1F12CB1FCBFF1112131403EED001D0D3030171B0915BE021D749C120915BE001D31F218210706C7567BD228210626C6E63BDB022821064737472BDB0925F03E002FA403020FA4401C8CA07CBFFC9D0ED44D0810140D721F404305C810108F40A6FA131B3925F05E004D33FC8258210706C7567BA9131E30D248210626C6E63BAE30004060708020120090A005001FA00F404308210706C7567831EB17080185005CB0527CF165003FA02F40012CB69CB1F5210CB3F0052F8276F228210626C6E63831EB17080185005CB0527CF1624FA0214CB6A13CB1F5230CB3F01FA02F4000092821064737472BA8E3504810108F45930ED44D0810140D720C801CF16F400C9ED54821064737472831EB17080185004CB0558CF1622FA0212CB6ACB1FCB3F9410345F04E2C98040FB000201200B0C0059BD242B6F6A2684080A06B90FA0218470D4080847A4937D29910CE6903E9FF9837812801B7810148987159F31840201580D0E0011B8C97ED44D0D70B1F8003DB29DFB513420405035C87D010C00B23281F2FFF274006040423D029BE84C600201200F100019ADCE76A26840206B90EB85FFC00019AF1DF6A26840106B90EB858FC0006ED207FA00D4D422F90005C8CA0715CBFFC9D077748018C8CB05CB0222CF165005FA0214CB6B12CCCCC971FB00C84014810108F451F2A702006C810108D718C8542025810108F451F2A782106E6F746570748018C8CB05CB025004CF16821005F5E100FA0213CB6A12CB1FC971FB00020072810108D718305202810108F459F2A7F82582106473747270748018C8CB05CB025005CF16821005F5E100FA0214CB6A13CB1F12CB3FC973FB00000AF400C9ED5446A9F34F"),super(t,e),this.options.walletId||(this.options.walletId=698983191+this.options.wc),this.methods.getPublicKey=this.getPublicKey.bind(this)}getName(){return"v4R1"}createSigningMessage(t,e,i){t=t||0,e=e||Math.floor(Date.now()/1e3)+60;const f=new Ii;if(f.bits.writeUint(this.options.walletId,32),t===0)for(let a=0;a<32;a++)f.bits.writeBit(1);else f.bits.writeUint(e,32);return f.bits.writeUint(t,32),i||f.bits.writeUint(0,8),f}createDataCell(){const t=new Ii;return t.bits.writeUint(0,32),t.bits.writeUint(this.options.walletId,32),t.bits.writeBytes(this.options.publicKey),t.bits.writeUint(0,1),t}async getPublicKey(){const t=await this.getAddress();return this.provider.call2(t.toString(),"get_public_key")}};Tn.parseTransferQuery=Df;Tn.parseTransferBody=_f;var If={WalletV4ContractR1:Tn};const{Cell:Ti}=Ft,{Contract:Ni}=ee,{Address:ps,bytesToHex:Tf,BN:my,toNano:Nf}=Bt,{WalletContract:Rf}=Ge,{parseWalletV3TransferQuery:$f,parseWalletV3TransferBody:Uf}=Dn;let Nn=class extends Rf{constructor(t,e){e.code=Ti.oneFromBoc("B5EE9C72410214010002D4000114FF00F4A413F4BCF2C80B010201200203020148040504F8F28308D71820D31FD31FD31F02F823BBF264ED44D0D31FD31FD3FFF404D15143BAF2A15151BAF2A205F901541064F910F2A3F80024A4C8CB1F5240CB1F5230CBFF5210F400C9ED54F80F01D30721C0009F6C519320D74A96D307D402FB00E830E021C001E30021C002E30001C0039130E30D03A4C8CB1F12CB1FCBFF1011121302E6D001D0D3032171B0925F04E022D749C120925F04E002D31F218210706C7567BD22821064737472BDB0925F05E003FA403020FA4401C8CA07CBFFC9D0ED44D0810140D721F404305C810108F40A6FA131B3925F07E005D33FC8258210706C7567BA923830E30D03821064737472BA925F06E30D06070201200809007801FA00F40430F8276F2230500AA121BEF2E0508210706C7567831EB17080185004CB0526CF1658FA0219F400CB6917CB1F5260CB3F20C98040FB0006008A5004810108F45930ED44D0810140D720C801CF16F400C9ED540172B08E23821064737472831EB17080185005CB055003CF1623FA0213CB6ACB1FCB3FC98040FB00925F03E20201200A0B0059BD242B6F6A2684080A06B90FA0218470D4080847A4937D29910CE6903E9FF9837812801B7810148987159F31840201580C0D0011B8C97ED44D0D70B1F8003DB29DFB513420405035C87D010C00B23281F2FFF274006040423D029BE84C600201200E0F0019ADCE76A26840206B90EB85FFC00019AF1DF6A26840106B90EB858FC0006ED207FA00D4D422F90005C8CA0715CBFFC9D077748018C8CB05CB0222CF165005FA0214CB6B12CCCCC973FB00C84014810108F451F2A7020070810108D718FA00D33FC8542047810108F451F2A782106E6F746570748018C8CB05CB025006CF165004FA0214CB6A12CB1FCB3FC973FB0002006C810108D718FA00D33F305224810108F459F2A782106473747270748018C8CB05CB025005CF165003FA0213CB6ACB1F12CB3FC973FB00000AF400C9ED54696225E5"),super(t,e),this.options.walletId||(this.options.walletId=698983191+this.options.wc),this.methods.deployAndInstallPlugin=i=>Ni.createMethod(t,this.deployAndInstallPlugin(i)),this.methods.installPlugin=i=>Ni.createMethod(t,this.installPlugin(i)),this.methods.removePlugin=i=>Ni.createMethod(t,this.removePlugin(i)),this.methods.getPublicKey=this.getPublicKey.bind(this),this.methods.getWalletId=this.getWalletId.bind(this),this.methods.isPluginInstalled=this.isPluginInstalled.bind(this),this.methods.getPluginsList=this.getPluginsList.bind(this)}getName(){return"v4R2"}createSigningMessage(t,e,i){t=t||0,e=e||Math.floor(Date.now()/1e3)+60;const f=new Ti;if(f.bits.writeUint(this.options.walletId,32),t===0)for(let a=0;a<32;a++)f.bits.writeBit(1);else f.bits.writeUint(e,32);return f.bits.writeUint(t,32),i||f.bits.writeUint(0,8),f}createDataCell(){const t=new Ti;return t.bits.writeUint(0,32),t.bits.writeUint(this.options.walletId,32),t.bits.writeBytes(this.options.publicKey),t.bits.writeUint(0,1),t}async deployAndInstallPlugin(t){const{secretKey:e,seqno:i,pluginWc:f,amount:a,stateInit:w,body:C,expireAt:b}=t,A=this.createSigningMessage(i,b,!0);return A.bits.writeUint(1,8),A.bits.writeInt(f,8),A.bits.writeGrams(a),A.refs.push(w),A.refs.push(C),this.createExternalMessage(A,e,i,!1)}async _setPlugin(t,e){const{secretKey:i,seqno:f,amount:a,queryId:w,expireAt:C}=t,b=new ps(t.pluginAddress),A=this.createSigningMessage(f,C,!0);return A.bits.writeUint(e?2:3,8),A.bits.writeInt(b.wc,8),A.bits.writeBytes(b.hashPart),A.bits.writeGrams(a||Nf("0.1")),A.bits.writeUint(w||0,64),this.createExternalMessage(A,i,f,!1)}async installPlugin(t){return this._setPlugin(t,!0)}async removePlugin(t){return this._setPlugin(t,!1)}async getWalletId(){const t=await this.getAddress();return(await this.provider.call2(t.toString(),"get_subwallet_id")).toNumber()}async getPublicKey(){const t=await this.getAddress();return this.provider.call2(t.toString(),"get_public_key")}async isPluginInstalled(t){t=new ps(t);const e="0x"+Tf(t.hashPart),i=await this.getAddress();return!(await this.provider.call2(i.toString(),"is_plugin_installed",[["num",t.wc],["num",e]])).isZero()}async getPluginsList(){const t=f=>f[0].toNumber()+":"+f[1].toString(16),e=await this.getAddress();return(await this.provider.call2(e.toString(),"get_plugin_list")).map(t)}};Nn.parseTransferQuery=$f;Nn.parseTransferBody=Uf;var Lf={WalletV4ContractR2:Nn};const{Cell:wy}=Ft,{Address:yy,BN:by,toNano:Cy,bytesToHex:Ey,hexToBytes:Ay,nacl:My,stringToBytes:By,bytesToBase64:Fy}=Bt,{Contract:xy}=ee,{SimpleWalletContractR1:Qo,SimpleWalletContractR2:Jo,SimpleWalletContractR3:t0}=bf,{WalletV2ContractR1:e0,WalletV2ContractR2:r0}=Mf,{WalletV3ContractR1:i0,WalletV3ContractR2:n0}=xf,{WalletV4ContractR1:s0}=If,{WalletV4ContractR2:o0}=Lf,a0={simpleR1:Qo,simpleR2:Jo,simpleR3:t0,v2R1:e0,v2R2:r0,v3R1:i0,v3R2:n0,v4R1:s0,v4R2:o0},l0=[Qo,Jo,t0,e0,r0,i0,n0,s0,o0];let Rn=class{constructor(t){this.provider=t,this.all=a0,this.list=l0,this.defaultVersion="v3R1",this.default=this.all[this.defaultVersion]}create(t){return new this.default(this.provider,t)}};Rn.all=a0;Rn.list=l0;jo.default=Rn;var h0={};const{Cell:Rr}=Ft,{Address:Dy,BN:_y,base64ToBytes:vs}=Bt,{WalletContract:Of}=Ge,f0=698983191;let u0=class extends Of{constructor(t,e){e.code=Rr.oneFromBoc("B5EE9C7241021E01000261000114FF00F4A413F4BCF2C80B010201200203020148040501F2F28308D71820D31FD31FD31F802403F823BB13F2F2F003802251A9BA1AF2F4802351B7BA1BF2F4801F0BF9015410C5F9101AF2F4F8005057F823F0065098F823F0062071289320D74A8E8BD30731D4511BDB3C12B001E8309229A0DF72FB02069320D74A96D307D402FB00E8D103A4476814154330F004ED541D0202CD0607020120131402012008090201200F100201200A0B002D5ED44D0D31FD31FD3FFD3FFF404FA00F404FA00F404D1803F7007434C0C05C6C2497C0F83E900C0871C02497C0F80074C7C87040A497C1383C00D46D3C00608420BABE7114AC2F6C2497C338200A208420BABE7106EE86BCBD20084AE0840EE6B2802FBCBD01E0C235C62008087E4055040DBE4404BCBD34C7E00A60840DCEAA7D04EE84BCBD34C034C7CC0078C3C412040DD78CA00C0D0E00130875D27D2A1BE95B0C60000C1039480AF00500161037410AF0050810575056001010244300F004ED540201201112004548E1E228020F4966FA520933023BB9131E2209835FA00D113A14013926C21E2B3E6308003502323287C5F287C572FFC4F2FFFD00007E80BD00007E80BD00326000431448A814C4E0083D039BE865BE803444E800A44C38B21400FE809004E0083D10C06002012015160015BDE9F780188242F847800C02012017180201481B1C002DB5187E006D88868A82609E00C6207E00C63F04EDE20B30020158191A0017ADCE76A268699F98EB85FFC00017AC78F6A268698F98EB858FC00011B325FB513435C2C7E00017B1D1BE08E0804230FB50F620002801D0D3030178B0925B7FE0FA4031FA403001F001A80EDAA4"),super(t,e),this.options.walletId||(this.options.walletId=f0+this.options.wc),this.methods.getPublicKey=this.getPublicKey.bind(this),this.methods.getWalletId=this.getWalletId.bind(this),this.methods.getLiquidBalance=this.getLiquidBalance.bind(this),this.methods.getNominalRestrictedBalance=this.getNominalRestrictedBalance.bind(this),this.methods.getNominalLockedBalance=this.getNominalLockedBalance.bind(this)}getName(){return"lockup-0.1"}createSigningMessage(t,e,i){t=t||0,e=e||Math.floor(Date.now()/1e3)+60;const f=new Rr;if(f.bits.writeUint(this.options.walletId,32),t===0)for(let a=0;a<32;a++)f.bits.writeBit(1);else f.bits.writeUint(e,32);return f.bits.writeUint(t,32),f}createDataCell(){const t=new Rr;return t.bits.writeUint(0,32),t.bits.writeUint(this.options.walletId,32),t.bits.writeBytes(this.options.publicKey),t.bits.writeBytes(vs(this.options.config.config_public_key)),this.options.config.allowed_destinations?(t.bits.writeUint(1,1),t.refs.push(Rr.oneFromBoc(vs(this.options.config.allowed_destinations)))):t.bits.writeUint(0,1),t.bits.writeGrams(0),t.bits.writeUint(0,1),t.bits.writeGrams(0),t.bits.writeUint(0,1),t}async getWalletId(){const t=await this.getAddress();return(await this.provider.call2(t.toString(),"get_subwallet_id")).toNumber()}async getPublicKey(){const t=await this.getAddress();return this.provider.call2(t.toString(),"get_public_key")}async getLiquidBalance(){const t=await this.getBalances();return t[0]-t[1]-t[2]}async getNominalRestrictedBalance(){return await this.getBalances()[1]}async getNominalLockedBalance(){return await this.getBalances()[2]}async getBalances(){const t=await this.getAddress();return this.provider.call2(t.toString(),"get_balances")}};u0.WALLET_ID_BASE=f0;var Pf={LockupWalletV1:u0};const{Address:kf}=Bt,{Cell:qf}=Ft,c0=1,d0=r=>new TextEncoder().encode(encodeURI(r)),Wf=r=>new TextDecoder().decode(r),Hf=r=>{const t=new qf;return t.bits.writeUint(c0,8),t.bits.writeBytes(d0(r)),t},Vf=r=>{if(r.bits.array[0]!==c0)throw new Error("no OFFCHAIN_CONTENT_PREFIX");let t=0,e=r;for(;e;)t+=e.bits.array.length,e=e.refs[0];const i=new Uint8Array(t);for(t=0,e=r;e;)i.set(e.bits.array,t),t+=e.bits.array.length,e=e.refs[0];return Wf(i.slice(1))},ms=(r,t,e)=>{let i=BigInt(0);for(let f=0;f<e;f++)i*=BigInt(2),i+=BigInt(r.get(t+f));return i},p0=r=>{let t=ms(r.bits,3,8);t>BigInt(127)&&(t=t-BigInt(256));const e=ms(r.bits,11,256);if(t.toString(10)+":"+e.toString(16)=="0:0")return null;const i=t.toString(10)+":"+e.toString(16).padStart(64,"0");return new kf(i)},Kf=async(r,t)=>{const e=await r.call2(t,"royalty_params"),i=e[0].toNumber(),f=e[1].toNumber(),a=i/f,w=p0(e[2]);return{royalty:a,royaltyBase:f,royaltyFactor:i,royaltyAddress:w}};var se={parseAddress:p0,serializeUri:d0,createOffchainUriCell:Hf,parseOffchainUriCell:Vf,getRoyaltyParams:Kf};const{Cell:We}=Ft,{Address:pr,BN:De,bytesToHex:jf}=Bt,{WalletContract:Gf}=Ge,{parseAddress:gs}=se,{Contract:Zf}=ee,v0=268,m0="b5ee9c7241021c010003fb000114ff00f4a413f4bcf2c80b01020120030203b8f28308d71820d31fd31fd31f02f823bbf264ed44d0d31fd31fd3ff305abaf2a15033baf2a202f9014033f910f2a3f800db3c20d74ac0018e99ed44ed45ed47915bed67ed65ed648e82db3ced41edf101f2ff9130e2f841a4f861db3c1b1413020148110402012008050201200706020db9846db3cdb3c81b1a0129ba462db3cf845f846f847f848f849f84af84bf84481b0201200e090201620d0a02016a0c0b012fa2c76cf3e9100723281f2fff2743e112040423d029be84c61b000fa25fb513435c2c7e014bad346d9e36fc22470d4080847a4937d29910ce6903e9ff9837812801b7810148987159f318401b02016e100f0019af1df6a26840106b90eb858fc00019adce76a26840206b90eb85ffc003acd06c2220d749c160915be001d0d3030171b0915be0fa4030db3c01d31fd33ff84b5240c705238210a7733acdbab08ea46c12db3c8210f7733acd01708018c8cb055004cf1623fa0213cb6acb1fcb3fc98040fb00e30e1b141201cef84a5240c7050382107258a69bba13b08ed18e2c01fa407fc8ca0002fa4401c8ca07cbffc9d0f8441023810108f441f86420d74ac200209501d430d001deb312e68210f258a69b32708018c8cb055004cf1623fa0213cb6acb1fcb3fc98040fb00db3c925f03e2130066f848f847f846f845c8cb3fcb1fcb1fcb1ff849fa02f84acf16f84bcf16c9f844f843f842f841c8cb1fcb1fcbfff400ccc9ed54025cd307d4d1f823db3c20c2008e9b22c003f2e06421d0d303fa4031fa40f84a5220c705b3925f04e30d9130e201fb001a1503fa21fa4401c8ca07cbffc9d0f844810108f40a6fa1318f5f330172b0c002f2e06501fa003171d721fa0031fa0031d33f31d31f31d30001c000f2e066d3000193d430d0de2171db3c8e2a31d31f302082104e73744bba21821047657424bab121821056744370bab1018210566f7465bab1f2e067e30e70925f03e220c200191716000e9372fb029130e202ea0170db3c8e6d20d749c2008e63d31f21c00022830bbab122811001bab122821047d54391bab1228210595f07bcbab122821069fb306cbab1228210566f7465bab122821056744370bab1f2e06701c00021d749c200b08e15d3073020c06421c077b121c044b101c057b1f2e0689130e29130e2e30d1918001ad31f308210566f7465baf2e067004401fa4401c3ff925b70e001f833206e925b70e0d020d7498307b9925b70e0d70bffba0060f845f846a05210bc923070e0f845f848a05210b99330f849e0f849f849f84513a1f847a904f846f847a9041023a984a1007eed44d0d31f01f861d31f01f862d3ff01f863f40401f864d401d0d33f01f865d31f01f866d31f01f867d31f01f868fa0001f869fa4001f86afa4001f86bd1d10a20c6a7";let $n=class extends Gf{constructor(t,e){e.code=We.oneFromBoc(m0),super(t,e),this.options.walletId||(this.options.walletId=v0+this.options.wc),this.methods.getPublicKey=this.getPublicKey.bind(this),this.methods.getWalletId=this.getWalletId.bind(this),this.methods.getLockedAmount=this.getLockedAmount.bind(this),this.methods.getVestingData=this.getVestingData.bind(this),this.methods.getWhitelist=this.getWhitelist.bind(this)}getName(){return"vesting-1"}createSigningMessage(t,e,i){t=t||0,e=e||Math.floor(Date.now()/1e3)+60;const f=new We;if(f.bits.writeUint(this.options.walletId,32),t===0)for(let a=0;a<32;a++)f.bits.writeBit(1);else f.bits.writeUint(e,32);return f.bits.writeUint(t,32),f}createDataCell(){if(this.options.walletId!==0&&!this.options.walletId)throw new Error("no walletId");if(!this.options.publicKey)throw new Error("no publicKey");if(!(this.options.publicKey instanceof Uint8Array))throw new Error("publicKey not Uint8Array");if(this.options.vestingStartTime!==0&&!this.options.vestingStartTime)throw new Error("no vestingStartTime");if(this.options.vestingTotalDuration<=0)throw new Error("vestingTotalDuration cant be zero or negative");if(!this.options.vestingTotalDuration)throw new Error("no vestingTotalDuration");if(this.options.vestingTotalDuration>2**32-1)throw new Error("vestingTotalDuration > 2^32 - 1");if(this.options.unlockPeriod<=0)throw new Error("unlockPeriod cant be zero or negative");if(!this.options.unlockPeriod)throw new Error("no unlockPeriod");if(this.options.unlockPeriod>this.options.vestingTotalDuration)throw new Error("unlockPeriod > vestingTotalDuration");if(this.options.cliffDuration!==0&&!this.options.cliffDuration)throw new Error("no cliffDuration");if(this.options.cliffDuration<0)throw new Error("cliffDuration cant be negative");if(this.options.cliffDuration>=this.options.vestingTotalDuration)throw new Error("cliffDuration >= vestingTotalDuration");if(!new De(this.options.vestingTotalDuration).div(new De(this.options.unlockPeriod)).mul(new De(this.options.unlockPeriod)).eq(new De(this.options.vestingTotalDuration)))throw new Error("vestingTotalDuration mod unlockPeriod != 0");if(!new De(this.options.cliffDuration).div(new De(this.options.unlockPeriod)).mul(new De(this.options.unlockPeriod)).eq(new De(this.options.cliffDuration)))throw new Error("cliffDuration mod unlockPeriod != 0");if(!this.options.vestingTotalAmount)throw new Error("no vestingTotalAmount");if(!this.options.vestingTotalAmount.gt(new De(0)))throw new Error("vestingTotalAmount cant be zero");if(!this.options.vestingSenderAddress)throw new Error("no vestingSenderAddress");if(!(this.options.vestingSenderAddress instanceof pr))throw new Error("vestingSenderAddress not Address");if(!this.options.ownerAddress)throw new Error("no ownerAddress");if(!(this.options.ownerAddress instanceof pr))throw new Error("ownerAddress not Address");const i=new We;i.bits.writeUint(0,32),i.bits.writeUint(this.options.walletId,32),i.bits.writeUint(new De(jf(this.options.publicKey),16),256),i.bits.writeBit(!1);const f=new We;return f.bits.writeUint(this.options.vestingStartTime,64),f.bits.writeUint(this.options.vestingTotalDuration,32),f.bits.writeUint(this.options.unlockPeriod,32),f.bits.writeUint(this.options.cliffDuration,32),f.bits.writeCoins(this.options.vestingTotalAmount),f.bits.writeAddress(new pr(this.options.vestingSenderAddress)),f.bits.writeAddress(new pr(this.options.ownerAddress)),i.refs[0]=f,i}createAddWhitelistBody(t){const{addresses:e,queryId:i}=t,f=new We;f.bits.writeUint(1918412443,32),f.bits.writeUint(i||0,64),f.bits.writeAddress(e[0]);let a=null;for(let w=e.length-1;w>=1;w--){const C=new We;C.bits.writeAddress(e[w]),a&&(C.refs[0]=a),a=C}return a&&(f.refs[0]=a),f}createInternalTransfer(t){const e=new We;return e.bits.writeUint(2809346765,32),e.bits.writeUint(t.queryId||0,64),e.bits.writeUint8(t.sendMode||3),e.refs.push(Zf.createOutMsg(t.address,t.amount,t.payload)),e}async getPublicKey(){const t=await this.getAddress();return this.provider.call2(t.toString(),"get_public_key")}async getWalletId(){const t=await this.getAddress();return this.provider.call2(t.toString(),"get_subwallet_id")}async getLockedAmount(t){const e=await this.getAddress();return this.provider.call2(e.toString(),"get_locked_amount",[["num",t]])}async getVestingData(){const t=await this.getAddress(),e=await this.provider.call2(t.toString(),"get_vesting_data"),i=e[0].toNumber(),f=e[1].toNumber(),a=e[2].toNumber(),w=e[3].toNumber(),C=e[4],b=gs(e[5]),A=gs(e[6]),E=e[7];return{vestingStartTime:i,vestingTotalDuration:f,unlockPeriod:a,cliffDuration:w,vestingTotalAmount:C,vestingSenderAddress:b,ownerAddress:A,whitelistCell:E}}async getWhitelist(){const t=await this.getAddress(),e=await this.provider.call2(t.toString(),"get_whitelist"),i=[];for(const f of e){if(f.length!==2)throw new Error("invalid whitelist result");const a=f[0],w=f[1],C=new pr(a.toString(10)+":"+w.toString(16).padStart(64,"0"));i.push(C)}return i}};$n.WALLET_ID_BASE=v0;$n.codeHex=m0;var zf={VestingWalletV1:$n};const{LockupWalletV1:Ri}=Pf,{VestingWalletV1:$i}=zf;h0.default={LockupWalletV1:Ri,VestingWalletV1:$i,all:{"lockup-0.1":Ri,"vesting-1":$i},list:[Ri,$i]};var g0={};const{Cell:$r}=Ft,{Contract:vr}=ee,{Address:Ny,BN:Ry,nacl:ws}=Bt,w0="b5ee9c7241021001000228000114ff00f4a413f4bcf2c80b01020120020d02014803040078d020d74bc00101c060b0915be101d0d3030171b0915be0fa4030f828c705b39130e0d31f018210ae42e5a4ba9d8040d721d74cf82a01ed55fb04e030020120050a02027306070011adce76a2686b85ffc00201200809001aabb6ed44d0810122d721d70b3f0018aa3bed44d08307d721d70b1f0201200b0c001bb9a6eed44d0810162d721d70b15800e5b8bf2eda2edfb21ab09028409b0ed44d0810120d721f404f404d33fd315d1058e1bf82325a15210b99f326df82305aa0015a112b992306dde923033e2923033e25230800df40f6fa19ed021d721d70a00955f037fdb31e09130e259800df40f6fa19cd001d721d70a00937fdb31e0915be270801f6f2d48308d718d121f900ed44d0d3ffd31ff404f404d33fd315d1f82321a15220b98e12336df82324aa00a112b9926d32de58f82301de541675f910f2a106d0d31fd4d307d30cd309d33fd315d15168baf2a2515abaf2a6f8232aa15250bcf2a304f823bbf2a35304800df40f6fa199d024d721d70a00f2649130e20e01fe5309800df40f6fa18e13d05004d718d20001f264c858cf16cf8301cf168e1030c824cf40cf8384095005a1a514cf40e2f800c94039800df41704c8cbff13cb1ff40012f40012cb3f12cb15c9ed54f80f21d0d30001f265d3020171b0925f03e0fa4001d70b01c000f2a5fa4031fa0031f401fa0031fa00318060d721d300010f0020f265d2000193d431d19130e272b1fb00b585bf03",y0=4269,Ui=r=>{if(!r)throw new Error("invalid timeout");if(r<60*10)throw new Error("minimum timeout 10 minute");if(r>60*60*24*30)throw new Error("maximum timeout 30 days")};let Un=class extends vr{constructor(t,e){if(e.wc)throw new Error("only basechain (wc = 0) supported");if(e.wc=0,!e.address){if(!e.publicKey)throw new Error("no publicKey");if(!(e.publicKey instanceof Uint8Array))throw new Error("publicKey not Uint8Array");Ui(e.timeout)}e.code=$r.oneFromBoc(w0),super(t,e),this.options.walletId||(this.options.walletId=y0),this.methods={transfer:i=>vr.createMethod(t,this.createTransferMessage(i.secretKey,i.toAddress,i.amount,i.queryId,i.payload,i.sendMode,i.createdAt,i.needDeploy))},this.methods.getPublicKey=this.getPublicKey.bind(this),this.methods.getWalletId=this.getWalletId.bind(this),this.methods.getLastCleanTime=this.getLastCleanTime.bind(this),this.methods.getTimeout=this.getTimeout.bind(this),this.methods.isProcessed=this.isProcessed.bind(this)}getName(){return"highload-3"}createDataCell(){if(this.options.walletId!==0&&!this.options.walletId)throw new Error("no walletId");if(!this.options.publicKey)throw new Error("no publicKey");if(!(this.options.publicKey instanceof Uint8Array))throw new Error("publicKey not Uint8Array");Ui(this.options.timeout);const t=new $r;return t.bits.writeBytes(this.options.publicKey),t.bits.writeUint(this.options.walletId,32),t.bits.writeUint(0,1),t.bits.writeUint(0,1),t.bits.writeUint(0,64),t.bits.writeUint(this.options.timeout,22),t}createSigningMessage(t,e,i,f){if(isNaN(i)||i===void 0||i===null)throw new Error("invalid sendMode");if(isNaN(e)||e===void 0||e===null)throw new Error("invalid createdAt");Ui(this.options.timeout);const a=new $r;return a.bits.writeUint(this.options.walletId,32),a.refs.push(f),a.bits.writeUint(i,8),a.bits.writeUint(Number(t.getShift()),13),a.bits.writeUint(Number(t.getBitNumber()),10),a.bits.writeUint(e,64),a.bits.writeUint(this.options.timeout,22),a}async createTransferMessage(t,e,i,f,a="",w=3,C,b=!1){if(f==null)throw new Error("queryId must be number >= 0");if(C==null||C<0)throw new Error("createAt must be number >= 0");w==null&&(w=3);const A=vr.createOutMsg(e,i,a),E=this.createSigningMessage(f,C,w,A);return this.createExternalMessage(E,t,b)}async createExternalMessage(t,e,i){const f=ws.sign.detached(await t.hash(),e),a=new $r;a.bits.writeBytes(f),a.refs.push(t);let w=null,C=null,b=null;if(i){if(!this.options.publicKey){const _=ws.sign.keyPair.fromSecretKey(e);this.options.publicKey=_.publicKey}const S=await this.createStateInit();w=S.stateInit,C=S.code,b=S.data}const A=await this.getAddress(),E=vr.createExternalMessageHeader(A),F=vr.createCommonMsgInfo(E,w,a);return{address:A,message:F,body:a,signature:f,signingMessage:t,stateInit:w,code:C,data:b}}async getWalletId(){const t=await this.getAddress();return(await this.provider.call2(t.toString(),"get_subwallet_id")).toNumber()}async getPublicKey(){const t=await this.getAddress();return this.provider.call2(t.toString(),"get_public_key")}async getLastCleanTime(){const t=await this.getAddress();return(await this.provider.call2(t.toString(),"get_last_clean_time")).toNumber()}async getTimeout(){const t=await this.getAddress();return(await this.provider.call2(t.toString(),"get_timeout")).toNumber()}async isProcessed(t,e){const i=await this.getAddress();return!(await this.provider.call2(i.toString(),"processed?",[["num",t.getQueryId().toString()],["num",e?"-1":"0"]])).isZero()}};Un.WALLET_ID_BASE=y0;Un.codeHex=w0;var Yf={HighloadWalletContractV3:Un};const ys=10n,Ur=1022n,Lr=8191n;let Xf=class en{constructor(){this.shift=0n,this.bitnumber=0n}static fromShiftAndBitNumber(t,e){const i=new en;if(i.shift=t,i.shift<0)throw new Error("invalid shift");if(i.shift>Lr)throw new Error("invalid shift");if(i.bitnumber=e,i.bitnumber<0)throw new Error("invalid bitnumber");if(i.bitnumber>Ur)throw new Error("invalid bitnumber");return i}getNext(){let t=this.bitnumber+1n,e=this.shift;if(e===Lr&&t>Ur-1n)throw new Error("Overload");if(t>Ur&&(t=0n,e+=1n,e>Lr))throw new Error("Overload");return en.fromShiftAndBitNumber(e,t)}hasNext(){return!(this.bitnumber>=Ur-1n&&this.shift===Lr)}getShift(){return this.shift}getBitNumber(){return this.bitnumber}getQueryId(){return(this.shift<<ys)+this.bitnumber}static fromQueryId(t){const e=t>>ys,i=t&1023n;return this.fromShiftAndBitNumber(e,i)}static fromSeqno(t){const e=t/1023n,i=t%1023n;return this.fromShiftAndBitNumber(e,i)}toSeqno(){return this.bitnumber+this.shift*1023n}};var Qf={HighloadQueryId:Xf};const{HighloadWalletContractV3:Li}=Yf,{HighloadQueryId:Jf}=Qf;g0.default={HighloadQueryId:Jf,HighloadWalletContractV3:Li,all:{"highload-3":Li},list:[Li]};var b0={};const{Contract:tu}=ee,{Cell:oe}=Ft,{Address:Uy,bytesToBase64:eu,BN:ru}=Bt,{parseAddress:bs}=se,{createOffchainUriCell:iu,serializeUri:Cs,parseOffchainUriCell:Es,getRoyaltyParams:nu}=se;let su=class extends tu{constructor(t,e){if(e.wc=0,e.code=e.code||oe.oneFromBoc("B5EE9C724102140100021F000114FF00F4A413F4BCF2C80B0102016202030202CD04050201200E0F04E7D10638048ADF000E8698180B8D848ADF07D201800E98FE99FF6A2687D20699FEA6A6A184108349E9CA829405D47141BAF8280E8410854658056B84008646582A802E78B127D010A65B509E58FE59F80E78B64C0207D80701B28B9E382F970C892E000F18112E001718112E001F181181981E0024060708090201200A0B00603502D33F5313BBF2E1925313BA01FA00D43028103459F0068E1201A44343C85005CF1613CB3FCCCCCCC9ED54925F05E200A6357003D4308E378040F4966FA5208E2906A4208100FABE93F2C18FDE81019321A05325BBF2F402FA00D43022544B30F00623BA9302A402DE04926C21E2B3E6303250444313C85005CF1613CB3FCCCCCCC9ED54002C323401FA40304144C85005CF1613CB3FCCCCCCC9ED54003C8E15D4D43010344130C85005CF1613CB3FCCCCCCC9ED54E05F04840FF2F00201200C0D003D45AF0047021F005778018C8CB0558CF165004FA0213CB6B12CCCCC971FB008002D007232CFFE0A33C5B25C083232C044FD003D0032C03260001B3E401D3232C084B281F2FFF2742002012010110025BC82DF6A2687D20699FEA6A6A182DE86A182C40043B8B5D31ED44D0FA40D33FD4D4D43010245F04D0D431D430D071C8CB0701CF16CCC980201201213002FB5DAFDA89A1F481A67FA9A9A860D883A1A61FA61FF480610002DB4F47DA89A1F481A67FA9A9A86028BE09E008E003E00B01A500C6E"),e.royalty>1)throw new Error("royalty > 1");e.royaltyBase=1e3,e.royaltyFactor=Math.floor(e.royalty*e.royaltyBase),super(t,e),this.methods.getCollectionData=this.getCollectionData.bind(this),this.methods.getNftItemAddressByIndex=this.getNftItemAddressByIndex.bind(this),this.methods.getNftItemContent=this.getNftItemContent.bind(this),this.methods.getRoyaltyParams=this.getRoyaltyParams.bind(this)}createContentCell(t){const e=iu(t.collectionContentUri),i=new oe;i.bits.writeBytes(Cs(t.nftItemContentBaseUri));const f=new oe;return f.refs[0]=e,f.refs[1]=i,f}createRoyaltyCell(t){const e=new oe;return e.bits.writeUint(t.royaltyFactor,16),e.bits.writeUint(t.royaltyBase,16),e.bits.writeAddress(t.royaltyAddress),e}createDataCell(){const t=new oe;return t.bits.writeAddress(this.options.ownerAddress),t.bits.writeUint(0,64),t.refs[0]=this.createContentCell(this.options),t.refs[1]=oe.oneFromBoc(this.options.nftItemCodeHex),t.refs[2]=this.createRoyaltyCell(this.options),t}createMintBody(t){const e=new oe;e.bits.writeUint(1,32),e.bits.writeUint(t.queryId||0,64),e.bits.writeUint(t.itemIndex,64),e.bits.writeCoins(t.amount);const i=new oe;i.bits.writeAddress(t.itemOwnerAddress);const f=new oe;return f.bits.writeBytes(Cs(t.itemContentUri)),i.refs[0]=f,e.refs[0]=i,e}createGetRoyaltyParamsBody(t){const e=new oe;return e.bits.writeUint(1765620048,32),e.bits.writeUint(t.queryId||0,64),e}createChangeOwnerBody(t){if(t.newOwnerAddress===void 0)throw new Error("Specify newOwnerAddress");const e=new oe;return e.bits.writeUint(3,32),e.bits.writeUint(t.queryId||0,64),e.bits.writeAddress(t.newOwnerAddress),e}createEditContentBody(t){if(t.royalty>1)throw new Error("royalty > 1");t.royaltyBase=1e3,t.royaltyFactor=Math.floor(t.royalty*t.royaltyBase);const e=new oe;return e.bits.writeUint(4,32),e.bits.writeUint(t.queryId||0,64),e.refs[0]=this.createContentCell(t),e.refs[1]=this.createRoyaltyCell(t),e}async getCollectionData(){const t=await this.getAddress(),e=await this.provider.call2(t.toString(),"get_collection_data"),i=e[0];let f=NaN;try{f=i.toNumber()}catch{}const a=e[1];let w=null;try{w=Es(a)}catch{}const C=bs(e[2]);return{nextItemIndex:f,itemsCount:i,ownerAddress:C,collectionContentCell:a,collectionContentUri:w}}async getNftItemContent(t){const e=await this.getAddress(),i=await t.getData();if(i.isInitialized){const f=await this.provider.call2(e.toString(),"get_nft_content",[["num",i.itemIndex.toString(10)],["tvm.Cell",eu(await i.contentCell.toBoc(!1))]]);i.contentUri=null;try{i.contentUri=Es(f)}catch{}}return i}async getNftItemAddressByIndex(t){t=new ru(t);const e=await this.getAddress(),i=await this.provider.call2(e.toString(),"get_nft_address_by_index",[["num",t.toString(10)]]);return bs(i)}async getRoyaltyParams(){const t=await this.getAddress();return nu(this.provider,t.toString())}};var ou={NftCollection:su};const{Contract:au}=ee,{Cell:Or}=Ft,{Address:Oy,BN:lu}=Bt,{parseAddress:As,getRoyaltyParams:hu}=se,{parseOffchainUriCell:fu}=se,C0="B5EE9C7241020D010001D0000114FF00F4A413F4BCF2C80B0102016202030202CE04050009A11F9FE00502012006070201200B0C02D70C8871C02497C0F83434C0C05C6C2497C0F83E903E900C7E800C5C75C87E800C7E800C3C00812CE3850C1B088D148CB1C17CB865407E90350C0408FC00F801B4C7F4CFE08417F30F45148C2EA3A1CC840DD78C9004F80C0D0D0D4D60840BF2C9A884AEB8C097C12103FCBC20080900113E910C1C2EBCB8536001F65135C705F2E191FA4021F001FA40D20031FA00820AFAF0801BA121945315A0A1DE22D70B01C300209206A19136E220C2FFF2E192218E3E821005138D91C85009CF16500BCF16712449145446A0708010C8CB055007CF165005FA0215CB6A12CB1FCB3F226EB39458CF17019132E201C901FB00104794102A375BE20A00727082108B77173505C8CBFF5004CF1610248040708010C8CB055007CF165005FA0215CB6A12CB1FCB3F226EB39458CF17019132E201C901FB000082028E3526F0018210D53276DB103744006D71708010C8CB055007CF165005FA0215CB6A12CB1FCB3F226EB39458CF17019132E201C901FB0093303234E25502F003003B3B513434CFFE900835D27080269FC07E90350C04090408F80C1C165B5B60001D00F232CFD633C58073C5B3327B5520BF75041B";let E0=class extends au{constructor(t,e){e.wc=0,e.code=e.code||Or.oneFromBoc(C0),super(t,e),this.methods.getData=this.getData.bind(this)}createDataCell(){const t=new Or;return t.bits.writeUint(this.options.index,64),t.bits.writeAddress(this.options.collectionAddress),t}async getData(){const t=await this.getAddress(),e=await this.provider.call2(t.toString(),"get_nft_data"),i=e[0].toNumber()===-1,f=e[1];let a=NaN;try{a=f.toNumber()}catch{}const w=As(e[2]),C=i?As(e[3]):null,b=e[4];let A=null;try{A=i&&w===null?fu(b):null}catch{}return{isInitialized:i,index:a,itemIndex:f,collectionAddress:w,ownerAddress:C,contentCell:b,contentUri:A}}async createTransferBody(t){const e=new Or;return e.bits.writeUint(1607220500,32),e.bits.writeUint(t.queryId||0,64),e.bits.writeAddress(t.newOwnerAddress),e.bits.writeAddress(t.responseAddress),e.bits.writeBit(!1),e.bits.writeCoins(t.forwardAmount||new lu(0)),t.forwardPayload?t.forwardPayload.refs?(e.bits.writeBit(!0),e.refs.push(t.forwardPayload)):(e.bits.writeBit(!1),e.bits.writeBytes(t.forwardPayload)):e.bits.writeBit(!1),e}createGetStaticDataBody(t){const e=new Or;return e.bits.writeUint(801842850,32),e.bits.writeUint(t.queryId||0,64),e}async getRoyaltyParams(){const t=await this.getAddress();return hu(this.provider,t.toString())}};E0.codeHex=C0;var uu={NftItem:E0};const{Contract:cu}=ee,{Cell:Ms}=Ft,{Address:ky}=Bt,{parseAddress:qy}=se;let du=class extends cu{constructor(t,e){e.wc=0,e.code=e.code||Ms.oneFromBoc("B5EE9C7241010401006D000114FF00F4A413F4BCF2C80B01020120020300AAD23221C700915BE0D0D3030171B0915BE0FA40ED44D0FA403012C705F2E19101D31F01C0018E2BFA003001D4D43021F90070C8CA07CBFFC9D077748018C8CB05CB0258CF165004FA0213CB6BCCCCC971FB00915BE20004F2308EF7CCE7"),super(t,e)}createDataCell(){const t=new Ms;return t.bits.writeAddress(this.options.ownerAddress),t}};var pu={NftMarketplace:du};const{Contract:vu}=ee,{Cell:Pr}=Ft,{parseAddress:kr}=se,{BN:Hy}=Bt,A0="B5EE9C7241020A010001B4000114FF00F4A413F4BCF2C80B01020120020302014804050004F2300202CD0607002FA03859DA89A1F481F481F481F401A861A1F401F481F4006101F7D00E8698180B8D8492F82707D201876A2687D207D207D207D006A18116BA4E10159C71D991B1B2990E382C92F837028916382F970FA01698FC1080289C6C8895D7970FAE99F98FD2018201A642802E78B2801E78B00E78B00FD016664F6AA701363804C9B081B2299823878027003698FE99F9810E000C92F857010C0801F5D41081DCD650029285029185F7970E101E87D007D207D0018384008646582A804E78B28B9D090D0A85AD08A500AFD010AE5B564B8FD80384008646582AC678B2803FD010B65B564B8FD80384008646582A802E78B00FD0109E5B564B8FD80381041082FE61E8A10C00C646582A802E78B117D010A65B509E58F8A40900C8C0029A3110471036454012F004E032363704C0038E4782103B9ACA0015BEF2E1C95312C70559C705B1F2E1CA702082105FCC3D14218010C8CB055006CF1622FA0215CB6A14CB1F14CB3F21CF1601CF16CA0021FA02CA00C98100A0FB00E05F06840FF2F0002ACB3F22CF1658CF16CA0021FA02CA00C98100A0FB00AECABAD1";let M0=class extends vu{constructor(t,e){e.wc=0,e.code=e.code||Pr.oneFromBoc(A0),super(t,e),this.methods.getData=this.getData.bind(this)}createDataCell(){const t=new Pr;t.bits.writeAddress(this.options.marketplaceAddress),t.bits.writeAddress(this.options.nftAddress),t.bits.writeAddress(null),t.bits.writeCoins(this.options.fullPrice);const e=new Pr;return e.bits.writeCoins(this.options.marketplaceFee),e.bits.writeAddress(this.options.royaltyAddress),e.bits.writeCoins(this.options.royaltyAmount),t.refs[0]=e,t}async getData(){const t=await this.getAddress(),e=await this.provider.call2(t.toString(),"get_sale_data"),i=kr(e[0]),f=kr(e[1]),a=kr(e[2]),w=e[3],C=e[4],b=kr(e[5]),A=e[6];return{marketplaceAddress:i,nftAddress:f,nftOwnerAddress:a,fullPrice:w,marketplaceFee:C,royaltyAddress:b,royaltyAmount:A}}async createCancelBody(t){const e=new Pr;return e.bits.writeUint(3,32),e.bits.writeUint(t.queryId||0,64),e}};M0.codeHex=A0;var mu={NftSale:M0};const{NftCollection:gu}=ou,{NftItem:wu}=uu,{NftMarketplace:yu}=pu,{NftSale:bu}=mu;b0.default={NftCollection:gu,NftItem:wu,NftMarketplace:yu,NftSale:bu};var B0={};const{Contract:Cu}=ee,{Cell:$e}=Ft,{createOffchainUriCell:Bs,parseOffchainUriCell:Eu,parseAddress:Fs}=se,{Address:Ky,BN:Au,bytesToBase64:Mu}=Bt;let Bu=class extends Cu{constructor(t,e){e.wc=0,e.code=e.code||$e.oneFromBoc("B5EE9C7241020B010001ED000114FF00F4A413F4BCF2C80B0102016202030202CC040502037A60090A03EFD9910E38048ADF068698180B8D848ADF07D201800E98FE99FF6A2687D007D206A6A18400AA9385D47181A9AA8AAE382F9702480FD207D006A18106840306B90FD001812881A28217804502A906428027D012C678B666664F6AA7041083DEECBEF29385D71811A92E001F1811802600271812F82C207F97840607080093DFC142201B82A1009AA0A01E428027D012C678B00E78B666491646580897A007A00658064907C80383A6465816503E5FFE4E83BC00C646582AC678B28027D0109E5B589666664B8FD80400FE3603FA00FA40F82854120870542013541403C85004FA0258CF1601CF16CCC922C8CB0112F400F400CB00C9F9007074C8CB02CA07CBFFC9D05008C705F2E04A12A1035024C85004FA0258CF16CCCCC9ED5401FA403020D70B01C3008E1F8210D53276DB708010C8CB055003CF1622FA0212CB6ACB1FCB3FC98042FB00915BE200303515C705F2E049FA403059C85004FA0258CF16CCCCC9ED54002E5143C705F2E049D43001C85004FA0258CF16CCCCC9ED54007DADBCF6A2687D007D206A6A183618FC1400B82A1009AA0A01E428027D012C678B00E78B666491646580897A007A00658064FC80383A6465816503E5FFE4E840001FAF16F6A2687D007D206A6A183FAA904051007F09"),super(t,e)}createDataCell(){const t=new $e;return t.bits.writeCoins(0),t.bits.writeAddress(this.options.adminAddress),t.refs[0]=Bs(this.options.jettonContentUri),t.refs[1]=$e.oneFromBoc(this.options.jettonWalletCodeHex),t}createMintBody(t){const e=new $e;e.bits.writeUint(21,32),e.bits.writeUint(t.queryId||0,64),e.bits.writeAddress(t.destination),e.bits.writeCoins(t.amount);const i=new $e;return i.bits.writeUint(395134233,32),i.bits.writeUint(t.queryId||0,64),i.bits.writeCoins(t.jettonAmount),i.bits.writeAddress(null),i.bits.writeAddress(null),i.bits.writeCoins(new Au(0)),i.bits.writeBit(!1),e.refs[0]=i,e}createChangeAdminBody(t){if(t.newAdminAddress===void 0)throw new Error("Specify newAdminAddress");const e=new $e;return e.bits.writeUint(3,32),e.bits.writeUint(t.queryId||0,64),e.bits.writeAddress(t.newAdminAddress),e}createEditContentBody(t){const e=new $e;return e.bits.writeUint(4,32),e.bits.writeUint(t.queryId||0,64),e.refs[0]=Bs(t.jettonContentUri),e}async getJettonData(){const t=await this.getAddress(),e=await this.provider.call2(t.toString(),"get_jetton_data"),i=e[0],f=e[1].toNumber()===-1,a=Fs(e[2]),w=e[3];let C=null;try{C=Eu(w)}catch{}const b=e[4];return{totalSupply:i,isMutable:f,adminAddress:a,jettonContentCell:w,jettonContentUri:C,jettonWalletCode:b}}async getJettonWalletAddress(t){const e=await this.getAddress(),i=new $e;i.bits.writeAddress(t);const f=await this.provider.call2(e.toString(),"get_wallet_address",[["tvm.Slice",Mu(await i.toBoc(!1))]]);return Fs(f)}};var Fu={JettonMinter:Bu};const{Contract:xu}=ee,{Cell:Oi}=Ft,{parseAddress:xs}=se,{BN:Su}=Bt,F0="B5EE9C7241021201000328000114FF00F4A413F4BCF2C80B0102016202030202CC0405001BA0F605DA89A1F401F481F481A8610201D40607020148080900BB0831C02497C138007434C0C05C6C2544D7C0FC02F83E903E900C7E800C5C75C87E800C7E800C00B4C7E08403E29FA954882EA54C4D167C0238208405E3514654882EA58C511100FC02780D60841657C1EF2EA4D67C02B817C12103FCBC2000113E910C1C2EBCB853600201200A0B020120101101F500F4CFFE803E90087C007B51343E803E903E90350C144DA8548AB1C17CB8B04A30BFFCB8B0950D109C150804D50500F214013E809633C58073C5B33248B232C044BD003D0032C032483E401C1D3232C0B281F2FFF274013E903D010C7E801DE0063232C1540233C59C3E8085F2DAC4F3208405E351467232C7C6600C03F73B51343E803E903E90350C0234CFFE80145468017E903E9014D6F1C1551CDB5C150804D50500F214013E809633C58073C5B33248B232C044BD003D0032C0327E401C1D3232C0B281F2FFF274140371C1472C7CB8B0C2BE80146A2860822625A020822625A004AD822860822625A028062849F8C3C975C2C070C008E00D0E0F009ACB3F5007FA0222CF165006CF1625FA025003CF16C95005CC2391729171E25008A813A08208989680AA008208989680A0A014BCF2E2C504C98040FB001023C85004FA0258CF1601CF16CCC9ED5400705279A018A182107362D09CC8CB1F5230CB3F58FA025007CF165007CF16C9718018C8CB0524CF165006FA0215CB6A14CCC971FB0010241023000E10491038375F040076C200B08E218210D53276DB708010C8CB055008CF165004FA0216CB6A12CB1F12CB3FC972FB0093356C21E203C85004FA0258CF1601CF16CCC9ED5400DB3B51343E803E903E90350C01F4CFFE803E900C145468549271C17CB8B049F0BFFCB8B0A0822625A02A8005A805AF3CB8B0E0841EF765F7B232C7C572CFD400FE8088B3C58073C5B25C60063232C14933C59C3E80B2DAB33260103EC01004F214013E809633C58073C5B3327B55200083200835C87B51343E803E903E90350C0134C7E08405E3514654882EA0841EF765F784EE84AC7CB8B174CFCC7E800C04E81408F214013E809633C58073C5B3327B55205ECCF23D";let x0=class extends xu{constructor(t,e){e.wc=0,e.code=e.code||Oi.oneFromBoc(F0),super(t,e)}async createTransferBody(t){const e=new Oi;return e.bits.writeUint(260734629,32),e.bits.writeUint(t.queryId||0,64),e.bits.writeCoins(t.jettonAmount),e.bits.writeAddress(t.toAddress),e.bits.writeAddress(t.responseAddress),e.bits.writeBit(!1),e.bits.writeCoins(t.forwardAmount||new Su(0)),t.forwardPayload?t.forwardPayload.refs?(e.bits.writeBit(!0),e.refs.push(t.forwardPayload)):(e.bits.writeBit(!1),e.bits.writeBytes(t.forwardPayload)):e.bits.writeBit(!1),e}async createBurnBody(t){const e=new Oi;return e.bits.writeUint(1499400124,32),e.bits.writeUint(t.queryId||0,64),e.bits.writeCoins(t.jettonAmount),e.bits.writeAddress(t.responseAddress),e}async getData(){const t=await this.getAddress(),e=await this.provider.call2(t.toString(),"get_wallet_data"),i=e[0],f=xs(e[1]),a=xs(e[2]),w=e[3];return{balance:i,ownerAddress:f,jettonMinterAddress:a,jettonWalletCode:w}}};x0.codeHex=F0;var Du={JettonWallet:x0};const{JettonMinter:_u}=Fu,{JettonWallet:Iu}=Du;B0.default={JettonMinter:_u,JettonWallet:Iu};const Tu=10*1e3,Nu=1*1e3,Ss=r=>({workchain:r.workchain,shardId:r.shard,shardBlockNumber:r.seqno});let Ru=class{constructor(t,e,i,f){this.provider=t,this.storage=e,this.onBlock=i,this.startMcBlockNumber=f?f.startMcBlockNumber:void 0,this.mcInterval=(f?f.mcInterval:void 0)||Tu,this.shardsInterval=(f?f.shardsInterval:void 0)||Nu}async start(){if(this.stop(),!this.startMcBlockNumber&&(this.startMcBlockNumber=(await this.provider.getMasterchainInfo()).last.seqno,!this.startMcBlockNumber))throw new Error("Cannot get start mc block number from provider");const t=await this.provider.getMasterchainBlockHeader(this.startMcBlockNumber);if(this.startLT=t.end_lt,!this.startLT)throw new Error("Cannot get startLT from provider");let e=!1;const i=async()=>{if(!e){e=!0;try{const w=await this.storage.getLastMasterchainBlockNumber()||this.startMcBlockNumber;if(!w)throw new Error("no init masterchain block in storage");const C=(await this.provider.getMasterchainInfo()).last.seqno;if(!C)throw new Error("invalid last masterchain block from provider");for(let b=w+1;b<C;b++){const A=await this.provider.getBlockShards(b),E=await this.provider.getMasterchainBlockHeader(b);await this.onBlock(E,A),await this.storage.insertBlocks(b,A.shards.map(Ss))}}catch(w){console.error(w)}e=!1}};this.mcIntervalId=setInterval(()=>i(),this.mcInterval),i();let f=!1;const a=async()=>{if(!f){f=!0;try{const w=await this.storage.getUnprocessedShardBlock();if(w){const{workchain:C,shardId:b,shardBlockNumber:A}=w,E=await this.provider.getBlockHeader(C,b,A);if(E.end_lt<this.startLT)await this.storage.setBlockProcessed(C,b,A,[]);else{await this.onBlock(E);const F=E.prev_blocks.map(Ss);await this.storage.setBlockProcessed(C,b,A,F)}}}catch(w){console.log(w)}f=!1}};this.shardsIntervalId=setInterval(()=>a(),this.shardsInterval)}stop(){clearInterval(this.mcIntervalId),clearInterval(this.shardsIntervalId)}};var $u={BlockSubscription:Ru};let Uu=class{constructor(t){this.masterchainBlocks={},this.shardchainBlocks={},this.logFunction=t}async insertShardBlocks(t){for(const{workchain:e,shardId:i,shardBlockNumber:f}of t)this.shardchainBlocks[e+"_"+i+"_"+f]===void 0&&(this.logFunction&&this.logFunction("insert shard "+e+" "+i+" "+f),this.shardchainBlocks[e+"_"+i+"_"+f]=!1)}async insertBlocks(t,e){if(this.logFunction&&this.logFunction("mc processed "+t),this.masterchainBlocks[t]!==void 0)throw new Error("mc already exists "+t);this.masterchainBlocks[t]=!0,await this.insertShardBlocks(e)}async getLastMasterchainBlockNumber(){return Object.keys(this.masterchainBlocks).map(e=>Number(e)).sort((e,i)=>i-e)[0]}async setBlockProcessed(t,e,i,f){if(this.logFunction&&this.logFunction("shard processed "+t+" "+e+" "+i),this.shardchainBlocks[t+"_"+e+"_"+i]===void 0)throw new Error("shard not exists "+t+"_"+e+"_"+i);this.shardchainBlocks[t+"_"+e+"_"+i]=!0,await this.insertShardBlocks(f)}async getUnprocessedShardBlock(){for(let t in this.shardchainBlocks)if(this.shardchainBlocks[t]===!1){const e=t.split("_");return{workchain:Number(e[0]),shardId:e[1],shardBlockNumber:Number(e[2])}}}};var Lu={InMemoryBlockStorage:Uu};const{BlockSubscription:Ou}=$u,{InMemoryBlockStorage:Pu}=Lu;var ku={BlockSubscription:Ou,InMemoryBlockStorage:Pu};const{Contract:qr}=ee,{Cell:mr}=Ft,{hexToBytes:Yy,BN:Ds,nacl:Xy,bytesToBase64:Qy}=Bt;let qu=class extends qr{constructor(t,e){e.code=mr.oneFromBoc("B5EE9C7241020F01000262000114FF00F4A413F4BCF2C80B0102012002030201480405036AF230DB3C5335A127A904F82327A128A90401BC5135A0F823B913B0F29EF800725210BE945387F0078E855386DB3CA4E2F82302DB3C0B0C0D0202CD06070121A0D0C9B67813F488DE0411F488DE0410130B048FD6D9E05E8698198FD201829846382C74E2F841999E98F9841083239BA395D497803F018B841083AB735BBED9E702984E382D9C74688462F863841083AB735BBED9E70156BA4E09040B0A0A080269F10FD22184093886D9E7C12C1083239BA39384008646582A803678B2801FD010A65B5658F89659FE4B9FD803FC1083239BA396D9E40E0A04F08E8D108C5F0C708210756E6B77DB3CE00AD31F308210706C7567831EB15210BA8F48305324A126A904F82326A127A904BEF27109FA4430A619F833D078D721D70B3F5260A11BBE8E923036F82370708210737562732759DB3C5077DE106910581047103645135042DB3CE0395F076C2232821064737472BA0A0A0D09011A8E897F821064737472DB3CE0300A006821B39982100400000072FB02DE70F8276F118010C8CB055005CF1621FA0214F40013CB6912CB1F830602948100A032DEC901FB000030ED44D0FA40FA40FA00D31FD31FD31FD31FD31FD307D31F30018021FA443020813A98DB3C01A619F833D078D721D70B3FA070F8258210706C7567228018C8CB055007CF165004FA0215CB6A12CB1F13CB3F01FA02CB00C973FB000E0040C8500ACF165008CF165006FA0214CB1F12CB1FCB1FCB1FCB1FCB07CB1FC9ED54005801A615F833D020D70B078100D1BA95810088D721DED307218100DDBA028100DEBA12B1F2E047D33F30A8AB0FE5855AB4"),super(t,e),this.methods.pay=()=>qr.createMethod(t,this.createPayExternalMessage()),this.methods.getSubscriptionData=this.getSubscriptionData.bind(this)}createDataCell(){const t=new mr;return t.bits.writeAddress(this.options.wallet),t.bits.writeAddress(this.options.beneficiary),t.bits.writeGrams(this.options.amount),t.bits.writeUint(this.options.period,32),t.bits.writeUint(this.options.startAt,32),t.bits.writeUint(this.options.timeout,32),t.bits.writeUint(0,32),t.bits.writeUint(0,32),t.bits.writeUint(0,8),t.bits.writeUint(this.options.subscriptionId,32),t}createBody(){const t=new mr;return t.bits.writeUint(new Ds(1886156135).add(new Ds(2147483648)),32),t}createSelfDestructBody(){const t=new mr;return t.bits.writeUint(1685288050,32),t}async getSubscriptionData(){const t=bt=>bt[0].toNumber()+":"+bt[1].toString(16),e=await this.getAddress(),i=await this.provider.call2(e.toString(),"get_subscription_data"),f=t(i[0]),a=t(i[1]),w=i[2],C=i[3].toNumber(),b=i[4].toNumber(),A=i[5].toNumber(),E=i[6].toNumber(),F=i[7].toNumber(),S=i[8].toNumber(),_=i[9].toNumber();return{wallet:f,beneficiary:a,amount:w,period:C,startAt:b,timeout:A,lastPayment:E,lastRequest:F,failedAttempts:S,subscriptionId:_}}async createPayExternalMessage(){const t=await this.getAddress(),e=qr.createExternalMessageHeader(t),i=qr.createCommonMsgInfo(e,null,null),f=new mr;return f.bits.writeUint(Math.floor(Date.now()/1e3),64),{address:t,message:i,body:f}}};var Wu={SubscriptionContract:qu};const{Cell:re}=Ft,Hu=(r,t)=>{if(t.length!==256/8)throw new Error("invalid publicKey length");r.bits.writeBytes(t)},di=(r,t)=>{if(t.length!==512/8)throw new Error("invalid signature length");r.bits.writeBytes(t)},rn=r=>{const t=new re;return di(t,r),t},S0=(r,t)=>{if(t){if(r.bits.writeBit(1),r.refs.length>=4)throw new Error("refs overflow");r.refs.push(t)}else r.bits.writeBit(0)},D0=S0,_0=1768843636,I0=1131179891,T0=1128492404,N0=1433289580,R0=1130915665,$0=1131168622,U0=1130910580,L0=1741148801,Vu=235282626,Ku=1433884798,ju=2040604399,Gu=521476815,Zu=143567410,zu=1727459433,O0=625158801,Yu=-572749638,Xu=r=>{const t=new re;return t.bits.writeUint(L0,32),t.bits.writeCoins(r.coinsA),t.bits.writeCoins(r.coinsB),t},Qu=r=>{const t=new re;return t.bits.writeUint(_0,32),t.bits.writeUint(r.channelId,128),t.bits.writeCoins(r.balanceA),t.bits.writeCoins(r.balanceB),t},Ju=r=>{const t=new re;return t.bits.writeUint(I0,32),t.bits.writeUint(r.channelId,128),t.bits.writeCoins(r.balanceA),t.bits.writeCoins(r.balanceB),t.bits.writeUint(r.seqnoA,64),t.bits.writeUint(r.seqnoB,64),t},tc=r=>{const t=new re;return t.bits.writeUint(T0,32),t.bits.writeUint(r.channelId,128),t.bits.writeUint(r.seqnoA,64),t.bits.writeUint(r.seqnoB,64),t},ec=r=>{const t=new re;return t.bits.writeCoins(r.amount),t.writeCell(r.condition),t},rc=r=>{const t=new re;return t.bits.writeUint(r.seqno,64),t.bits.writeCoins(r.sentCoins),D0(t,r.conditionals),t},ic=r=>{const t=new re;return t.bits.writeUint(U0,32),t.bits.writeUint(r.channelId,128),t.writeCell(r.semiChannelBody),S0(t,r.counterpartySemiChannelBody),t},nc=r=>{const t=new re;return di(t,r.signature),t.writeCell(r.state),t},sc=r=>{const t=new re;return t.bits.writeUint(N0,32),t.bits.writeUint(r.channelId,128),t.refs[0]=r.signedSemiChannelStateA,t.refs[1]=r.signedSemiChannelStateB,t},oc=r=>{const t=new re;return t.bits.writeUint(R0,32),t.bits.writeUint(r.channelId,128),t.refs[0]=r.signedSemiChannelStateA,t.refs[1]=r.signedSemiChannelStateB,t},ac=r=>{const t=new re;return t.bits.writeUint($0,32),t.bits.writeUint(r.channelId,128),D0(t,r.conditionalsToSettle),t},lc=()=>{const r=new re;return r.bits.writeUint(O0,32),r},hc=r=>{const t=new re;return t.bits.writeUint(r.op,32),t.bits.writeBit(r.isA),di(t,r.signature),t.writeCell(r.cell),t},fc=r=>{const t=new re;return t.bits.writeUint(r.op,32),t.refs[0]=rn(r.signatureA),t.refs[1]=rn(r.signatureB),t.writeCell(r.cell),t};var uc={writePublicKey:Hu,writeSignature:di,createSignatureCell:rn,tag_init:_0,tag_cooperative_close:I0,tag_cooperative_commit:T0,tag_start_uncooperative_close:N0,tag_challenge_state:R0,tag_settle_conditionals:$0,tag_state:U0,op_top_up_balance:L0,op_init_channel:Vu,op_cooperative_close:Ku,op_cooperative_commit:ju,op_start_uncooperative_close:Gu,op_challenge_quarantined_state:Zu,op_settle_conditionals:zu,op_finish_uncooperative_close:O0,op_channel_closed:Yu,createTopUpBalance:Xu,createInitChannelBody:Qu,createCooperativeCloseChannelBody:Ju,createCooperativeCommitBody:tc,createConditionalPayment:ec,createSemiChannelBody:rc,createSemiChannelState:ic,createSignedSemiChannelState:nc,createStartUncooperativeCloseBody:sc,createChallengeQuarantinedStateBody:oc,createSettleConditionalsBody:ac,createFinishUncooperativeClose:lc,createOneSignature:hc,createTwoSignature:fc};const{Contract:cc}=ee,{Cell:Wr}=Ft,{nacl:gr,hexToBytes:dc,BN:Qe}=Bt,{parseAddress:_s}=se,{writePublicKey:Is,writeSignature:t3,createSignatureCell:e3,tag_init:r3,tag_cooperative_close:i3,tag_cooperative_commit:n3,tag_start_uncooperative_close:s3,tag_challenge_state:o3,tag_settle_conditionals:a3,tag_state:l3,op_top_up_balance:h3,op_init_channel:pc,op_cooperative_close:vc,op_cooperative_commit:mc,op_start_uncooperative_close:gc,op_challenge_quarantined_state:wc,op_settle_conditionals:yc,op_finish_uncooperative_close:f3,op_channel_closed:u3,createTopUpBalance:bc,createInitChannelBody:Cc,createCooperativeCloseChannelBody:Ts,createCooperativeCommitBody:Ec,createConditionalPayment:c3,createSemiChannelBody:Hr,createSemiChannelState:Ns,createSignedSemiChannelState:Ac,createStartUncooperativeCloseBody:Mc,createChallengeQuarantinedStateBody:Bc,createSettleConditionalsBody:Fc,createFinishUncooperativeClose:xc,createOneSignature:Sc,createTwoSignature:Dc}=uc,P0="B5EE9C72410230010007FB000114FF00F4A413F4BCF2C80B0102012002030201480405000AF26C21F0190202CB06070201202E2F020120080902012016170201200A0B0201200C0D0009D3610F80CC001D6B5007434C7FE8034C7CC1BC0FE19E0201580E0F0201201011002D3E11DBC4BE11DBC43232C7FE11DBC47E80B2C7F2407320008B083E1B7B51343480007E187E80007E18BE80007E18F4FFC07E1934FFC07E1974DFC07E19BC01887080A7F4C7C07E1A34C7C07E1A7D01007E1AB7807080E535007E1AF7BE1B2002012012130201201415008D3E13723E11BE117E113E10540132803E10BE80BE10FE8084F2FFC4B2FFF2DFFC02887080A7FE12BE127E121400F2C7C4B2C7FD0037807080E53E12C073253E1333C5B8B27B5520004D1C3C02FE106CFCB8193E803E800C3E1096283E18BE10C0683E18FE10BE10E8006EFCB819BC032000CF1D3C02FE106CFCB819348020C235C6083E4040E4BE1124BE117890CC3E443CB81974C7C060841A5B9A5D2EBCB81A3E118074DFD66EBCB81CBE803E800C3E1094882FBE10D4882FAC3CB819807E18BE18FE12F43E800C3E10BE10E80068006E7CB8199FFE187C0320004120843777222E9C20043232C15401B3C594013E808532DA84B2C7F2DFF2407EC02002012018190201D42B2C0201201A1B0201201E1F0201201C1D00E5473F00BD401D001D401D021F90102D31F01821043436D74BAF2E068F84601D37F59BAF2E072F844544355F910F8454330F910B0F2E065D33FD33F30F84822B9F84922B9B0F2E06C21F86820F869F84A6E915B8E19F84AD0D33FFA003171D721D33F305033BC02BCB1936DF86ADEE2F800F00C8006F3E12F43E800C7E903E900C3E09DBC41CBE10D62F24CC20C1B7BE10FE11963C03FE10BE11A04020BC03DC3E185C3E189C3E18DB7E1ABC032000B51D3C02F5007400750074087E4040B4C7C0608410DB1BDCEEBCB81A3E118074DFD66EBCB81CBE111510D57E443E1150CC3E442C3CB8197E80007E18BE80007E18F4CFF4CFCC3E1208AE7E1248AE6C3CB81B007E1A3E1A7E003C042001C1573F00BF84A6EF2E06AD2008308D71820F9012392F84492F845E24130F910F2E065D31F018210556E436CBAF2E068F84601D37F59BAF2E072D401D08308D71820F901F8444130F910F2E06501D430D08308D71820F901F8454130F910F2E06501820020120222301FED31F01821043685374BAF2E068F84601D37F59BAF2E072D33FFA00F404552003D200019AD401D0D33FFA00F40430937F206DE2303205D31F01821043685374BAF2E068F84601D37F59BAF2E072D33FFA00F404552003D200019AD401D0D33FFA00F40430937F206DE23032F8485280BEF8495250BEB0524BBE1AB0527ABE19210064B05215BE14B05248BE17B0F2E06970F82305C8CB3F5004FA0215F40015CB3F5004FA0212F400CB1F12CA00CA00C9F86AF00C01C31CFC02FE129BACFCB81AF48020C235C6083E4048E4BE1124BE1178904C3E443CB81974C7C0608410DA19D46EBCB81A3E118074DFD66EBCB81CB5007420C235C6083E407E11104C3E443CB81940750C3420C235C6083E407E11504C3E443CB81940602403F71CFC02FE129BACFCB81AF48020C235C6083E4048E4BE1124BE1178904C3E443CB81974C7C0608410DB10DBAEBCB81A3E118074DFD66EBCB81CBD010C3E12B434CFFE803D0134CFFE803D0134C7FE11DBC4148828083E08EE7CB81BBE11DBC4A83E08EF3CB81C34800C151D5A64D6D4C8F7A2B98E82A49B08B8C3816028292A01FCD31F01821043685374BAF2E068F84601D37F59BAF2E072D33FFA00F404552003D200019AD401D0D33FFA00F40430937F206DE2303205D31F01821043685374BAF2E068F84601D37F59BAF2E072D33FFA00F404552003D200019AD401D0D33FFA00F40430937F206DE230325339BE5381BEB0F8495250BEB0F8485290BEB02502FE5237BE16B05262BEB0F2E06927C20097F84918BEF2E0699137E222C20097F84813BEF2E0699132E2F84AD0D33FFA00F404D33FFA00F404D31FF8476F105220A0F823BCF2E06FD200D20030B3F2E073209C3537373A5274BC5263BC12B18E11323939395250BC5299BC18B14650134440E25319BAB3F2E06D9130E30D7F05C82627002496F8476F1114A098F8476F1117A00603E203003ECB3F5004FA0215F40012CB3F5004FA0213F400CB1F12CA00CA00C9F86AF00C00620A8020F4966FA5208E213050038020F4666FA1208E1001FA00ED1E15DA119450C3A00B9133E2923430E202926C21E2B31B000C3535075063140038C8CB3F5004FA0212F400CB3F5003FA0213F400CB1FCA00C9F86AF00C00D51D3C02FE129BACFCB81AFE12B434CFFE803D010C74CFFE803D010C74C7CC3E11DBC4283E11DBC4A83E08EE7CB81C7E003E10886808E87E18BE10D400E816287E18FE10F04026BE10BE10E83E189C3E18F7BE10B04026BE10FE10A83E18DC3E18F780693E1A293E1A7C042001F53B7EF4C7C8608419F1F4A06EA4CC7C037808608403818830AEA54C7C03B6CC780C882084155DD61FAEA54C3C0476CC780820841E6849BBEEA54C3C04B6CC7808208407C546B3EEA54C3C0576CC780820840223AA8CAEA54C3C05B6CC7808208419BDBC1A6EA54C3C05F6CC780C60840950CAA46EA53C0636CC78202D0008840FF2F00075BC7FE3A7805FC25E87D007D207D20184100D0CAF6A1EC7C217C21B7817C227C22B7817C237C23FC247C24B7817C2524C3B7818823881B22A021984008DBD0CABA7805FC20C8B870FC253748B8F07C256840206B90FD0018C020EB90FD0018B8EB90E98F987C23B7882908507C11DE491839707C23B788507C23B789507C11DE48B9F03A4331C4966";var He;let k0=(He=class extends cc{constructor(t,e){e.publicKeyA=e.isA?e.myKeyPair.publicKey:e.hisPublicKey,e.publicKeyB=e.isA?e.hisPublicKey:e.myKeyPair.publicKey,e.wc=e.wc||0,e.code=e.code||Wr.oneFromBoc(P0),super(t,e)}createDataCell(){var f,a,w;const t=new Wr;t.bits.writeBit(0),t.bits.writeCoins(0),t.bits.writeCoins(0),Is(t,this.options.publicKeyA),Is(t,this.options.publicKeyB),t.bits.writeUint(this.options.channelId,128);const e=new Wr;e.bits.writeUint(((f=this.options.closingConfig)==null?void 0:f.quarantineDuration)||0,32),e.bits.writeCoins(((a=this.options.closingConfig)==null?void 0:a.misbehaviorFine)||new Qe(0)),e.bits.writeUint(((w=this.options.closingConfig)==null?void 0:w.conditionalCloseDuration)||0,32),t.refs[0]=e,t.bits.writeUint(0,32),t.bits.writeUint(0,32),t.bits.writeBit(!1);const i=new Wr;return i.bits.writeCoins(this.options.excessFee||new Qe(0)),i.bits.writeAddress(this.options.addressA),i.bits.writeAddress(this.options.addressB),t.refs[1]=i,t}async createOneSignature(t,e){const i=gr.sign.detached(await e.hash(),this.options.myKeyPair.secretKey);return{cell:Sc({op:t,isA:this.options.isA,signature:i,cell:e}),signature:i}}async createTwoSignature(t,e,i){const f=gr.sign.detached(await i.hash(),this.options.myKeyPair.secretKey),a=this.options.isA?f:e,w=this.options.isA?e:f;return{cell:Dc({op:t,signatureA:a,signatureB:w,cell:i}),signature:f}}async createTopUpBalance(t){return bc(t)}async createInitChannel(t){return this.createOneSignature(pc,Cc({...t,channelId:this.options.channelId}))}async createCooperativeCloseChannel(t){return t.hisSignature||(t.hisSignature=new Uint8Array(512/8)),this.createTwoSignature(vc,t.hisSignature,Ts({...t,channelId:this.options.channelId}))}async createCooperativeCommit(t){return t.hisSignature||(t.hisSignature=new Uint8Array(512/8)),this.createTwoSignature(mc,t.hisSignature,Ec({...t,channelId:this.options.channelId}))}async createSignedSemiChannelState(t){const e=Ns({channelId:this.options.channelId,semiChannelBody:Hr({seqno:t.mySeqno,sentCoins:t.mySentCoins,conditionals:null}),counterpartySemiChannelBody:t.hisSeqno===void 0?null:Hr({seqno:t.hisSeqno,sentCoins:t.hisSentCoins,conditionals:null})}),i=gr.sign.detached(await e.hash(),this.options.myKeyPair.secretKey);return{cell:Ac({signature:i,state:e}),signature:i}}async signState(t){const e=this.options.isA?t.seqnoA:t.seqnoB,i=this.options.isA?t.seqnoB:t.seqnoA,f=this.options.initBalanceA.gt(t.balanceA)?this.options.initBalanceA.sub(t.balanceA):new Qe(0),a=this.options.initBalanceB.gt(t.balanceB)?this.options.initBalanceB.sub(t.balanceB):new Qe(0),w=this.options.isA?f:a,C=this.options.isA?a:f,{cell:b,signature:A}=await this.createSignedSemiChannelState({mySeqno:e,mySentCoins:w,hisSeqno:i,hisSentCoins:C});return A}async verifyState(t,e){const i=this.options.isA?t.seqnoB:t.seqnoA,f=this.options.isA?t.seqnoA:t.seqnoB,a=this.options.initBalanceA.gt(t.balanceA)?this.options.initBalanceA.sub(t.balanceA):new Qe(0),w=this.options.initBalanceB.gt(t.balanceB)?this.options.initBalanceB.sub(t.balanceB):new Qe(0),C=this.options.isA?w:a,b=this.options.isA?a:w,E=await Ns({channelId:this.options.channelId,semiChannelBody:Hr({seqno:i,sentCoins:C,conditionals:null}),counterpartySemiChannelBody:f===void 0?null:Hr({seqno:f,sentCoins:b,conditionals:null})}).hash();return gr.sign.detached.verify(E,e,this.options.isA?this.options.publicKeyB:this.options.publicKeyA)}async signClose(t){const{cell:e,signature:i}=await this.createCooperativeCloseChannel(t);return i}async verifyClose(t,e){const f=await(await Ts({...t,channelId:this.options.channelId})).hash();return gr.sign.detached.verify(f,e,this.options.isA?this.options.publicKeyB:this.options.publicKeyA)}async createStartUncooperativeClose(t){return this.createOneSignature(gc,Mc({...t,channelId:this.options.channelId}))}async createChallengeQuarantinedState(t){return this.createOneSignature(wc,Bc({...t,channelId:this.options.channelId}))}async createSettleConditionals(t){return this.createOneSignature(yc,Fc({...t,channelId:this.options.channelId}))}async createFinishUncooperativeClose(){return xc()}async getChannelState(){const t=await this.getAddress();return(await this.provider.call2(t.toString(),"get_channel_state",[])).toNumber()}async getData(){const t=X=>{let At=X.toString(16);return At.length%2!==0&&(At="0"+At),dc(At)},e=await this.getAddress(),i=await this.provider.call2(e.toString(),"get_channel_data",[]),f=i[0].toNumber(),a=i[1][0],w=i[1][1],C=t(i[2][0]),b=t(i[2][1]),A=i[3],E=i[4][0].toNumber(),F=i[4][1],S=i[4][2].toNumber(),_=i[5][0],bt=i[5][1],T=i[6],Q=i[7][0],et=_s(i[7][1]),Mt=_s(i[7][2]);return{state:f,balanceA:a,balanceB:w,publicKeyA:C,publicKeyB:b,channelId:A,quarantineDuration:E,misbehaviorFine:F,conditionalCloseDuration:S,seqnoA:_,seqnoB:bt,quarantine:T,excessFee:Q,addressA:et,addressB:Mt}}fromWallet(t){const{wallet:e,secretKey:i}=t,f=(a,w)=>{const C=async b=>{const A=w?(await this.createStateInit()).stateInit:null,E=await this.getAddress(),F=await e.methods.seqno().call()||0,S=await a;return e.methods.transfer({secretKey:i,toAddress:E.toString(!0,!0,!0),amount:b,seqno:F,payload:S,stateInit:A,sendMode:3})};return{send:b=>C(b).then(A=>A.send()),estimateFee:b=>C(b).then(A=>A.estimateFee())}};return{deploy:()=>f(null,!0),init:a=>f(this.createInitChannel(a).then(w=>w.cell)),topUp:a=>f(this.createTopUpBalance(a)),close:a=>f(this.createCooperativeCloseChannel(a).then(w=>w.cell)),commit:a=>f(this.createCooperativeCommit(a).then(w=>w.cell)),startUncooperativeClose:a=>f(this.createStartUncooperativeClose(a).then(w=>w.cell)),challengeQuarantinedState:a=>f(this.createChallengeQuarantinedState(a).then(w=>w.cell)),settleConditionals:a=>f(this.createSettleConditionals(a).then(w=>w.cell)),finishUncooperativeClose:()=>f(this.createFinishUncooperativeClose())}}},Ye(He,"STATE_UNINITED",0),Ye(He,"STATE_OPEN",1),Ye(He,"STATE_CLOSURE_STARTED",2),Ye(He,"STATE_SETTLING_CONDITIONALS",3),Ye(He,"STATE_AWAITING_FINALIZATION",4),He);k0.codeHex=P0;var _c={PaymentChannel:k0};const{PaymentChannel:q0}=_c;let Ic=class{constructor(t){this.provider=t}createChannel(t){return new q0(this.provider,t)}};var Tc={Payments:Ic,PaymentChannel:q0},Ln={exports:{}},rr=typeof Reflect=="object"?Reflect:null,Rs=rr&&typeof rr.apply=="function"?rr.apply:function(t,e,i){return Function.prototype.apply.call(t,e,i)},Jr;rr&&typeof rr.ownKeys=="function"?Jr=rr.ownKeys:Object.getOwnPropertySymbols?Jr=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Jr=function(t){return Object.getOwnPropertyNames(t)};function Nc(r){console&&console.warn&&console.warn(r)}var W0=Number.isNaN||function(t){return t!==t};function Dt(){Dt.init.call(this)}Ln.exports=Dt;Ln.exports.once=Lc;Dt.EventEmitter=Dt;Dt.prototype._events=void 0;Dt.prototype._eventsCount=0;Dt.prototype._maxListeners=void 0;var $s=10;function pi(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}Object.defineProperty(Dt,"defaultMaxListeners",{enumerable:!0,get:function(){return $s},set:function(r){if(typeof r!="number"||r<0||W0(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");$s=r}});Dt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Dt.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||W0(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function H0(r){return r._maxListeners===void 0?Dt.defaultMaxListeners:r._maxListeners}Dt.prototype.getMaxListeners=function(){return H0(this)};Dt.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e.push(arguments[i]);var f=t==="error",a=this._events;if(a!==void 0)f=f&&a.error===void 0;else if(!f)return!1;if(f){var w;if(e.length>0&&(w=e[0]),w instanceof Error)throw w;var C=new Error("Unhandled error."+(w?" ("+w.message+")":""));throw C.context=w,C}var b=a[t];if(b===void 0)return!1;if(typeof b=="function")Rs(b,this,e);else for(var A=b.length,E=Z0(b,A),i=0;i<A;++i)Rs(E[i],this,e);return!0};function V0(r,t,e,i){var f,a,w;if(pi(e),a=r._events,a===void 0?(a=r._events=Object.create(null),r._eventsCount=0):(a.newListener!==void 0&&(r.emit("newListener",t,e.listener?e.listener:e),a=r._events),w=a[t]),w===void 0)w=a[t]=e,++r._eventsCount;else if(typeof w=="function"?w=a[t]=i?[e,w]:[w,e]:i?w.unshift(e):w.push(e),f=H0(r),f>0&&w.length>f&&!w.warned){w.warned=!0;var C=new Error("Possible EventEmitter memory leak detected. "+w.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");C.name="MaxListenersExceededWarning",C.emitter=r,C.type=t,C.count=w.length,Nc(C)}return r}Dt.prototype.addListener=function(t,e){return V0(this,t,e,!1)};Dt.prototype.on=Dt.prototype.addListener;Dt.prototype.prependListener=function(t,e){return V0(this,t,e,!0)};function Rc(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function K0(r,t,e){var i={fired:!1,wrapFn:void 0,target:r,type:t,listener:e},f=Rc.bind(i);return f.listener=e,i.wrapFn=f,f}Dt.prototype.once=function(t,e){return pi(e),this.on(t,K0(this,t,e)),this};Dt.prototype.prependOnceListener=function(t,e){return pi(e),this.prependListener(t,K0(this,t,e)),this};Dt.prototype.removeListener=function(t,e){var i,f,a,w,C;if(pi(e),f=this._events,f===void 0)return this;if(i=f[t],i===void 0)return this;if(i===e||i.listener===e)--this._eventsCount===0?this._events=Object.create(null):(delete f[t],f.removeListener&&this.emit("removeListener",t,i.listener||e));else if(typeof i!="function"){for(a=-1,w=i.length-1;w>=0;w--)if(i[w]===e||i[w].listener===e){C=i[w].listener,a=w;break}if(a<0)return this;a===0?i.shift():$c(i,a),i.length===1&&(f[t]=i[0]),f.removeListener!==void 0&&this.emit("removeListener",t,C||e)}return this};Dt.prototype.off=Dt.prototype.removeListener;Dt.prototype.removeAllListeners=function(t){var e,i,f;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[t]),this;if(arguments.length===0){var a=Object.keys(i),w;for(f=0;f<a.length;++f)w=a[f],w!=="removeListener"&&this.removeAllListeners(w);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(e=i[t],typeof e=="function")this.removeListener(t,e);else if(e!==void 0)for(f=e.length-1;f>=0;f--)this.removeListener(t,e[f]);return this};function j0(r,t,e){var i=r._events;if(i===void 0)return[];var f=i[t];return f===void 0?[]:typeof f=="function"?e?[f.listener||f]:[f]:e?Uc(f):Z0(f,f.length)}Dt.prototype.listeners=function(t){return j0(this,t,!0)};Dt.prototype.rawListeners=function(t){return j0(this,t,!1)};Dt.listenerCount=function(r,t){return typeof r.listenerCount=="function"?r.listenerCount(t):G0.call(r,t)};Dt.prototype.listenerCount=G0;function G0(r){var t=this._events;if(t!==void 0){var e=t[r];if(typeof e=="function")return 1;if(e!==void 0)return e.length}return 0}Dt.prototype.eventNames=function(){return this._eventsCount>0?Jr(this._events):[]};function Z0(r,t){for(var e=new Array(t),i=0;i<t;++i)e[i]=r[i];return e}function $c(r,t){for(;t+1<r.length;t++)r[t]=r[t+1];r.pop()}function Uc(r){for(var t=new Array(r.length),e=0;e<t.length;++e)t[e]=r[e].listener||r[e];return t}function Lc(r,t){return new Promise(function(e,i){function f(w){r.removeListener(t,a),i(w)}function a(){typeof r.removeListener=="function"&&r.removeListener("error",f),e([].slice.call(arguments))}z0(r,t,a,{once:!0}),t!=="error"&&Oc(r,f,{once:!0})})}function Oc(r,t,e){typeof r.on=="function"&&z0(r,"error",t,e)}function z0(r,t,e,i){if(typeof r.on=="function")i.once?r.once(t,e):r.on(t,e);else if(typeof r.addEventListener=="function")r.addEventListener(t,function f(a){i.once&&r.removeEventListener(t,f),e(a)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r)}var Pc=Ln.exports;const kc=yn(Pc);var Y0={},X0={},On=function(r,t){X0[r]=t},D=function(r){var t=function(i,f){Object.assign(this,f),this.name=r,this.message=i||r,this.stack=new Error().stack};return t.prototype=new Error,Y0[r]=t,t},Q0=function(r){if(typeof r=="object"&&r){try{var t=JSON.parse(r.message);t.message&&t.name&&(r=t)}catch{}var e=void 0;if(typeof r.name=="string"){var i=r.name,f=X0[i];if(f)e=f(r);else{var a=i==="Error"?Error:Y0[i];a||(console.warn("deserializing an unknown class '"+i+"'"),a=D(i)),e=Object.create(a.prototype);try{for(var w in r)r.hasOwnProperty(w)&&(e[w]=r[w])}catch{}}}else e=new Error(r.message);return!e.stack&&Error.captureStackTrace&&Error.captureStackTrace(e,Q0),e}return new Error(String(r))},qc=function(r){return r&&(typeof r=="object"?J0(r,[]):typeof r=="function"?"[Function: "+(r.name||"anonymous")+"]":r)};function J0(r,t){var e={};t.push(r);for(var i=0,f=Object.keys(r);i<f.length;i++){var a=f[i],w=r[a];if(typeof w!="function"){if(!w||typeof w!="object"){e[a]=w;continue}if(t.indexOf(r[a])===-1){e[a]=J0(r[a],t.slice(0));continue}e[a]="[Circular]"}}return typeof r.name=="string"&&(e.name=r.name),typeof r.message=="string"&&(e.message=r.message),typeof r.stack=="string"&&(e.stack=r.stack),e}var Wc=D("AccountNameRequired"),Hc=D("AccountNotSupported"),Vc=D("AmountRequired"),Kc=D("BluetoothRequired"),jc=D("BtcUnmatchedApp"),Gc=D("CantOpenDevice"),Zc=D("CashAddrNotSupported"),zc=D("CurrencyNotSupported"),Yc=D("DeviceAppVerifyNotSupported"),Xc=D("DeviceGenuineSocketEarlyClose"),Qc=D("DeviceNotGenuine"),Jc=D("DeviceOnDashboardExpected"),td=D("DeviceOnDashboardUnexpected"),ed=D("DeviceInOSUExpected"),rd=D("DeviceHalted"),id=D("DeviceNameInvalid"),nd=D("DeviceSocketFail"),sd=D("DeviceSocketNoBulkStatus"),vi=D("DisconnectedDevice"),Pn=D("DisconnectedDeviceDuringOperation"),od=D("EnpointConfig"),ad=D("EthAppPleaseEnableContractData"),ld=D("FeeEstimationFailed"),hd=D("FirmwareNotRecognized"),fd=D("HardResetFail"),ud=D("InvalidXRPTag"),cd=D("InvalidAddress"),dd=D("InvalidAddressBecauseDestinationIsAlsoSource"),pd=D("LatestMCUInstalledError"),vd=D("UnknownMCU"),md=D("LedgerAPIError"),gd=D("LedgerAPIErrorWithMessage"),wd=D("LedgerAPINotAvailable"),yd=D("ManagerAppAlreadyInstalled"),bd=D("ManagerAppRelyOnBTC"),Cd=D("ManagerAppDepInstallRequired"),Ed=D("ManagerAppDepUninstallRequired"),Ad=D("ManagerDeviceLocked"),Md=D("ManagerFirmwareNotEnoughSpace"),Bd=D("ManagerNotEnoughSpace"),Fd=D("ManagerUninstallBTCDep"),xd=D("NetworkDown"),Sd=D("NoAddressesFound"),Dd=D("NotEnoughBalance"),_d=D("NotEnoughBalanceToDelegate"),Id=D("NotEnoughBalanceInParentAccount"),Td=D("NotEnoughSpendableBalance"),Nd=D("NotEnoughBalanceBecauseDestinationNotCreated"),Rd=D("NoAccessToCamera"),$d=D("NotEnoughGas"),Ud=D("NotSupportedLegacyAddress"),Ld=D("GasLessThanEstimate"),Od=D("PasswordsDontMatch"),Pd=D("PasswordIncorrect"),kd=D("RecommendSubAccountsToEmpty"),qd=D("RecommendUndelegation"),Wd=D("TimeoutTagged"),Hd=D("UnexpectedBootloader"),Vd=D("MCUNotGenuineToDashboard"),Kd=D("RecipientRequired"),jd=D("UnavailableTezosOriginatedAccountReceive"),Gd=D("UnavailableTezosOriginatedAccountSend"),Zd=D("UpdateFetchFileFail"),zd=D("UpdateIncorrectHash"),Yd=D("UpdateIncorrectSig"),Xd=D("UpdateYourApp"),Qd=D("UserRefusedDeviceNameChange"),Jd=D("UserRefusedAddress"),t1=D("UserRefusedFirmwareUpdate"),e1=D("UserRefusedAllowManager"),r1=D("UserRefusedOnDevice"),Er=D("TransportOpenUserCancelled"),nn=D("TransportInterfaceNotAvailable"),ta=D("TransportRaceCondition"),ea=D("TransportWebUSBGestureRequired"),i1=D("DeviceShouldStayInApp"),n1=D("WebsocketConnectionError"),s1=D("WebsocketConnectionFailed"),o1=D("WrongDeviceForAccount"),a1=D("WrongAppForCurrency"),l1=D("ETHAddressNonEIP"),h1=D("CantScanQRCode"),f1=D("FeeNotLoaded"),u1=D("FeeRequired"),c1=D("FeeTooHigh"),d1=D("SyncError"),p1=D("PairingFailed"),v1=D("GenuineCheckFailed"),m1=D("LedgerAPI4xx"),g1=D("LedgerAPI5xx"),w1=D("FirmwareOrAppUpdateRequired"),y1=D("NoDBPathGiven"),b1=D("DBWrongPassword"),C1=D("DBNotReset");function Oe(r,t){this.name="TransportError",this.message=r,this.stack=new Error().stack,this.id=t}Oe.prototype=new Error;On("TransportError",function(r){return new Oe(r.message,r.id)});var si={PIN_REMAINING_ATTEMPTS:25536,INCORRECT_LENGTH:26368,MISSING_CRITICAL_PARAMETER:26624,COMMAND_INCOMPATIBLE_FILE_STRUCTURE:27009,SECURITY_STATUS_NOT_SATISFIED:27010,CONDITIONS_OF_USE_NOT_SATISFIED:27013,INCORRECT_DATA:27264,NOT_ENOUGH_MEMORY_SPACE:27268,REFERENCED_DATA_NOT_FOUND:27272,FILE_ALREADY_EXISTS:27273,INCORRECT_P1_P2:27392,INS_NOT_SUPPORTED:27904,CLA_NOT_SUPPORTED:28160,TECHNICAL_PROBLEM:28416,OK:36864,MEMORY_PROBLEM:37440,NO_EF_SELECTED:37888,INVALID_OFFSET:37890,FILE_NOT_FOUND:37892,INCONSISTENT_FILE:37896,ALGORITHM_NOT_SUPPORTED:38020,INVALID_KCV:38021,CODE_NOT_INITIALIZED:38914,ACCESS_CONDITION_NOT_FULFILLED:38916,CONTRADICTION_SECRET_CODE_STATUS:38920,CONTRADICTION_INVALIDATION:38928,CODE_BLOCKED:38976,MAX_VALUE_REACHED:38992,GP_AUTH_FAILED:25344,LICENSING:28482,HALTED:28586};function ra(r){switch(r){case 26368:return"Incorrect length";case 26624:return"Missing critical parameter";case 27010:return"Security not satisfied (dongle locked or have invalid access rights)";case 27013:return"Condition of use not satisfied (denied by the user?)";case 27264:return"Invalid data received";case 27392:return"Invalid parameter received"}if(28416<=r&&r<=28671)return"Internal error, please report"}function mi(r){this.name="TransportStatusError";var t=Object.keys(si).find(function(f){return si[f]===r})||"UNKNOWN_ERROR",e=ra(r)||t,i=r.toString(16);this.message="Ledger device: "+e+" (0x"+i+")",this.stack=new Error().stack,this.statusCode=r,this.statusText=t}mi.prototype=new Error;On("TransportStatusError",function(r){return new mi(r.statusCode)});const E1=Object.freeze(Object.defineProperty({__proto__:null,AccountNameRequiredError:Wc,AccountNotSupported:Hc,AmountRequired:Vc,BluetoothRequired:Kc,BtcUnmatchedApp:jc,CantOpenDevice:Gc,CantScanQRCode:h1,CashAddrNotSupported:Zc,CurrencyNotSupported:zc,DBNotReset:C1,DBWrongPassword:b1,DeviceAppVerifyNotSupported:Yc,DeviceGenuineSocketEarlyClose:Xc,DeviceHalted:rd,DeviceInOSUExpected:ed,DeviceNameInvalid:id,DeviceNotGenuineError:Qc,DeviceOnDashboardExpected:Jc,DeviceOnDashboardUnexpected:td,DeviceShouldStayInApp:i1,DeviceSocketFail:nd,DeviceSocketNoBulkStatus:sd,DisconnectedDevice:vi,DisconnectedDeviceDuringOperation:Pn,ETHAddressNonEIP:l1,EnpointConfigError:od,EthAppPleaseEnableContractData:ad,FeeEstimationFailed:ld,FeeNotLoaded:f1,FeeRequired:u1,FeeTooHigh:c1,FirmwareNotRecognized:hd,FirmwareOrAppUpdateRequired:w1,GasLessThanEstimate:Ld,GenuineCheckFailed:v1,HardResetFail:fd,InvalidAddress:cd,InvalidAddressBecauseDestinationIsAlsoSource:dd,InvalidXRPTag:ud,LatestMCUInstalledError:pd,LedgerAPI4xx:m1,LedgerAPI5xx:g1,LedgerAPIError:md,LedgerAPIErrorWithMessage:gd,LedgerAPINotAvailable:wd,MCUNotGenuineToDashboard:Vd,ManagerAppAlreadyInstalledError:yd,ManagerAppDepInstallRequired:Cd,ManagerAppDepUninstallRequired:Ed,ManagerAppRelyOnBTCError:bd,ManagerDeviceLockedError:Ad,ManagerFirmwareNotEnoughSpaceError:Md,ManagerNotEnoughSpaceError:Bd,ManagerUninstallBTCDep:Fd,NetworkDown:xd,NoAccessToCamera:Rd,NoAddressesFound:Sd,NoDBPathGiven:y1,NotEnoughBalance:Dd,NotEnoughBalanceBecauseDestinationNotCreated:Nd,NotEnoughBalanceInParentAccount:Id,NotEnoughBalanceToDelegate:_d,NotEnoughGas:$d,NotEnoughSpendableBalance:Td,NotSupportedLegacyAddress:Ud,PairingFailed:p1,PasswordIncorrectError:Pd,PasswordsDontMatchError:Od,RecipientRequired:Kd,RecommendSubAccountsToEmpty:kd,RecommendUndelegation:qd,StatusCodes:si,SyncError:d1,TimeoutTagged:Wd,TransportError:Oe,TransportInterfaceNotAvailable:nn,TransportOpenUserCancelled:Er,TransportRaceCondition:ta,TransportStatusError:mi,TransportWebUSBGestureRequired:ea,UnavailableTezosOriginatedAccountReceive:jd,UnavailableTezosOriginatedAccountSend:Gd,UnexpectedBootloader:Hd,UnknownMCU:vd,UpdateFetchFileFail:Zd,UpdateIncorrectHash:zd,UpdateIncorrectSig:Yd,UpdateYourApp:Xd,UserRefusedAddress:Jd,UserRefusedAllowManager:e1,UserRefusedDeviceNameChange:Qd,UserRefusedFirmwareUpdate:t1,UserRefusedOnDevice:r1,WebsocketConnectionError:n1,WebsocketConnectionFailed:s1,WrongAppForCurrency:a1,WrongDeviceForAccount:o1,addCustomErrorDeserializer:On,createCustomErrorClass:D,deserializeError:Q0,getAltStatusMessage:ra,serializeError:qc},Symbol.toStringTag,{value:"Module"}));class Ne{constructor(){this.exchangeTimeout=3e4,this.unresponsiveTimeout=15e3,this.deviceModel=null,this._events=new kc,this.send=async(t,e,i,f,a=Buffer.alloc(0),w=[si.OK])=>{if(a.length>=256)throw new Oe("data.length exceed 256 bytes limit. Got: "+a.length,"DataLengthTooBig");const C=await this.exchange(Buffer.concat([Buffer.from([t,e,i,f]),Buffer.from([a.length]),a])),b=C.readUInt16BE(C.length-2);if(!w.some(A=>A===b))throw new mi(b);return C},this.exchangeBusyPromise=void 0,this.exchangeAtomicImpl=async t=>{if(this.exchangeBusyPromise)throw new ta("An action was already pending on the Ledger device. Please deny or reconnect.");let e;const i=new Promise(w=>{e=w});this.exchangeBusyPromise=i;let f=!1;const a=setTimeout(()=>{f=!0,this.emit("unresponsive")},this.unresponsiveTimeout);try{const w=await t();return f&&this.emit("responsive"),w}finally{clearTimeout(a),e&&e(),this.exchangeBusyPromise=null}},this._appAPIlock=null}exchange(t){throw new Error("exchange not implemented")}setScrambleKey(t){}close(){return Promise.resolve()}on(t,e){this._events.on(t,e)}off(t,e){this._events.removeListener(t,e)}emit(t,...e){this._events.emit(t,...e)}setDebugMode(){console.warn("setDebugMode is deprecated. use @ledgerhq/logs instead. No logs are emitted in this anymore.")}setExchangeTimeout(t){this.exchangeTimeout=t}setExchangeUnresponsiveTimeout(t){this.unresponsiveTimeout=t}static create(t=3e3,e){return new Promise((i,f)=>{let a=!1;const w=this.listen({next:b=>{a=!0,w&&w.unsubscribe(),C&&clearTimeout(C),this.open(b.descriptor,t).then(i,f)},error:b=>{C&&clearTimeout(C),f(b)},complete:()=>{C&&clearTimeout(C),a||f(new Oe(this.ErrorMessage_NoDeviceFound,"NoDeviceFound"))}}),C=e?setTimeout(()=>{w.unsubscribe(),f(new Oe(this.ErrorMessage_ListenTimeout,"ListenTimeout"))},e):null})}decorateAppAPIMethods(t,e,i){for(let f of e)t[f]=this.decorateAppAPIMethod(f,t[f],t,i)}decorateAppAPIMethod(t,e,i,f){return async(...a)=>{const{_appAPIlock:w}=this;if(w)return Promise.reject(new Oe("Ledger Device is busy (lock "+w+")","TransportLocked"));try{return this._appAPIlock=t,this.setScrambleKey(f),await e.apply(i,a)}finally{this._appAPIlock=null}}}}Ne.isSupported=void 0;Ne.list=void 0;Ne.listen=void 0;Ne.open=void 0;Ne.ErrorMessage_ListenTimeout="No Ledger device found (timeout)";Ne.ErrorMessage_NoDeviceFound="No Ledger device found";var kn={};const ia=je(E1);Object.defineProperty(kn,"__esModule",{value:!0});var qn=kn.default=void 0,Pi=ia;const Us=5;function A1(r){const t=Buffer.alloc(2);return t.writeUInt16BE(r,0),t}const M1={data:Buffer.alloc(0),dataLength:0,sequence:0},B1=(r,t)=>({makeBlocks(e){let i=Buffer.concat([A1(e.length),e]);const f=t-5,a=Math.ceil(i.length/f);i=Buffer.concat([i,Buffer.alloc(a*f-i.length+1).fill(0)]);const w=[];for(let C=0;C<a;C++){const b=Buffer.alloc(5);b.writeUInt16BE(r,0),b.writeUInt8(Us,2),b.writeUInt16BE(C,3);const A=i.slice(C*f,(C+1)*f);w.push(Buffer.concat([b,A]))}return w},reduceResponse(e,i){let{data:f,dataLength:a,sequence:w}=e||M1;if(i.readUInt16BE(0)!==r)throw new Pi.TransportError("Invalid channel","InvalidChannel");if(i.readUInt8(2)!==Us)throw new Pi.TransportError("Invalid tag","InvalidTag");if(i.readUInt16BE(3)!==w)throw new Pi.TransportError("Invalid sequence","InvalidSequence");e||(a=i.readUInt16BE(5)),w++;const C=i.slice(e?5:7);return f=Buffer.concat([f,C]),f.length>a&&(f=f.slice(0,a)),{data:f,dataLength:a,sequence:w}},getReducedResult(e){if(e&&e.dataLength===e.data.length)return e.data}});var F1=B1;qn=kn.default=F1;var sn={exports:{}};const x1="2.0.0",na=256,S1=Number.MAX_SAFE_INTEGER||9007199254740991,D1=16,_1=na-6,I1=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var gi={MAX_LENGTH:na,MAX_SAFE_COMPONENT_LENGTH:D1,MAX_SAFE_BUILD_LENGTH:_1,MAX_SAFE_INTEGER:S1,RELEASE_TYPES:I1,SEMVER_SPEC_VERSION:x1,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},ki={};const T1=typeof process=="object"&&ki&&ki.NODE_DEBUG&&/\bsemver\b/i.test(ki.NODE_DEBUG)?(...r)=>console.error("SEMVER",...r):()=>{};var wi=T1;(function(r,t){const{MAX_SAFE_COMPONENT_LENGTH:e,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:f}=gi,a=wi;t=r.exports={};const w=t.re=[],C=t.safeRe=[],b=t.src=[],A=t.safeSrc=[],E=t.t={};let F=0;const S="[a-zA-Z0-9-]",_=[["\\s",1],["\\d",f],[S,i]],bt=Q=>{for(const[et,Mt]of _)Q=Q.split(`${et}*`).join(`${et}{0,${Mt}}`).split(`${et}+`).join(`${et}{1,${Mt}}`);return Q},T=(Q,et,Mt)=>{const X=bt(et),At=F++;a(Q,At,et),E[Q]=At,b[At]=et,A[At]=X,w[At]=new RegExp(et,Mt?"g":void 0),C[At]=new RegExp(X,Mt?"g":void 0)};T("NUMERICIDENTIFIER","0|[1-9]\\d*"),T("NUMERICIDENTIFIERLOOSE","\\d+"),T("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${S}*`),T("MAINVERSION",`(${b[E.NUMERICIDENTIFIER]})\\.(${b[E.NUMERICIDENTIFIER]})\\.(${b[E.NUMERICIDENTIFIER]})`),T("MAINVERSIONLOOSE",`(${b[E.NUMERICIDENTIFIERLOOSE]})\\.(${b[E.NUMERICIDENTIFIERLOOSE]})\\.(${b[E.NUMERICIDENTIFIERLOOSE]})`),T("PRERELEASEIDENTIFIER",`(?:${b[E.NONNUMERICIDENTIFIER]}|${b[E.NUMERICIDENTIFIER]})`),T("PRERELEASEIDENTIFIERLOOSE",`(?:${b[E.NONNUMERICIDENTIFIER]}|${b[E.NUMERICIDENTIFIERLOOSE]})`),T("PRERELEASE",`(?:-(${b[E.PRERELEASEIDENTIFIER]}(?:\\.${b[E.PRERELEASEIDENTIFIER]})*))`),T("PRERELEASELOOSE",`(?:-?(${b[E.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${b[E.PRERELEASEIDENTIFIERLOOSE]})*))`),T("BUILDIDENTIFIER",`${S}+`),T("BUILD",`(?:\\+(${b[E.BUILDIDENTIFIER]}(?:\\.${b[E.BUILDIDENTIFIER]})*))`),T("FULLPLAIN",`v?${b[E.MAINVERSION]}${b[E.PRERELEASE]}?${b[E.BUILD]}?`),T("FULL",`^${b[E.FULLPLAIN]}$`),T("LOOSEPLAIN",`[v=\\s]*${b[E.MAINVERSIONLOOSE]}${b[E.PRERELEASELOOSE]}?${b[E.BUILD]}?`),T("LOOSE",`^${b[E.LOOSEPLAIN]}$`),T("GTLT","((?:<|>)?=?)"),T("XRANGEIDENTIFIERLOOSE",`${b[E.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),T("XRANGEIDENTIFIER",`${b[E.NUMERICIDENTIFIER]}|x|X|\\*`),T("XRANGEPLAIN",`[v=\\s]*(${b[E.XRANGEIDENTIFIER]})(?:\\.(${b[E.XRANGEIDENTIFIER]})(?:\\.(${b[E.XRANGEIDENTIFIER]})(?:${b[E.PRERELEASE]})?${b[E.BUILD]}?)?)?`),T("XRANGEPLAINLOOSE",`[v=\\s]*(${b[E.XRANGEIDENTIFIERLOOSE]})(?:\\.(${b[E.XRANGEIDENTIFIERLOOSE]})(?:\\.(${b[E.XRANGEIDENTIFIERLOOSE]})(?:${b[E.PRERELEASELOOSE]})?${b[E.BUILD]}?)?)?`),T("XRANGE",`^${b[E.GTLT]}\\s*${b[E.XRANGEPLAIN]}$`),T("XRANGELOOSE",`^${b[E.GTLT]}\\s*${b[E.XRANGEPLAINLOOSE]}$`),T("COERCEPLAIN",`(^|[^\\d])(\\d{1,${e}})(?:\\.(\\d{1,${e}}))?(?:\\.(\\d{1,${e}}))?`),T("COERCE",`${b[E.COERCEPLAIN]}(?:$|[^\\d])`),T("COERCEFULL",b[E.COERCEPLAIN]+`(?:${b[E.PRERELEASE]})?(?:${b[E.BUILD]})?(?:$|[^\\d])`),T("COERCERTL",b[E.COERCE],!0),T("COERCERTLFULL",b[E.COERCEFULL],!0),T("LONETILDE","(?:~>?)"),T("TILDETRIM",`(\\s*)${b[E.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",T("TILDE",`^${b[E.LONETILDE]}${b[E.XRANGEPLAIN]}$`),T("TILDELOOSE",`^${b[E.LONETILDE]}${b[E.XRANGEPLAINLOOSE]}$`),T("LONECARET","(?:\\^)"),T("CARETTRIM",`(\\s*)${b[E.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",T("CARET",`^${b[E.LONECARET]}${b[E.XRANGEPLAIN]}$`),T("CARETLOOSE",`^${b[E.LONECARET]}${b[E.XRANGEPLAINLOOSE]}$`),T("COMPARATORLOOSE",`^${b[E.GTLT]}\\s*(${b[E.LOOSEPLAIN]})$|^$`),T("COMPARATOR",`^${b[E.GTLT]}\\s*(${b[E.FULLPLAIN]})$|^$`),T("COMPARATORTRIM",`(\\s*)${b[E.GTLT]}\\s*(${b[E.LOOSEPLAIN]}|${b[E.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",T("HYPHENRANGE",`^\\s*(${b[E.XRANGEPLAIN]})\\s+-\\s+(${b[E.XRANGEPLAIN]})\\s*$`),T("HYPHENRANGELOOSE",`^\\s*(${b[E.XRANGEPLAINLOOSE]})\\s+-\\s+(${b[E.XRANGEPLAINLOOSE]})\\s*$`),T("STAR","(<|>)?=?\\s*\\*"),T("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),T("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(sn,sn.exports);var Br=sn.exports;const N1=Object.freeze({loose:!0}),R1=Object.freeze({}),$1=r=>r?typeof r!="object"?N1:r:R1;var Wn=$1;const Ls=/^[0-9]+$/,sa=(r,t)=>{if(typeof r=="number"&&typeof t=="number")return r===t?0:r<t?-1:1;const e=Ls.test(r),i=Ls.test(t);return e&&i&&(r=+r,t=+t),r===t?0:e&&!i?-1:i&&!e?1:r<t?-1:1},U1=(r,t)=>sa(t,r);var oa={compareIdentifiers:sa,rcompareIdentifiers:U1};const Vr=wi,{MAX_LENGTH:Os,MAX_SAFE_INTEGER:Kr}=gi,{safeRe:jr,t:Gr}=Br,L1=Wn,{compareIdentifiers:qi}=oa;let O1=class _e{constructor(t,e){if(e=L1(e),t instanceof _e){if(t.loose===!!e.loose&&t.includePrerelease===!!e.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>Os)throw new TypeError(`version is longer than ${Os} characters`);Vr("SemVer",t,e),this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease;const i=t.trim().match(e.loose?jr[Gr.LOOSE]:jr[Gr.FULL]);if(!i)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],this.major>Kr||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Kr||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Kr||this.patch<0)throw new TypeError("Invalid patch version");i[4]?this.prerelease=i[4].split(".").map(f=>{if(/^[0-9]+$/.test(f)){const a=+f;if(a>=0&&a<Kr)return a}return f}):this.prerelease=[],this.build=i[5]?i[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(Vr("SemVer.compare",this.version,this.options,t),!(t instanceof _e)){if(typeof t=="string"&&t===this.version)return 0;t=new _e(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof _e||(t=new _e(t,this.options)),this.major<t.major?-1:this.major>t.major?1:this.minor<t.minor?-1:this.minor>t.minor?1:this.patch<t.patch?-1:this.patch>t.patch?1:0}comparePre(t){if(t instanceof _e||(t=new _e(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let e=0;do{const i=this.prerelease[e],f=t.prerelease[e];if(Vr("prerelease compare",e,i,f),i===void 0&&f===void 0)return 0;if(f===void 0)return 1;if(i===void 0)return-1;if(i===f)continue;return qi(i,f)}while(++e)}compareBuild(t){t instanceof _e||(t=new _e(t,this.options));let e=0;do{const i=this.build[e],f=t.build[e];if(Vr("build compare",e,i,f),i===void 0&&f===void 0)return 0;if(f===void 0)return 1;if(i===void 0)return-1;if(i===f)continue;return qi(i,f)}while(++e)}inc(t,e,i){if(t.startsWith("pre")){if(!e&&i===!1)throw new Error("invalid increment argument: identifier is empty");if(e){const f=`-${e}`.match(this.options.loose?jr[Gr.PRERELEASELOOSE]:jr[Gr.PRERELEASE]);if(!f||f[1]!==e)throw new Error(`invalid identifier: ${e}`)}}switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e,i);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e,i);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e,i),this.inc("pre",e,i);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",e,i),this.inc("pre",e,i);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const f=Number(i)?1:0;if(this.prerelease.length===0)this.prerelease=[f];else{let a=this.prerelease.length;for(;--a>=0;)typeof this.prerelease[a]=="number"&&(this.prerelease[a]++,a=-2);if(a===-1){if(e===this.prerelease.join(".")&&i===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(f)}}if(e){let a=[e,f];i===!1&&(a=[e]),qi(this.prerelease[0],e)===0?isNaN(this.prerelease[1])&&(this.prerelease=a):this.prerelease=a}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var ie=O1;const Ps=ie,P1=(r,t,e=!1)=>{if(r instanceof Ps)return r;try{return new Ps(r,t)}catch(i){if(!e)return null;throw i}};var or=P1;const k1=or,q1=(r,t)=>{const e=k1(r,t);return e?e.version:null};var W1=q1;const H1=or,V1=(r,t)=>{const e=H1(r.trim().replace(/^[=v]+/,""),t);return e?e.version:null};var K1=V1;const ks=ie,j1=(r,t,e,i,f)=>{typeof e=="string"&&(f=i,i=e,e=void 0);try{return new ks(r instanceof ks?r.version:r,e).inc(t,i,f).version}catch{return null}};var G1=j1;const qs=or,Z1=(r,t)=>{const e=qs(r,null,!0),i=qs(t,null,!0),f=e.compare(i);if(f===0)return null;const a=f>0,w=a?e:i,C=a?i:e,b=!!w.prerelease.length;if(!!C.prerelease.length&&!b){if(!C.patch&&!C.minor)return"major";if(C.compareMain(w)===0)return C.minor&&!C.patch?"minor":"patch"}const E=b?"pre":"";return e.major!==i.major?E+"major":e.minor!==i.minor?E+"minor":e.patch!==i.patch?E+"patch":"prerelease"};var z1=Z1;const Y1=ie,X1=(r,t)=>new Y1(r,t).major;var Q1=X1;const J1=ie,tp=(r,t)=>new J1(r,t).minor;var ep=tp;const rp=ie,ip=(r,t)=>new rp(r,t).patch;var np=ip;const sp=or,op=(r,t)=>{const e=sp(r,t);return e&&e.prerelease.length?e.prerelease:null};var ap=op;const Ws=ie,lp=(r,t,e)=>new Ws(r,e).compare(new Ws(t,e));var Fe=lp;const hp=Fe,fp=(r,t,e)=>hp(t,r,e);var up=fp;const cp=Fe,dp=(r,t)=>cp(r,t,!0);var pp=dp;const Hs=ie,vp=(r,t,e)=>{const i=new Hs(r,e),f=new Hs(t,e);return i.compare(f)||i.compareBuild(f)};var Hn=vp;const mp=Hn,gp=(r,t)=>r.sort((e,i)=>mp(e,i,t));var wp=gp;const yp=Hn,bp=(r,t)=>r.sort((e,i)=>yp(i,e,t));var Cp=bp;const Ep=Fe,Ap=(r,t,e)=>Ep(r,t,e)>0;var yi=Ap;const Mp=Fe,Bp=(r,t,e)=>Mp(r,t,e)<0;var Vn=Bp;const Fp=Fe,xp=(r,t,e)=>Fp(r,t,e)===0;var aa=xp;const Sp=Fe,Dp=(r,t,e)=>Sp(r,t,e)!==0;var la=Dp;const _p=Fe,Ip=(r,t,e)=>_p(r,t,e)>=0;var Kn=Ip;const Tp=Fe,Np=(r,t,e)=>Tp(r,t,e)<=0;var jn=Np;const Rp=aa,$p=la,Up=yi,Lp=Kn,Op=Vn,Pp=jn,kp=(r,t,e,i)=>{switch(t){case"===":return typeof r=="object"&&(r=r.version),typeof e=="object"&&(e=e.version),r===e;case"!==":return typeof r=="object"&&(r=r.version),typeof e=="object"&&(e=e.version),r!==e;case"":case"=":case"==":return Rp(r,e,i);case"!=":return $p(r,e,i);case">":return Up(r,e,i);case">=":return Lp(r,e,i);case"<":return Op(r,e,i);case"<=":return Pp(r,e,i);default:throw new TypeError(`Invalid operator: ${t}`)}};var ha=kp;const qp=ie,Wp=or,{safeRe:Zr,t:zr}=Br,Hp=(r,t)=>{if(r instanceof qp)return r;if(typeof r=="number"&&(r=String(r)),typeof r!="string")return null;t=t||{};let e=null;if(!t.rtl)e=r.match(t.includePrerelease?Zr[zr.COERCEFULL]:Zr[zr.COERCE]);else{const b=t.includePrerelease?Zr[zr.COERCERTLFULL]:Zr[zr.COERCERTL];let A;for(;(A=b.exec(r))&&(!e||e.index+e[0].length!==r.length);)(!e||A.index+A[0].length!==e.index+e[0].length)&&(e=A),b.lastIndex=A.index+A[1].length+A[2].length;b.lastIndex=-1}if(e===null)return null;const i=e[2],f=e[3]||"0",a=e[4]||"0",w=t.includePrerelease&&e[5]?`-${e[5]}`:"",C=t.includePrerelease&&e[6]?`+${e[6]}`:"";return Wp(`${i}.${f}.${a}${w}${C}`,t)};var Vp=Hp;class Kp{constructor(){this.max=1e3,this.map=new Map}get(t){const e=this.map.get(t);if(e!==void 0)return this.map.delete(t),this.map.set(t,e),e}delete(t){return this.map.delete(t)}set(t,e){if(!this.delete(t)&&e!==void 0){if(this.map.size>=this.max){const f=this.map.keys().next().value;this.delete(f)}this.map.set(t,e)}return this}}var jp=Kp,Wi,Vs;function xe(){if(Vs)return Wi;Vs=1;const r=/\s+/g;class t{constructor(u,p){if(p=f(p),u instanceof t)return u.loose===!!p.loose&&u.includePrerelease===!!p.includePrerelease?u:new t(u.raw,p);if(u instanceof a)return this.raw=u.value,this.set=[[u]],this.formatted=void 0,this;if(this.options=p,this.loose=!!p.loose,this.includePrerelease=!!p.includePrerelease,this.raw=u.trim().replace(r," "),this.set=this.raw.split("||").map(m=>this.parseRange(m.trim())).filter(m=>m.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const m=this.set[0];if(this.set=this.set.filter(d=>!T(d[0])),this.set.length===0)this.set=[m];else if(this.set.length>1){for(const d of this.set)if(d.length===1&&Q(d[0])){this.set=[d];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let u=0;u<this.set.length;u++){u>0&&(this.formatted+="||");const p=this.set[u];for(let m=0;m<p.length;m++)m>0&&(this.formatted+=" "),this.formatted+=p[m].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(u){const m=((this.options.includePrerelease&&_)|(this.options.loose&&bt))+":"+u,d=i.get(m);if(d)return d;const o=this.options.loose,c=o?b[A.HYPHENRANGELOOSE]:b[A.HYPHENRANGE];u=u.replace(c,l(this.options.includePrerelease)),w("hyphen replace",u),u=u.replace(b[A.COMPARATORTRIM],E),w("comparator trim",u),u=u.replace(b[A.TILDETRIM],F),w("tilde trim",u),u=u.replace(b[A.CARETTRIM],S),w("caret trim",u);let v=u.split(" ").map(x=>Mt(x,this.options)).join(" ").split(/\s+/).map(x=>s(x,this.options));o&&(v=v.filter(x=>(w("loose invalid filter",x,this.options),!!x.match(b[A.COMPARATORLOOSE])))),w("range list",v);const y=new Map,M=v.map(x=>new a(x,this.options));for(const x of M){if(T(x))return[x];y.set(x.value,x)}y.size>1&&y.has("")&&y.delete("");const B=[...y.values()];return i.set(m,B),B}intersects(u,p){if(!(u instanceof t))throw new TypeError("a Range is required");return this.set.some(m=>et(m,p)&&u.set.some(d=>et(d,p)&&m.every(o=>d.every(c=>o.intersects(c,p)))))}test(u){if(!u)return!1;if(typeof u=="string")try{u=new C(u,this.options)}catch{return!1}for(let p=0;p<this.set.length;p++)if(n(this.set[p],u,this.options))return!0;return!1}}Wi=t;const e=jp,i=new e,f=Wn,a=bi(),w=wi,C=ie,{safeRe:b,t:A,comparatorTrimReplace:E,tildeTrimReplace:F,caretTrimReplace:S}=Br,{FLAG_INCLUDE_PRERELEASE:_,FLAG_LOOSE:bt}=gi,T=h=>h.value==="<0.0.0-0",Q=h=>h.value==="",et=(h,u)=>{let p=!0;const m=h.slice();let d=m.pop();for(;p&&m.length;)p=m.every(o=>d.intersects(o,u)),d=m.pop();return p},Mt=(h,u)=>(h=h.replace(b[A.BUILD],""),w("comp",h,u),h=Xt(h,u),w("caret",h),h=At(h,u),w("tildes",h),h=J(h,u),w("xrange",h),h=g(h,u),w("stars",h),h),X=h=>!h||h.toLowerCase()==="x"||h==="*",At=(h,u)=>h.trim().split(/\s+/).map(p=>_t(p,u)).join(" "),_t=(h,u)=>{const p=u.loose?b[A.TILDELOOSE]:b[A.TILDE];return h.replace(p,(m,d,o,c,v)=>{w("tilde",h,m,d,o,c,v);let y;return X(d)?y="":X(o)?y=`>=${d}.0.0 <${+d+1}.0.0-0`:X(c)?y=`>=${d}.${o}.0 <${d}.${+o+1}.0-0`:v?(w("replaceTilde pr",v),y=`>=${d}.${o}.${c}-${v} <${d}.${+o+1}.0-0`):y=`>=${d}.${o}.${c} <${d}.${+o+1}.0-0`,w("tilde return",y),y})},Xt=(h,u)=>h.trim().split(/\s+/).map(p=>Zt(p,u)).join(" "),Zt=(h,u)=>{w("caret",h,u);const p=u.loose?b[A.CARETLOOSE]:b[A.CARET],m=u.includePrerelease?"-0":"";return h.replace(p,(d,o,c,v,y)=>{w("caret",h,d,o,c,v,y);let M;return X(o)?M="":X(c)?M=`>=${o}.0.0${m} <${+o+1}.0.0-0`:X(v)?o==="0"?M=`>=${o}.${c}.0${m} <${o}.${+c+1}.0-0`:M=`>=${o}.${c}.0${m} <${+o+1}.0.0-0`:y?(w("replaceCaret pr",y),o==="0"?c==="0"?M=`>=${o}.${c}.${v}-${y} <${o}.${c}.${+v+1}-0`:M=`>=${o}.${c}.${v}-${y} <${o}.${+c+1}.0-0`:M=`>=${o}.${c}.${v}-${y} <${+o+1}.0.0-0`):(w("no pr"),o==="0"?c==="0"?M=`>=${o}.${c}.${v}${m} <${o}.${c}.${+v+1}-0`:M=`>=${o}.${c}.${v}${m} <${o}.${+c+1}.0-0`:M=`>=${o}.${c}.${v} <${+o+1}.0.0-0`),w("caret return",M),M})},J=(h,u)=>(w("replaceXRanges",h,u),h.split(/\s+/).map(p=>zt(p,u)).join(" ")),zt=(h,u)=>{h=h.trim();const p=u.loose?b[A.XRANGELOOSE]:b[A.XRANGE];return h.replace(p,(m,d,o,c,v,y)=>{w("xRange",h,m,d,o,c,v,y);const M=X(o),B=M||X(c),x=B||X(v),N=x;return d==="="&&N&&(d=""),y=u.includePrerelease?"-0":"",M?d===">"||d==="<"?m="<0.0.0-0":m="*":d&&N?(B&&(c=0),v=0,d===">"?(d=">=",B?(o=+o+1,c=0,v=0):(c=+c+1,v=0)):d==="<="&&(d="<",B?o=+o+1:c=+c+1),d==="<"&&(y="-0"),m=`${d+o}.${c}.${v}${y}`):B?m=`>=${o}.0.0${y} <${+o+1}.0.0-0`:x&&(m=`>=${o}.${c}.0${y} <${o}.${+c+1}.0-0`),w("xRange return",m),m})},g=(h,u)=>(w("replaceStars",h,u),h.trim().replace(b[A.STAR],"")),s=(h,u)=>(w("replaceGTE0",h,u),h.trim().replace(b[u.includePrerelease?A.GTE0PRE:A.GTE0],"")),l=h=>(u,p,m,d,o,c,v,y,M,B,x,N)=>(X(m)?p="":X(d)?p=`>=${m}.0.0${h?"-0":""}`:X(o)?p=`>=${m}.${d}.0${h?"-0":""}`:c?p=`>=${p}`:p=`>=${p}${h?"-0":""}`,X(M)?y="":X(B)?y=`<${+M+1}.0.0-0`:X(x)?y=`<${M}.${+B+1}.0-0`:N?y=`<=${M}.${B}.${x}-${N}`:h?y=`<${M}.${B}.${+x+1}-0`:y=`<=${y}`,`${p} ${y}`.trim()),n=(h,u,p)=>{for(let m=0;m<h.length;m++)if(!h[m].test(u))return!1;if(u.prerelease.length&&!p.includePrerelease){for(let m=0;m<h.length;m++)if(w(h[m].semver),h[m].semver!==a.ANY&&h[m].semver.prerelease.length>0){const d=h[m].semver;if(d.major===u.major&&d.minor===u.minor&&d.patch===u.patch)return!0}return!1}return!0};return Wi}var Hi,Ks;function bi(){if(Ks)return Hi;Ks=1;const r=Symbol("SemVer ANY");class t{static get ANY(){return r}constructor(E,F){if(F=e(F),E instanceof t){if(E.loose===!!F.loose)return E;E=E.value}E=E.trim().split(/\s+/).join(" "),w("comparator",E,F),this.options=F,this.loose=!!F.loose,this.parse(E),this.semver===r?this.value="":this.value=this.operator+this.semver.version,w("comp",this)}parse(E){const F=this.options.loose?i[f.COMPARATORLOOSE]:i[f.COMPARATOR],S=E.match(F);if(!S)throw new TypeError(`Invalid comparator: ${E}`);this.operator=S[1]!==void 0?S[1]:"",this.operator==="="&&(this.operator=""),S[2]?this.semver=new C(S[2],this.options.loose):this.semver=r}toString(){return this.value}test(E){if(w("Comparator.test",E,this.options.loose),this.semver===r||E===r)return!0;if(typeof E=="string")try{E=new C(E,this.options)}catch{return!1}return a(E,this.operator,this.semver,this.options)}intersects(E,F){if(!(E instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new b(E.value,F).test(this.value):E.operator===""?E.value===""?!0:new b(this.value,F).test(E.semver):(F=e(F),F.includePrerelease&&(this.value==="<0.0.0-0"||E.value==="<0.0.0-0")||!F.includePrerelease&&(this.value.startsWith("<0.0.0")||E.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&E.operator.startsWith(">")||this.operator.startsWith("<")&&E.operator.startsWith("<")||this.semver.version===E.semver.version&&this.operator.includes("=")&&E.operator.includes("=")||a(this.semver,"<",E.semver,F)&&this.operator.startsWith(">")&&E.operator.startsWith("<")||a(this.semver,">",E.semver,F)&&this.operator.startsWith("<")&&E.operator.startsWith(">")))}}Hi=t;const e=Wn,{safeRe:i,t:f}=Br,a=ha,w=wi,C=ie,b=xe();return Hi}const Gp=xe(),Zp=(r,t,e)=>{try{t=new Gp(t,e)}catch{return!1}return t.test(r)};var Ci=Zp;const zp=xe(),Yp=(r,t)=>new zp(r,t).set.map(e=>e.map(i=>i.value).join(" ").trim().split(" "));var Xp=Yp;const Qp=ie,Jp=xe(),tv=(r,t,e)=>{let i=null,f=null,a=null;try{a=new Jp(t,e)}catch{return null}return r.forEach(w=>{a.test(w)&&(!i||f.compare(w)===-1)&&(i=w,f=new Qp(i,e))}),i};var ev=tv;const rv=ie,iv=xe(),nv=(r,t,e)=>{let i=null,f=null,a=null;try{a=new iv(t,e)}catch{return null}return r.forEach(w=>{a.test(w)&&(!i||f.compare(w)===1)&&(i=w,f=new rv(i,e))}),i};var sv=nv;const Vi=ie,ov=xe(),js=yi,av=(r,t)=>{r=new ov(r,t);let e=new Vi("0.0.0");if(r.test(e)||(e=new Vi("0.0.0-0"),r.test(e)))return e;e=null;for(let i=0;i<r.set.length;++i){const f=r.set[i];let a=null;f.forEach(w=>{const C=new Vi(w.semver.version);switch(w.operator){case">":C.prerelease.length===0?C.patch++:C.prerelease.push(0),C.raw=C.format();case"":case">=":(!a||js(C,a))&&(a=C);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${w.operator}`)}}),a&&(!e||js(e,a))&&(e=a)}return e&&r.test(e)?e:null};var lv=av;const hv=xe(),fv=(r,t)=>{try{return new hv(r,t).range||"*"}catch{return null}};var uv=fv;const cv=ie,fa=bi(),{ANY:dv}=fa,pv=xe(),vv=Ci,Gs=yi,Zs=Vn,mv=jn,gv=Kn,wv=(r,t,e,i)=>{r=new cv(r,i),t=new pv(t,i);let f,a,w,C,b;switch(e){case">":f=Gs,a=mv,w=Zs,C=">",b=">=";break;case"<":f=Zs,a=gv,w=Gs,C="<",b="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(vv(r,t,i))return!1;for(let A=0;A<t.set.length;++A){const E=t.set[A];let F=null,S=null;if(E.forEach(_=>{_.semver===dv&&(_=new fa(">=0.0.0")),F=F||_,S=S||_,f(_.semver,F.semver,i)?F=_:w(_.semver,S.semver,i)&&(S=_)}),F.operator===C||F.operator===b||(!S.operator||S.operator===C)&&a(r,S.semver))return!1;if(S.operator===b&&w(r,S.semver))return!1}return!0};var Gn=wv;const yv=Gn,bv=(r,t,e)=>yv(r,t,">",e);var Cv=bv;const Ev=Gn,Av=(r,t,e)=>Ev(r,t,"<",e);var Mv=Av;const zs=xe(),Bv=(r,t,e)=>(r=new zs(r,e),t=new zs(t,e),r.intersects(t,e));var Fv=Bv;const xv=Ci,Sv=Fe;var Dv=(r,t,e)=>{const i=[];let f=null,a=null;const w=r.sort((E,F)=>Sv(E,F,e));for(const E of w)xv(E,t,e)?(a=E,f||(f=E)):(a&&i.push([f,a]),a=null,f=null);f&&i.push([f,null]);const C=[];for(const[E,F]of i)E===F?C.push(E):!F&&E===w[0]?C.push("*"):F?E===w[0]?C.push(`<=${F}`):C.push(`${E} - ${F}`):C.push(`>=${E}`);const b=C.join(" || "),A=typeof t.raw=="string"?t.raw:String(t);return b.length<A.length?b:t};const Ys=xe(),Zn=bi(),{ANY:Ki}=Zn,wr=Ci,zn=Fe,_v=(r,t,e={})=>{if(r===t)return!0;r=new Ys(r,e),t=new Ys(t,e);let i=!1;t:for(const f of r.set){for(const a of t.set){const w=Tv(f,a,e);if(i=i||w!==null,w)continue t}if(i)return!1}return!0},Iv=[new Zn(">=0.0.0-0")],Xs=[new Zn(">=0.0.0")],Tv=(r,t,e)=>{if(r===t)return!0;if(r.length===1&&r[0].semver===Ki){if(t.length===1&&t[0].semver===Ki)return!0;e.includePrerelease?r=Iv:r=Xs}if(t.length===1&&t[0].semver===Ki){if(e.includePrerelease)return!0;t=Xs}const i=new Set;let f,a;for(const _ of r)_.operator===">"||_.operator===">="?f=Qs(f,_,e):_.operator==="<"||_.operator==="<="?a=Js(a,_,e):i.add(_.semver);if(i.size>1)return null;let w;if(f&&a){if(w=zn(f.semver,a.semver,e),w>0)return null;if(w===0&&(f.operator!==">="||a.operator!=="<="))return null}for(const _ of i){if(f&&!wr(_,String(f),e)||a&&!wr(_,String(a),e))return null;for(const bt of t)if(!wr(_,String(bt),e))return!1;return!0}let C,b,A,E,F=a&&!e.includePrerelease&&a.semver.prerelease.length?a.semver:!1,S=f&&!e.includePrerelease&&f.semver.prerelease.length?f.semver:!1;F&&F.prerelease.length===1&&a.operator==="<"&&F.prerelease[0]===0&&(F=!1);for(const _ of t){if(E=E||_.operator===">"||_.operator===">=",A=A||_.operator==="<"||_.operator==="<=",f){if(S&&_.semver.prerelease&&_.semver.prerelease.length&&_.semver.major===S.major&&_.semver.minor===S.minor&&_.semver.patch===S.patch&&(S=!1),_.operator===">"||_.operator===">="){if(C=Qs(f,_,e),C===_&&C!==f)return!1}else if(f.operator===">="&&!wr(f.semver,String(_),e))return!1}if(a){if(F&&_.semver.prerelease&&_.semver.prerelease.length&&_.semver.major===F.major&&_.semver.minor===F.minor&&_.semver.patch===F.patch&&(F=!1),_.operator==="<"||_.operator==="<="){if(b=Js(a,_,e),b===_&&b!==a)return!1}else if(a.operator==="<="&&!wr(a.semver,String(_),e))return!1}if(!_.operator&&(a||f)&&w!==0)return!1}return!(f&&A&&!a&&w!==0||a&&E&&!f&&w!==0||S||F)},Qs=(r,t,e)=>{if(!r)return t;const i=zn(r.semver,t.semver,e);return i>0?r:i<0||t.operator===">"&&r.operator===">="?t:r},Js=(r,t,e)=>{if(!r)return t;const i=zn(r.semver,t.semver,e);return i<0?r:i>0||t.operator==="<"&&r.operator==="<="?t:r};var Nv=_v;const ji=Br,to=gi,Rv=ie,eo=oa,$v=or,Uv=W1,Lv=K1,Ov=G1,Pv=z1,kv=Q1,qv=ep,Wv=np,Hv=ap,Vv=Fe,Kv=up,jv=pp,Gv=Hn,Zv=wp,zv=Cp,Yv=yi,Xv=Vn,Qv=aa,Jv=la,tm=Kn,em=jn,rm=ha,im=Vp,nm=bi(),sm=xe(),om=Ci,am=Xp,lm=ev,hm=sv,fm=lv,um=uv,cm=Gn,dm=Cv,pm=Mv,vm=Fv,mm=Dv,gm=Nv;var wm={parse:$v,valid:Uv,clean:Lv,inc:Ov,diff:Pv,major:kv,minor:qv,patch:Wv,prerelease:Hv,compare:Vv,rcompare:Kv,compareLoose:jv,compareBuild:Gv,sort:Zv,rsort:zv,gt:Yv,lt:Xv,eq:Qv,neq:Jv,gte:tm,lte:em,cmp:rm,coerce:im,Comparator:nm,Range:sm,satisfies:om,toComparators:am,maxSatisfying:lm,minSatisfying:hm,minVersion:fm,validRange:um,outside:cm,gtr:dm,ltr:pm,intersects:vm,simplifyRange:mm,subset:gm,SemVer:Rv,re:ji.re,src:ji.src,tokens:ji.t,SEMVER_SPEC_VERSION:to.SEMVER_SPEC_VERSION,RELEASE_TYPES:to.RELEASE_TYPES,compareIdentifiers:eo.compareIdentifiers,rcompareIdentifiers:eo.rcompareIdentifiers};const ro=yn(wm),on={blue:{id:"blue",productName:"LedgerBlue",productIdMM:0,legacyUsbProductId:0,usbOnly:!0,memorySize:480*1024,blockSize:4*1024,getBlockSize:r=>4*1024},nanoS:{id:"nanoS",productName:"LedgerNanoS",productIdMM:16,legacyUsbProductId:1,usbOnly:!0,memorySize:320*1024,blockSize:4*1024,getBlockSize:r=>ro.lt(ro.coerce(r),"2.0.0")?4*1024:2*1024},nanoX:{id:"nanoX",productName:"LedgerNanoX",productIdMM:64,legacyUsbProductId:4,usbOnly:!1,memorySize:2*1024*1024,blockSize:4*1024,getBlockSize:r=>4*1024,bluetoothSpec:[{serviceUuid:"d973f2e0-b19e-11e2-9e96-0800200c9a66",notifyUuid:"d973f2e1-b19e-11e2-9e96-0800200c9a66",writeUuid:"d973f2e2-b19e-11e2-9e96-0800200c9a66"},{serviceUuid:"13d63400-2c97-0004-0000-4c6564676572",notifyUuid:"13d63400-2c97-0004-0001-4c6564676572",writeUuid:"13d63400-2c97-0004-0002-4c6564676572"}]}},io=Object.values(on),Ei=11415,Ai=r=>{const t=io.find(f=>f.legacyUsbProductId===r);if(t)return t;const e=r>>8;return io.find(f=>f.productIdMM===e)},ua=[],an={};for(let r in on){const t=on[r],{bluetoothSpec:e}=t;if(e)for(let i=0;i<e.length;i++){const f=e[i];ua.push(f.serviceUuid),an[f.serviceUuid]=an[f.serviceUuid.replace(/-/g,"")]={deviceModel:t,...f}}}const ym=()=>ua,bm=r=>an[r.toLowerCase()];let Cm=0;const Ue=[],Qt=(r,t,e)=>{const i={type:r,id:String(++Cm),date:new Date};t&&(i.message=t),e&&(i.data=e),Em(i)},ca=r=>(Ue.push(r),()=>{const t=Ue.indexOf(r);t!==-1&&(Ue[t]=Ue[Ue.length-1],Ue.pop())});function Em(r){for(let t=0;t<Ue.length;t++)try{Ue[t](r)}catch(e){console.error(e)}}typeof window<"u"&&(window.__ledgerLogsListen=ca);const Am=Object.freeze(Object.defineProperty({__proto__:null,listen:ca,log:Qt},Symbol.toStringTag,{value:"Module"})),Mm=[{vendorId:Ei}];async function da(){return await navigator.usb.requestDevice({filters:Mm})}async function Yn(){return(await navigator.usb.getDevices()).filter(t=>t.vendorId===Ei)}async function Bm(){const r=await Yn();return r.length>0?r[0]:da()}const Fm=()=>Promise.resolve(!!navigator&&!!navigator.usb&&typeof navigator.usb.getDevices=="function"),xm=1,no=3;let Mi=class ti extends Ne{constructor(t,e){super(),this.device=void 0,this.deviceModel=void 0,this.channel=Math.floor(Math.random()*65535),this.packetSize=64,this.interfaceNumber=void 0,this._disconnectEmitted=!1,this._emitDisconnect=i=>{this._disconnectEmitted||(this._disconnectEmitted=!0,this.emit("disconnect",i))},this.exchange=i=>this.exchangeAtomicImpl(async()=>{const{channel:f,packetSize:a}=this;Qt("apdu","=> "+i.toString("hex"));const w=qn(f,a),C=w.makeBlocks(i);for(let E=0;E<C.length;E++)await this.device.transferOut(no,C[E]);let b,A;for(;!(b=w.getReducedResult(A));){const E=await this.device.transferIn(no,a),F=Buffer.from(E.data.buffer);A=w.reduceResponse(A,F)}return Qt("apdu","<= "+b.toString("hex")),b}).catch(f=>{throw f&&f.message&&f.message.includes("disconnected")?(this._emitDisconnect(f),new Pn(f.message)):f}),this.device=t,this.interfaceNumber=e,this.deviceModel=Ai(t.productId)}static async request(){const t=await da();return ti.open(t)}static async openConnected(){const t=await Yn();return t.length===0?null:ti.open(t[0])}static async open(t){await t.open(),t.configuration===null&&await t.selectConfiguration(xm),await so(t);const e=t.configurations[0].interfaces.find(({alternates:w})=>w.some(C=>C.interfaceClass===255));if(!e)throw new nn("No WebUSB interface found for your Ledger device. Please upgrade firmware or contact techsupport.");const i=e.interfaceNumber;try{await t.claimInterface(i)}catch(w){throw await t.close(),new nn(w.message)}const f=new ti(t,i),a=w=>{t===w.device&&(navigator.usb.removeEventListener("disconnect",a),f._emitDisconnect(new vi))};return navigator.usb.addEventListener("disconnect",a),f}async close(){await this.exchangeBusyPromise,await this.device.releaseInterface(this.interfaceNumber),await so(this.device),await this.device.close()}setScrambleKey(){}};Mi.isSupported=Fm;Mi.list=Yn;Mi.listen=r=>{let t=!1;Bm().then(i=>{if(!t){const f=Ai(i.productId);r.next({type:"add",descriptor:i,deviceModel:f}),r.complete()}},i=>{window.DOMException&&i instanceof window.DOMException&&i.code===18?r.error(new ea(i.message)):r.error(new Er(i.message))});function e(){t=!0}return{unsubscribe:e}};async function so(r){try{await r.reset()}catch(t){console.warn(t)}}const Sm=Object.freeze(Object.defineProperty({__proto__:null,default:Mi},Symbol.toStringTag,{value:"Module"})),Dm=je(Sm),_m=[{vendorId:Ei}],Im=()=>Promise.resolve(!!(globalThis.navigator&&globalThis.navigator.hid)),oi=()=>{const{hid:r}=navigator;if(!r)throw new Oe("navigator.hid is not supported","HIDNotSupported");return r};async function pa(){const r=await oi().requestDevice({filters:_m});return Array.isArray(r)?r:[r]}async function Xn(){return(await oi().getDevices()).filter(t=>t.vendorId===Ei)}async function Tm(){const r=await Xn();return r.length>0?r[0]:(await pa())[0]}let Bi=class ei extends Ne{constructor(t){super(),this.device=void 0,this.deviceModel=void 0,this.channel=Math.floor(Math.random()*65535),this.packetSize=64,this.inputs=[],this.inputCallback=void 0,this.read=()=>this.inputs.length?Promise.resolve(this.inputs.shift()):new Promise(e=>{this.inputCallback=e}),this.onInputReport=e=>{const i=Buffer.from(e.data.buffer);this.inputCallback?(this.inputCallback(i),this.inputCallback=null):this.inputs.push(i)},this._disconnectEmitted=!1,this._emitDisconnect=e=>{this._disconnectEmitted||(this._disconnectEmitted=!0,this.emit("disconnect",e))},this.exchange=e=>this.exchangeAtomicImpl(async()=>{const{channel:i,packetSize:f}=this;Qt("apdu","=> "+e.toString("hex"));const a=qn(i,f),w=a.makeBlocks(e);for(let A=0;A<w.length;A++)await this.device.sendReport(0,w[A]);let C,b;for(;!(C=a.getReducedResult(b));){const A=await this.read();b=a.reduceResponse(b,A)}return Qt("apdu","<= "+C.toString("hex")),C}).catch(i=>{throw i&&i.message&&i.message.includes("write")?(this._emitDisconnect(i),new Pn(i.message)):i}),this.device=t,this.deviceModel=Ai(t.productId),t.addEventListener("inputreport",this.onInputReport)}static async request(){const[t]=await pa();return ei.open(t)}static async openConnected(){const t=await Xn();return t.length===0?null:ei.open(t[0])}static async open(t){await t.open();const e=new ei(t),i=f=>{t===f.device&&(oi().removeEventListener("disconnect",i),e._emitDisconnect(new vi))};return oi().addEventListener("disconnect",i),e}async close(){await this.exchangeBusyPromise,this.device.removeEventListener("inputreport",this.onInputReport),await this.device.close()}setScrambleKey(){}};Bi.isSupported=Im;Bi.list=Xn;Bi.listen=r=>{let t=!1;Tm().then(i=>{if(!i)r.error(new Er("Access denied to use Ledger device"));else if(!t){const f=Ai(i.productId);r.next({type:"add",descriptor:i,deviceModel:f}),r.complete()}},i=>{r.error(new Er(i.message))});function e(){t=!0}return{unsubscribe:e}};const Nm=Object.freeze(Object.defineProperty({__proto__:null,default:Bi},Symbol.toStringTag,{value:"Module"})),Rm=je(Nm);var Qn={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ln=function(r,t){return ln=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var f in i)i.hasOwnProperty(f)&&(e[f]=i[f])},ln(r,t)};function Ct(r,t){ln(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}function ir(r){return typeof r=="function"}var oo=!1,ae={Promise:void 0,set useDeprecatedSynchronousErrorHandling(r){if(r){var t=new Error;""+t.stack}oo=r},get useDeprecatedSynchronousErrorHandling(){return oo}};function tr(r){setTimeout(function(){throw r},0)}var ai={closed:!0,next:function(r){},error:function(r){if(ae.useDeprecatedSynchronousErrorHandling)throw r;tr(r)},complete:function(){}},le=function(){return Array.isArray||function(r){return r&&typeof r.length=="number"}}();function Jn(r){return r!==null&&typeof r=="object"}var $m=function(){function r(t){return Error.call(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(e,i){return i+1+") "+e.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t,this}return r.prototype=Object.create(Error.prototype),r}(),br=$m,te=function(){function r(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}return r.prototype.unsubscribe=function(){var t;if(!this.closed){var e=this,i=e._parentOrParents,f=e._ctorUnsubscribe,a=e._unsubscribe,w=e._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,i instanceof r)i.remove(this);else if(i!==null)for(var C=0;C<i.length;++C){var b=i[C];b.remove(this)}if(ir(a)){f&&(this._unsubscribe=void 0);try{a.call(this)}catch(F){t=F instanceof br?ao(F.errors):[F]}}if(le(w))for(var C=-1,A=w.length;++C<A;){var E=w[C];if(Jn(E))try{E.unsubscribe()}catch(S){t=t||[],S instanceof br?t=t.concat(ao(S.errors)):t.push(S)}}if(t)throw new br(t)}},r.prototype.add=function(t){var e=t;if(!t)return r.EMPTY;switch(typeof t){case"function":e=new r(t);case"object":if(e===this||e.closed||typeof e.unsubscribe!="function")return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof r)){var i=e;e=new r,e._subscriptions=[i]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var f=e._parentOrParents;if(f===null)e._parentOrParents=this;else if(f instanceof r){if(f===this)return e;e._parentOrParents=[f,this]}else if(f.indexOf(this)===-1)f.push(this);else return e;var a=this._subscriptions;return a===null?this._subscriptions=[e]:a.push(e),e},r.prototype.remove=function(t){var e=this._subscriptions;if(e){var i=e.indexOf(t);i!==-1&&e.splice(i,1)}},r.EMPTY=function(t){return t.closed=!0,t}(new r),r}();function ao(r){return r.reduce(function(t,e){return t.concat(e instanceof br?e.errors:e)},[])}var li=function(){return typeof Symbol=="function"?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),Yt=function(r){Ct(t,r);function t(e,i,f){var a=r.call(this)||this;switch(a.syncErrorValue=null,a.syncErrorThrown=!1,a.syncErrorThrowable=!1,a.isStopped=!1,arguments.length){case 0:a.destination=ai;break;case 1:if(!e){a.destination=ai;break}if(typeof e=="object"){e instanceof t?(a.syncErrorThrowable=e.syncErrorThrowable,a.destination=e,e.add(a)):(a.syncErrorThrowable=!0,a.destination=new lo(a,e));break}default:a.syncErrorThrowable=!0,a.destination=new lo(a,e,i,f);break}return a}return t.prototype[li]=function(){return this},t.create=function(e,i,f){var a=new t(e,i,f);return a.syncErrorThrowable=!1,a},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,r.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(te),lo=function(r){Ct(t,r);function t(e,i,f,a){var w=r.call(this)||this;w._parentSubscriber=e;var C,b=w;return ir(i)?C=i:i&&(C=i.next,f=i.error,a=i.complete,i!==ai&&(b=Object.create(i),ir(b.unsubscribe)&&w.add(b.unsubscribe.bind(b)),b.unsubscribe=w.unsubscribe.bind(w))),w._context=b,w._next=C,w._error=f,w._complete=a,w}return t.prototype.next=function(e){if(!this.isStopped&&this._next){var i=this._parentSubscriber;!ae.useDeprecatedSynchronousErrorHandling||!i.syncErrorThrowable?this.__tryOrUnsub(this._next,e):this.__tryOrSetError(i,this._next,e)&&this.unsubscribe()}},t.prototype.error=function(e){if(!this.isStopped){var i=this._parentSubscriber,f=ae.useDeprecatedSynchronousErrorHandling;if(this._error)!f||!i.syncErrorThrowable?(this.__tryOrUnsub(this._error,e),this.unsubscribe()):(this.__tryOrSetError(i,this._error,e),this.unsubscribe());else if(i.syncErrorThrowable)f?(i.syncErrorValue=e,i.syncErrorThrown=!0):tr(e),this.unsubscribe();else{if(this.unsubscribe(),f)throw e;tr(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var i=this._parentSubscriber;if(this._complete){var f=function(){return e._complete.call(e._context)};!ae.useDeprecatedSynchronousErrorHandling||!i.syncErrorThrowable?(this.__tryOrUnsub(f),this.unsubscribe()):(this.__tryOrSetError(i,f),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,i){try{e.call(this._context,i)}catch(f){if(this.unsubscribe(),ae.useDeprecatedSynchronousErrorHandling)throw f;tr(f)}},t.prototype.__tryOrSetError=function(e,i,f){if(!ae.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{i.call(this._context,f)}catch(a){return ae.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=a,e.syncErrorThrown=!0,!0):(tr(a),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(Yt);function ts(r){for(;r;){var t=r,e=t.closed,i=t.destination,f=t.isStopped;if(e||f)return!1;i&&i instanceof Yt?r=i:r=null}return!0}function Um(r,t,e){if(r){if(r instanceof Yt)return r;if(r[li])return r[li]()}return!r&&!t&&!e?new Yt(ai):new Yt(r,t,e)}var ar=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function nr(r){return r}function Lm(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return va(r)}function va(r){return r.length===0?nr:r.length===1?r[0]:function(e){return r.reduce(function(i,f){return f(i)},e)}}var Et=function(){function r(t){this._isScalar=!1,t&&(this._subscribe=t)}return r.prototype.lift=function(t){var e=new r;return e.source=this,e.operator=t,e},r.prototype.subscribe=function(t,e,i){var f=this.operator,a=Um(t,e,i);if(f?a.add(f.call(a,this.source)):a.add(this.source||ae.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),ae.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a},r.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){ae.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),ts(t)?t.error(e):console.warn(e)}},r.prototype.forEach=function(t,e){var i=this;return e=ho(e),new e(function(f,a){var w;w=i.subscribe(function(C){try{t(C)}catch(b){a(b),w&&w.unsubscribe()}},a,f)})},r.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},r.prototype[ar]=function(){return this},r.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.length===0?this:va(t)(this)},r.prototype.toPromise=function(t){var e=this;return t=ho(t),new t(function(i,f){var a;e.subscribe(function(w){return a=w},function(w){return f(w)},function(){return i(a)})})},r.create=function(t){return new r(t)},r}();function ho(r){if(r||(r=ae.Promise||Promise),!r)throw new Error("no Promise impl found");return r}var Om=function(){function r(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return r.prototype=Object.create(Error.prototype),r}(),Le=Om,ma=function(r){Ct(t,r);function t(e,i){var f=r.call(this)||this;return f.subject=e,f.subscriber=i,f.closed=!1,f}return t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,i=e.observers;if(this.subject=null,!(!i||i.length===0||e.isStopped||e.closed)){var f=i.indexOf(this.subscriber);f!==-1&&i.splice(f,1)}}},t}(te),ga=function(r){Ct(t,r);function t(e){var i=r.call(this,e)||this;return i.destination=e,i}return t}(Yt),lr=function(r){Ct(t,r);function t(){var e=r.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return t.prototype[li]=function(){return new ga(this)},t.prototype.lift=function(e){var i=new fo(this,this);return i.operator=e,i},t.prototype.next=function(e){if(this.closed)throw new Le;if(!this.isStopped)for(var i=this.observers,f=i.length,a=i.slice(),w=0;w<f;w++)a[w].next(e)},t.prototype.error=function(e){if(this.closed)throw new Le;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var i=this.observers,f=i.length,a=i.slice(),w=0;w<f;w++)a[w].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new Le;this.isStopped=!0;for(var e=this.observers,i=e.length,f=e.slice(),a=0;a<i;a++)f[a].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(e){if(this.closed)throw new Le;return r.prototype._trySubscribe.call(this,e)},t.prototype._subscribe=function(e){if(this.closed)throw new Le;return this.hasError?(e.error(this.thrownError),te.EMPTY):this.isStopped?(e.complete(),te.EMPTY):(this.observers.push(e),new ma(this,e))},t.prototype.asObservable=function(){var e=new Et;return e.source=this,e},t.create=function(e,i){return new fo(e,i)},t}(Et),fo=function(r){Ct(t,r);function t(e,i){var f=r.call(this)||this;return f.destination=e,f.source=i,f}return t.prototype.next=function(e){var i=this.destination;i&&i.next&&i.next(e)},t.prototype.error=function(e){var i=this.destination;i&&i.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){var i=this.source;return i?this.source.subscribe(e):te.EMPTY},t}(lr);function wa(){return function(t){return t.lift(new Pm(t))}}var Pm=function(){function r(t){this.connectable=t}return r.prototype.call=function(t,e){var i=this.connectable;i._refCount++;var f=new km(t,i),a=e.subscribe(f);return f.closed||(f.connection=i.connect()),a},r}(),km=function(r){Ct(t,r);function t(e,i){var f=r.call(this,e)||this;return f.connectable=i,f}return t.prototype._unsubscribe=function(){var e=this.connectable;if(!e){this.connection=null;return}this.connectable=null;var i=e._refCount;if(i<=0){this.connection=null;return}if(e._refCount=i-1,i>1){this.connection=null;return}var f=this.connection,a=e._connection;this.connection=null,a&&(!f||a===f)&&a.unsubscribe()},t}(Yt),ya=function(r){Ct(t,r);function t(e,i){var f=r.call(this)||this;return f.source=e,f.subjectFactory=i,f._refCount=0,f._isComplete=!1,f}return t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,e=this._connection=new te,e.add(this.source.subscribe(new Wm(this.getSubject(),this))),e.closed&&(this._connection=null,e=te.EMPTY)),e},t.prototype.refCount=function(){return wa()(this)},t}(Et),qm=function(){var r=ya.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:r._subscribe},_isComplete:{value:r._isComplete,writable:!0},getSubject:{value:r.getSubject},connect:{value:r.connect},refCount:{value:r.refCount}}}(),Wm=function(r){Ct(t,r);function t(e,i){var f=r.call(this,e)||this;return f.connectable=i,f}return t.prototype._error=function(e){this._unsubscribe(),r.prototype._error.call(this,e)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),r.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var i=e._connection;e._refCount=0,e._subject=null,e._connection=null,i&&i.unsubscribe()}},t}(ga),Hm=function(r){Ct(t,r);function t(e,i,f){var a=r.call(this)||this;return a.key=e,a.groupSubject=i,a.refCountSubscription=f,a}return t.prototype._subscribe=function(e){var i=new te,f=this,a=f.refCountSubscription,w=f.groupSubject;return a&&!a.closed&&i.add(new Vm(a)),i.add(w.subscribe(e)),i},t}(Et),Vm=function(r){Ct(t,r);function t(e){var i=r.call(this)||this;return i.parent=e,e.count++,i}return t.prototype.unsubscribe=function(){var e=this.parent;!e.closed&&!this.closed&&(r.prototype.unsubscribe.call(this),e.count-=1,e.count===0&&e.attemptedToUnsubscribe&&e.unsubscribe())},t}(te),Km=function(r){Ct(t,r);function t(e){var i=r.call(this)||this;return i._value=e,i}return Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(e){var i=r.prototype._subscribe.call(this,e);return i&&!i.closed&&e.next(this._value),i},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Le;return this._value},t.prototype.next=function(e){r.prototype.next.call(this,this._value=e)},t}(lr),jm=function(r){Ct(t,r);function t(e,i){return r.call(this)||this}return t.prototype.schedule=function(e,i){return this},t}(te),Fr=function(r){Ct(t,r);function t(e,i){var f=r.call(this,e,i)||this;return f.scheduler=e,f.work=i,f.pending=!1,f}return t.prototype.schedule=function(e,i){if(i===void 0&&(i=0),this.closed)return this;this.state=e;var f=this.id,a=this.scheduler;return f!=null&&(this.id=this.recycleAsyncId(a,f,i)),this.pending=!0,this.delay=i,this.id=this.id||this.requestAsyncId(a,this.id,i),this},t.prototype.requestAsyncId=function(e,i,f){return f===void 0&&(f=0),setInterval(e.flush.bind(e,this),f)},t.prototype.recycleAsyncId=function(e,i,f){if(f===void 0&&(f=0),f!==null&&this.delay===f&&this.pending===!1)return i;clearInterval(i)},t.prototype.execute=function(e,i){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var f=this._execute(e,i);if(f)return f;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,i){var f=!1,a=void 0;try{this.work(e)}catch(w){f=!0,a=!!w&&w||new Error(w)}if(f)return this.unsubscribe(),a},t.prototype._unsubscribe=function(){var e=this.id,i=this.scheduler,f=i.actions,a=f.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,a!==-1&&f.splice(a,1),e!=null&&(this.id=this.recycleAsyncId(i,e,null)),this.delay=null},t}(jm),Gm=function(r){Ct(t,r);function t(e,i){var f=r.call(this,e,i)||this;return f.scheduler=e,f.work=i,f}return t.prototype.schedule=function(e,i){return i===void 0&&(i=0),i>0?r.prototype.schedule.call(this,e,i):(this.delay=i,this.state=e,this.scheduler.flush(this),this)},t.prototype.execute=function(e,i){return i>0||this.closed?r.prototype.execute.call(this,e,i):this._execute(e,i)},t.prototype.requestAsyncId=function(e,i,f){return f===void 0&&(f=0),f!==null&&f>0||f===null&&this.delay>0?r.prototype.requestAsyncId.call(this,e,i,f):e.flush(this)},t}(Fr),hn=function(){function r(t,e){e===void 0&&(e=r.now),this.SchedulerAction=t,this.now=e}return r.prototype.schedule=function(t,e,i){return e===void 0&&(e=0),new this.SchedulerAction(this,t).schedule(i,e)},r.now=function(){return Date.now()},r}(),xr=function(r){Ct(t,r);function t(e,i){i===void 0&&(i=hn.now);var f=r.call(this,e,function(){return t.delegate&&t.delegate!==f?t.delegate.now():i()})||this;return f.actions=[],f.active=!1,f.scheduled=void 0,f}return t.prototype.schedule=function(e,i,f){return i===void 0&&(i=0),t.delegate&&t.delegate!==this?t.delegate.schedule(e,i,f):r.prototype.schedule.call(this,e,i,f)},t.prototype.flush=function(e){var i=this.actions;if(this.active){i.push(e);return}var f;this.active=!0;do if(f=e.execute(e.state,e.delay))break;while(e=i.shift());if(this.active=!1,f){for(;e=i.shift();)e.unsubscribe();throw f}},t}(hn),Zm=function(r){Ct(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t}(xr),ba=new Zm(Gm),Ca=ba,sr=new Et(function(r){return r.complete()});function es(r){return r?zm(r):sr}function zm(r){return new Et(function(t){return r.schedule(function(){return t.complete()})})}function Pe(r){return r&&typeof r.schedule=="function"}var Ea=function(r){return function(t){for(var e=0,i=r.length;e<i&&!t.closed;e++)t.next(r[e]);t.complete()}};function rs(r,t){return new Et(function(e){var i=new te,f=0;return i.add(t.schedule(function(){if(f===r.length){e.complete();return}e.next(r[f++]),e.closed||i.add(this.schedule())})),i})}function Sr(r,t){return t?rs(r,t):new Et(Ea(r))}function is(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=r[r.length-1];return Pe(e)?(r.pop(),rs(r,e)):Sr(r)}function Aa(r,t){return t?new Et(function(e){return t.schedule(Ym,0,{error:r,subscriber:e})}):new Et(function(e){return e.error(r)})}function Ym(r){var t=r.error,e=r.subscriber;e.error(t)}var fn;fn||(fn={});var ri=function(){function r(t,e,i){this.kind=t,this.value=e,this.error=i,this.hasValue=t==="N"}return r.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},r.prototype.do=function(t,e,i){var f=this.kind;switch(f){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return i&&i()}},r.prototype.accept=function(t,e,i){return t&&typeof t.next=="function"?this.observe(t):this.do(t,e,i)},r.prototype.toObservable=function(){var t=this.kind;switch(t){case"N":return is(this.value);case"E":return Aa(this.error);case"C":return es()}throw new Error("unexpected notification kind value")},r.createNext=function(t){return typeof t<"u"?new r("N",t):r.undefinedValueNotification},r.createError=function(t){return new r("E",void 0,t)},r.createComplete=function(){return r.completeNotification},r.completeNotification=new r("C"),r.undefinedValueNotification=new r("N",void 0),r}(),Xm=function(r){Ct(t,r);function t(e,i,f){f===void 0&&(f=0);var a=r.call(this,e)||this;return a.scheduler=i,a.delay=f,a}return t.dispatch=function(e){var i=e.notification,f=e.destination;i.observe(f),this.unsubscribe()},t.prototype.scheduleMessage=function(e){var i=this.destination;i.add(this.scheduler.schedule(t.dispatch,this.delay,new Qm(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(ri.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(ri.createError(e)),this.unsubscribe()},t.prototype._complete=function(){this.scheduleMessage(ri.createComplete()),this.unsubscribe()},t}(Yt),Qm=function(){function r(t,e){this.notification=t,this.destination=e}return r}(),Jm=function(r){Ct(t,r);function t(e,i,f){e===void 0&&(e=Number.POSITIVE_INFINITY),i===void 0&&(i=Number.POSITIVE_INFINITY);var a=r.call(this)||this;return a.scheduler=f,a._events=[],a._infiniteTimeWindow=!1,a._bufferSize=e<1?1:e,a._windowTime=i<1?1:i,i===Number.POSITIVE_INFINITY?(a._infiniteTimeWindow=!0,a.next=a.nextInfiniteTimeWindow):a.next=a.nextTimeWindow,a}return t.prototype.nextInfiniteTimeWindow=function(e){if(!this.isStopped){var i=this._events;i.push(e),i.length>this._bufferSize&&i.shift()}r.prototype.next.call(this,e)},t.prototype.nextTimeWindow=function(e){this.isStopped||(this._events.push(new tg(this._getNow(),e)),this._trimBufferThenGetEvents()),r.prototype.next.call(this,e)},t.prototype._subscribe=function(e){var i=this._infiniteTimeWindow,f=i?this._events:this._trimBufferThenGetEvents(),a=this.scheduler,w=f.length,C;if(this.closed)throw new Le;if(this.isStopped||this.hasError?C=te.EMPTY:(this.observers.push(e),C=new ma(this,e)),a&&e.add(e=new Xm(e,a)),i)for(var b=0;b<w&&!e.closed;b++)e.next(f[b]);else for(var b=0;b<w&&!e.closed;b++)e.next(f[b].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),C},t.prototype._getNow=function(){return(this.scheduler||Ca).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),i=this._bufferSize,f=this._windowTime,a=this._events,w=a.length,C=0;C<w&&!(e-a[C].time<f);)C++;return w>i&&(C=Math.max(C,w-i)),C>0&&a.splice(0,C),a},t}(lr),tg=function(){function r(t,e){this.time=t,this.value=e}return r}(),Dr=function(r){Ct(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.value=null,e.hasNext=!1,e.hasCompleted=!1,e}return t.prototype._subscribe=function(e){return this.hasError?(e.error(this.thrownError),te.EMPTY):this.hasCompleted&&this.hasNext?(e.next(this.value),e.complete(),te.EMPTY):r.prototype._subscribe.call(this,e)},t.prototype.next=function(e){this.hasCompleted||(this.value=e,this.hasNext=!0)},t.prototype.error=function(e){this.hasCompleted||r.prototype.error.call(this,e)},t.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&r.prototype.next.call(this,this.value),r.prototype.complete.call(this)},t}(lr),eg=1,rg=function(){return Promise.resolve()}(),un={};function uo(r){return r in un?(delete un[r],!0):!1}var co={setImmediate:function(r){var t=eg++;return un[t]=!0,rg.then(function(){return uo(t)&&r()}),t},clearImmediate:function(r){uo(r)}},ig=function(r){Ct(t,r);function t(e,i){var f=r.call(this,e,i)||this;return f.scheduler=e,f.work=i,f}return t.prototype.requestAsyncId=function(e,i,f){return f===void 0&&(f=0),f!==null&&f>0?r.prototype.requestAsyncId.call(this,e,i,f):(e.actions.push(this),e.scheduled||(e.scheduled=co.setImmediate(e.flush.bind(e,null))))},t.prototype.recycleAsyncId=function(e,i,f){if(f===void 0&&(f=0),f!==null&&f>0||f===null&&this.delay>0)return r.prototype.recycleAsyncId.call(this,e,i,f);e.actions.length===0&&(co.clearImmediate(i),e.scheduled=void 0)},t}(Fr),ng=function(r){Ct(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var i=this.actions,f,a=-1,w=i.length;e=e||i.shift();do if(f=e.execute(e.state,e.delay))break;while(++a<w&&(e=i.shift()));if(this.active=!1,f){for(;++a<w&&(e=i.shift());)e.unsubscribe();throw f}},t}(xr),Ma=new ng(ig),sg=Ma,Ba=new xr(Fr),hi=Ba,og=function(r){Ct(t,r);function t(e,i){var f=r.call(this,e,i)||this;return f.scheduler=e,f.work=i,f}return t.prototype.requestAsyncId=function(e,i,f){return f===void 0&&(f=0),f!==null&&f>0?r.prototype.requestAsyncId.call(this,e,i,f):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame(function(){return e.flush(null)})))},t.prototype.recycleAsyncId=function(e,i,f){if(f===void 0&&(f=0),f!==null&&f>0||f===null&&this.delay>0)return r.prototype.recycleAsyncId.call(this,e,i,f);e.actions.length===0&&(cancelAnimationFrame(i),e.scheduled=void 0)},t}(Fr),ag=function(r){Ct(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var i=this.actions,f,a=-1,w=i.length;e=e||i.shift();do if(f=e.execute(e.state,e.delay))break;while(++a<w&&(e=i.shift()));if(this.active=!1,f){for(;++a<w&&(e=i.shift());)e.unsubscribe();throw f}},t}(xr),Fa=new ag(og),lg=Fa,hg=function(r){Ct(t,r);function t(e,i){e===void 0&&(e=xa),i===void 0&&(i=Number.POSITIVE_INFINITY);var f=r.call(this,e,function(){return f.frame})||this;return f.maxFrames=i,f.frame=0,f.index=-1,f}return t.prototype.flush=function(){for(var e=this,i=e.actions,f=e.maxFrames,a,w;(w=i[0])&&w.delay<=f&&(i.shift(),this.frame=w.delay,!(a=w.execute(w.state,w.delay))););if(a){for(;w=i.shift();)w.unsubscribe();throw a}},t.frameTimeFactor=10,t}(xr),xa=function(r){Ct(t,r);function t(e,i,f){f===void 0&&(f=e.index+=1);var a=r.call(this,e,i)||this;return a.scheduler=e,a.work=i,a.index=f,a.active=!0,a.index=e.index=f,a}return t.prototype.schedule=function(e,i){if(i===void 0&&(i=0),!this.id)return r.prototype.schedule.call(this,e,i);this.active=!1;var f=new t(this.scheduler,this.work);return this.add(f),f.schedule(e,i)},t.prototype.requestAsyncId=function(e,i,f){f===void 0&&(f=0),this.delay=e.frame+f;var a=e.actions;return a.push(this),a.sort(t.sortActions),!0},t.prototype.recycleAsyncId=function(e,i,f){},t.prototype._execute=function(e,i){if(this.active===!0)return r.prototype._execute.call(this,e,i)},t.sortActions=function(e,i){return e.delay===i.delay?e.index===i.index?0:e.index>i.index?1:-1:e.delay>i.delay?1:-1},t}(Fr);function Ie(){}function fg(r){return!!r&&(r instanceof Et||typeof r.lift=="function"&&typeof r.subscribe=="function")}var ug=function(){function r(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return r.prototype=Object.create(Error.prototype),r}(),Sa=ug,cg=function(){function r(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return r.prototype=Object.create(Error.prototype),r}(),ns=cg,dg=function(){function r(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return r.prototype=Object.create(Error.prototype),r}(),pg=dg;function Ze(r,t){return function(i){if(typeof r!="function")throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return i.lift(new vg(r,t))}}var vg=function(){function r(t,e){this.project=t,this.thisArg=e}return r.prototype.call=function(t,e){return e.subscribe(new mg(t,this.project,this.thisArg))},r}(),mg=function(r){Ct(t,r);function t(e,i,f){var a=r.call(this,e)||this;return a.project=i,a.count=0,a.thisArg=f||a,a}return t.prototype._next=function(e){var i;try{i=this.project.call(this.thisArg,e,this.count++)}catch(f){this.destination.error(f);return}this.destination.next(i)},t}(Yt);function Da(r,t,e){if(t)if(Pe(t))e=t;else return function(){for(var i=[],f=0;f<arguments.length;f++)i[f]=arguments[f];return Da(r,e).apply(void 0,i).pipe(Ze(function(a){return le(a)?t.apply(void 0,a):t(a)}))};return function(){for(var i=[],f=0;f<arguments.length;f++)i[f]=arguments[f];var a=this,w,C={context:a,subject:w,callbackFunc:r,scheduler:e};return new Et(function(b){if(e){var E={args:i,subscriber:b,params:C};return e.schedule(gg,0,E)}else{if(!w){w=new Dr;var A=function(){for(var F=[],S=0;S<arguments.length;S++)F[S]=arguments[S];w.next(F.length<=1?F[0]:F),w.complete()};try{r.apply(a,i.concat([A]))}catch(F){ts(w)?w.error(F):console.warn(F)}}return w.subscribe(b)}})}}function gg(r){var t=this,e=r.args,i=r.subscriber,f=r.params,a=f.callbackFunc,w=f.context,C=f.scheduler,b=f.subject;if(!b){b=f.subject=new Dr;var A=function(){for(var E=[],F=0;F<arguments.length;F++)E[F]=arguments[F];var S=E.length<=1?E[0]:E;t.add(C.schedule(wg,0,{value:S,subject:b}))};try{a.apply(w,e.concat([A]))}catch(E){b.error(E)}}this.add(b.subscribe(i))}function wg(r){var t=r.value,e=r.subject;e.next(t),e.complete()}function _a(r,t,e){if(t)if(Pe(t))e=t;else return function(){for(var i=[],f=0;f<arguments.length;f++)i[f]=arguments[f];return _a(r,e).apply(void 0,i).pipe(Ze(function(a){return le(a)?t.apply(void 0,a):t(a)}))};return function(){for(var i=[],f=0;f<arguments.length;f++)i[f]=arguments[f];var a={subject:void 0,args:i,callbackFunc:r,scheduler:e,context:this};return new Et(function(w){var C=a.context,b=a.subject;if(e)return e.schedule(yg,0,{params:a,subscriber:w,context:C});if(!b){b=a.subject=new Dr;var A=function(){for(var E=[],F=0;F<arguments.length;F++)E[F]=arguments[F];var S=E.shift();if(S){b.error(S);return}b.next(E.length<=1?E[0]:E),b.complete()};try{r.apply(C,i.concat([A]))}catch(E){ts(b)?b.error(E):console.warn(E)}}return b.subscribe(w)})}}function yg(r){var t=this,e=r.params,i=r.subscriber,f=r.context,a=e.callbackFunc,w=e.args,C=e.scheduler,b=e.subject;if(!b){b=e.subject=new Dr;var A=function(){for(var E=[],F=0;F<arguments.length;F++)E[F]=arguments[F];var S=E.shift();if(S)t.add(C.schedule(po,0,{err:S,subject:b}));else{var _=E.length<=1?E[0]:E;t.add(C.schedule(bg,0,{value:_,subject:b}))}};try{a.apply(f,w.concat([A]))}catch(E){this.add(C.schedule(po,0,{err:E,subject:b}))}}this.add(b.subscribe(i))}function bg(r){var t=r.value,e=r.subject;e.next(t),e.complete()}function po(r){var t=r.err,e=r.subject;e.error(t)}var Ia=function(r){Ct(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.notifyNext=function(e,i,f,a,w){this.destination.next(i)},t.prototype.notifyError=function(e,i){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(Yt),Cg=function(r){Ct(t,r);function t(e,i,f){var a=r.call(this)||this;return a.parent=e,a.outerValue=i,a.outerIndex=f,a.index=0,a}return t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(Yt),Eg=function(r){return function(t){return r.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,tr),t}};function Ag(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ke=Ag(),Mg=function(r){return function(t){var e=r[ke]();do{var i=void 0;try{i=e.next()}catch(f){return t.error(f),t}if(i.done){t.complete();break}if(t.next(i.value),t.closed)break}while(!0);return typeof e.return=="function"&&t.add(function(){e.return&&e.return()}),t}},Bg=function(r){return function(t){var e=r[ar]();if(typeof e.subscribe!="function")throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)}},Ta=function(r){return r&&typeof r.length=="number"&&typeof r!="function"};function Na(r){return!!r&&typeof r.subscribe!="function"&&typeof r.then=="function"}var Ar=function(r){if(r&&typeof r[ar]=="function")return Bg(r);if(Ta(r))return Ea(r);if(Na(r))return Eg(r);if(r&&typeof r[ke]=="function")return Mg(r);var t=Jn(r)?"an invalid object":"'"+r+"'",e="You provided "+t+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";throw new TypeError(e)};function Ra(r,t,e,i,f){if(f===void 0&&(f=new Cg(r,e,i)),!f.closed)return t instanceof Et?t.subscribe(f):Ar(t)(f)}var vo={};function Fg(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=void 0,i=void 0;return Pe(r[r.length-1])&&(i=r.pop()),typeof r[r.length-1]=="function"&&(e=r.pop()),r.length===1&&le(r[0])&&(r=r[0]),Sr(r,i).lift(new xg(e))}var xg=function(){function r(t){this.resultSelector=t}return r.prototype.call=function(t,e){return e.subscribe(new Sg(t,this.resultSelector))},r}(),Sg=function(r){Ct(t,r);function t(e,i){var f=r.call(this,e)||this;return f.resultSelector=i,f.active=0,f.values=[],f.observables=[],f}return t.prototype._next=function(e){this.values.push(vo),this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,i=e.length;if(i===0)this.destination.complete();else{this.active=i,this.toRespond=i;for(var f=0;f<i;f++){var a=e[f];this.add(Ra(this,a,void 0,f))}}},t.prototype.notifyComplete=function(e){(this.active-=1)===0&&this.destination.complete()},t.prototype.notifyNext=function(e,i,f){var a=this.values,w=a[f],C=this.toRespond?w===vo?--this.toRespond:this.toRespond:0;a[f]=i,C===0&&(this.resultSelector?this._tryResultSelector(a):this.destination.next(a.slice()))},t.prototype._tryResultSelector=function(e){var i;try{i=this.resultSelector.apply(this,e)}catch(f){this.destination.error(f);return}this.destination.next(i)},t}(Ia);function Dg(r,t){return new Et(function(e){var i=new te;return i.add(t.schedule(function(){var f=r[ar]();i.add(f.subscribe({next:function(a){i.add(t.schedule(function(){return e.next(a)}))},error:function(a){i.add(t.schedule(function(){return e.error(a)}))},complete:function(){i.add(t.schedule(function(){return e.complete()}))}}))})),i})}function _g(r,t){return new Et(function(e){var i=new te;return i.add(t.schedule(function(){return r.then(function(f){i.add(t.schedule(function(){e.next(f),i.add(t.schedule(function(){return e.complete()}))}))},function(f){i.add(t.schedule(function(){return e.error(f)}))})})),i})}function Ig(r,t){if(!r)throw new Error("Iterable cannot be null");return new Et(function(e){var i=new te,f;return i.add(function(){f&&typeof f.return=="function"&&f.return()}),i.add(t.schedule(function(){f=r[ke](),i.add(t.schedule(function(){if(!e.closed){var a,w;try{var C=f.next();a=C.value,w=C.done}catch(b){e.error(b);return}w?e.complete():(e.next(a),this.schedule())}}))})),i})}function Tg(r){return r&&typeof r[ar]=="function"}function Ng(r){return r&&typeof r[ke]=="function"}function $a(r,t){if(r!=null){if(Tg(r))return Dg(r,t);if(Na(r))return _g(r,t);if(Ta(r))return rs(r,t);if(Ng(r)||typeof r=="string")return Ig(r,t)}throw new TypeError((r!==null&&typeof r||r)+" is not observable")}function ze(r,t){return t?$a(r,t):r instanceof Et?r:new Et(Ar(r))}var Ua=function(r){Ct(t,r);function t(e){var i=r.call(this)||this;return i.parent=e,i}return t.prototype._next=function(e){this.parent.notifyNext(e)},t.prototype._error=function(e){this.parent.notifyError(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},t}(Yt),La=function(r){Ct(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(){this.destination.complete()},t}(Yt);function Oa(r,t){if(!t.closed){if(r instanceof Et)return r.subscribe(t);var e;try{e=Ar(r)(t)}catch(i){t.error(i)}return e}}function Pa(r,t,e){return e===void 0&&(e=Number.POSITIVE_INFINITY),typeof t=="function"?function(i){return i.pipe(Pa(function(f,a){return ze(r(f,a)).pipe(Ze(function(w,C){return t(f,w,a,C)}))},e))}:(typeof t=="number"&&(e=t),function(i){return i.lift(new Rg(r,e))})}var Rg=function(){function r(t,e){e===void 0&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return r.prototype.call=function(t,e){return e.subscribe(new $g(t,this.project,this.concurrent))},r}(),$g=function(r){Ct(t,r);function t(e,i,f){f===void 0&&(f=Number.POSITIVE_INFINITY);var a=r.call(this,e)||this;return a.project=i,a.concurrent=f,a.hasCompleted=!1,a.buffer=[],a.active=0,a.index=0,a}return t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var i,f=this.index++;try{i=this.project(e,f)}catch(a){this.destination.error(a);return}this.active++,this._innerSub(i)},t.prototype._innerSub=function(e){var i=new Ua(this),f=this.destination;f.add(i);var a=Oa(e,i);a!==i&&f.add(a)},t.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyComplete=function(){var e=this.buffer;this.active--,e.length>0?this._next(e.shift()):this.active===0&&this.hasCompleted&&this.destination.complete()},t}(La);function ka(r){return r===void 0&&(r=Number.POSITIVE_INFINITY),Pa(nr,r)}function Ug(){return ka(1)}function Lg(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return Ug()(is.apply(void 0,r))}function ss(r){return new Et(function(t){var e;try{e=r()}catch(f){t.error(f);return}var i=e?ze(e):es();return i.subscribe(t)})}function Og(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];if(r.length===1){var e=r[0];if(le(e))return Yr(e,null);if(Jn(e)&&Object.getPrototypeOf(e)===Object.prototype){var i=Object.keys(e);return Yr(i.map(function(a){return e[a]}),i)}}if(typeof r[r.length-1]=="function"){var f=r.pop();return r=r.length===1&&le(r[0])?r[0]:r,Yr(r,null).pipe(Ze(function(a){return f.apply(void 0,a)}))}return Yr(r,null)}function Yr(r,t){return new Et(function(e){var i=r.length;if(i===0){e.complete();return}for(var f=new Array(i),a=0,w=0,C=function(A){var E=ze(r[A]),F=!1;e.add(E.subscribe({next:function(S){F||(F=!0,w++),f[A]=S},error:function(S){return e.error(S)},complete:function(){a++,(a===i||!F)&&(w===i&&e.next(t?t.reduce(function(S,_,bt){return S[_]=f[bt],S},{}):f),e.complete())}}))},b=0;b<i;b++)C(b)})}function qa(r,t,e,i){return ir(e)&&(i=e,e=void 0),i?qa(r,t,e).pipe(Ze(function(f){return le(f)?i.apply(void 0,f):i(f)})):new Et(function(f){function a(w){arguments.length>1?f.next(Array.prototype.slice.call(arguments)):f.next(w)}Wa(r,t,a,f,e)})}function Wa(r,t,e,i,f){var a;if(qg(r)){var w=r;r.addEventListener(t,e,f),a=function(){return w.removeEventListener(t,e,f)}}else if(kg(r)){var C=r;r.on(t,e),a=function(){return C.off(t,e)}}else if(Pg(r)){var b=r;r.addListener(t,e),a=function(){return b.removeListener(t,e)}}else if(r&&r.length)for(var A=0,E=r.length;A<E;A++)Wa(r[A],t,e,i,f);else throw new TypeError("Invalid event target");i.add(a)}function Pg(r){return r&&typeof r.addListener=="function"&&typeof r.removeListener=="function"}function kg(r){return r&&typeof r.on=="function"&&typeof r.off=="function"}function qg(r){return r&&typeof r.addEventListener=="function"&&typeof r.removeEventListener=="function"}function Ha(r,t,e){return e?Ha(r,t).pipe(Ze(function(i){return le(i)?e.apply(void 0,i):e(i)})):new Et(function(i){var f=function(){for(var w=[],C=0;C<arguments.length;C++)w[C]=arguments[C];return i.next(w.length===1?w[0]:w)},a;try{a=r(f)}catch(w){i.error(w);return}if(ir(t))return function(){return t(f,a)}})}function Wg(r,t,e,i,f){var a,w;if(arguments.length==1){var C=r;w=C.initialState,t=C.condition,e=C.iterate,a=C.resultSelector||nr,f=C.scheduler}else i===void 0||Pe(i)?(w=r,a=nr,f=i):(w=r,a=i);return new Et(function(b){var A=w;if(f)return f.schedule(Hg,0,{subscriber:b,iterate:e,condition:t,resultSelector:a,state:A});do{if(t){var E=void 0;try{E=t(A)}catch(S){b.error(S);return}if(!E){b.complete();break}}var F=void 0;try{F=a(A)}catch(S){b.error(S);return}if(b.next(F),b.closed)break;try{A=e(A)}catch(S){b.error(S);return}}while(!0)})}function Hg(r){var t=r.subscriber,e=r.condition;if(!t.closed){if(r.needIterate)try{r.state=r.iterate(r.state)}catch(a){t.error(a);return}else r.needIterate=!0;if(e){var i=void 0;try{i=e(r.state)}catch(a){t.error(a);return}if(!i){t.complete();return}if(t.closed)return}var f;try{f=r.resultSelector(r.state)}catch(a){t.error(a);return}if(!t.closed&&(t.next(f),!t.closed))return this.schedule(r)}}function Vg(r,t,e){return t===void 0&&(t=sr),e===void 0&&(e=sr),ss(function(){return r()?t:e})}function cn(r){return!le(r)&&r-parseFloat(r)+1>=0}function Kg(r,t){return r===void 0&&(r=0),t===void 0&&(t=hi),(!cn(r)||r<0)&&(r=0),(!t||typeof t.schedule!="function")&&(t=hi),new Et(function(e){return e.add(t.schedule(jg,r,{subscriber:e,counter:0,period:r})),e})}function jg(r){var t=r.subscriber,e=r.counter,i=r.period;t.next(e),this.schedule({subscriber:t,counter:e+1,period:i},i)}function dn(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=Number.POSITIVE_INFINITY,i=null,f=r[r.length-1];return Pe(f)?(i=r.pop(),r.length>1&&typeof r[r.length-1]=="number"&&(e=r.pop())):typeof f=="number"&&(e=r.pop()),i===null&&r.length===1&&r[0]instanceof Et?r[0]:ka(e)(Sr(r,i))}var Va=new Et(Ie);function Gg(){return Va}function pn(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];if(r.length===0)return sr;var e=r[0],i=r.slice(1);return r.length===1&&le(e)?pn.apply(void 0,e):new Et(function(f){var a=function(){return f.add(pn.apply(void 0,i).subscribe(f))};return ze(e).subscribe({next:function(w){f.next(w)},error:a,complete:a})})}function Zg(r,t){return t?new Et(function(e){var i=Object.keys(r),f=new te;return f.add(t.schedule(zg,0,{keys:i,index:0,subscriber:e,subscription:f,obj:r})),f}):new Et(function(e){for(var i=Object.keys(r),f=0;f<i.length&&!e.closed;f++){var a=i[f];r.hasOwnProperty(a)&&e.next([a,r[a]])}e.complete()})}function zg(r){var t=r.keys,e=r.index,i=r.subscriber,f=r.subscription,a=r.obj;if(!i.closed)if(e<t.length){var w=t[e];i.next([w,a[w]]),f.add(this.schedule({keys:t,index:e+1,subscriber:i,subscription:f,obj:a}))}else i.complete()}function Yg(r,t){function e(){return!e.pred.apply(e.thisArg,arguments)}return e.pred=r,e.thisArg=t,e}function vn(r,t){return function(i){return i.lift(new Xg(r,t))}}var Xg=function(){function r(t,e){this.predicate=t,this.thisArg=e}return r.prototype.call=function(t,e){return e.subscribe(new Qg(t,this.predicate,this.thisArg))},r}(),Qg=function(r){Ct(t,r);function t(e,i,f){var a=r.call(this,e)||this;return a.predicate=i,a.thisArg=f,a.count=0,a}return t.prototype._next=function(e){var i;try{i=this.predicate.call(this.thisArg,e,this.count++)}catch(f){this.destination.error(f);return}i&&this.destination.next(e)},t}(Yt);function Jg(r,t,e){return[vn(t,e)(new Et(Ar(r))),vn(Yg(t,e))(new Et(Ar(r)))]}function tw(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];if(r.length===1)if(le(r[0]))r=r[0];else return r[0];return Sr(r,void 0).lift(new ew)}var ew=function(){function r(){}return r.prototype.call=function(t,e){return e.subscribe(new rw(t))},r}(),rw=function(r){Ct(t,r);function t(e){var i=r.call(this,e)||this;return i.hasFirst=!1,i.observables=[],i.subscriptions=[],i}return t.prototype._next=function(e){this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,i=e.length;if(i===0)this.destination.complete();else{for(var f=0;f<i&&!this.hasFirst;f++){var a=e[f],w=Ra(this,a,void 0,f);this.subscriptions&&this.subscriptions.push(w),this.add(w)}this.observables=null}},t.prototype.notifyNext=function(e,i,f){if(!this.hasFirst){this.hasFirst=!0;for(var a=0;a<this.subscriptions.length;a++)if(a!==f){var w=this.subscriptions[a];w.unsubscribe(),this.remove(w)}this.subscriptions=null}this.destination.next(i)},t}(Ia);function iw(r,t,e){return r===void 0&&(r=0),new Et(function(i){t===void 0&&(t=r,r=0);var f=0,a=r;if(e)return e.schedule(nw,0,{index:f,count:t,start:r,subscriber:i});do{if(f++>=t){i.complete();break}if(i.next(a++),i.closed)break}while(!0)})}function nw(r){var t=r.start,e=r.index,i=r.count,f=r.subscriber;if(e>=i){f.complete();return}f.next(t),!f.closed&&(r.index=e+1,r.start=t+1,this.schedule(r))}function sw(r,t,e){r===void 0&&(r=0);var i=-1;return cn(t)?i=Number(t)<1&&1||Number(t):Pe(t)&&(e=t),Pe(e)||(e=hi),new Et(function(f){var a=cn(r)?r:+r-e.now();return e.schedule(ow,a,{index:0,period:i,subscriber:f})})}function ow(r){var t=r.index,e=r.period,i=r.subscriber;if(i.next(t),!i.closed){if(e===-1)return i.complete();r.index=t+1,this.schedule(r,e)}}function aw(r,t){return new Et(function(e){var i;try{i=r()}catch(C){e.error(C);return}var f;try{f=t(i)}catch(C){e.error(C);return}var a=f?ze(f):sr,w=a.subscribe(e);return function(){w.unsubscribe(),i&&i.unsubscribe()}})}function lw(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=r[r.length-1];return typeof e=="function"&&r.pop(),Sr(r,void 0).lift(new hw(e))}var hw=function(){function r(t){this.resultSelector=t}return r.prototype.call=function(t,e){return e.subscribe(new fw(t,this.resultSelector))},r}(),fw=function(r){Ct(t,r);function t(e,i,f){var a=r.call(this,e)||this;return a.resultSelector=i,a.iterators=[],a.active=0,a.resultSelector=typeof i=="function"?i:void 0,a}return t.prototype._next=function(e){var i=this.iterators;le(e)?i.push(new cw(e)):typeof e[ke]=="function"?i.push(new uw(e[ke]())):i.push(new dw(this.destination,this,e))},t.prototype._complete=function(){var e=this.iterators,i=e.length;if(this.unsubscribe(),i===0){this.destination.complete();return}this.active=i;for(var f=0;f<i;f++){var a=e[f];if(a.stillUnsubscribed){var w=this.destination;w.add(a.subscribe())}else this.active--}},t.prototype.notifyInactive=function(){this.active--,this.active===0&&this.destination.complete()},t.prototype.checkIterators=function(){for(var e=this.iterators,i=e.length,f=this.destination,a=0;a<i;a++){var w=e[a];if(typeof w.hasValue=="function"&&!w.hasValue())return}for(var C=!1,b=[],a=0;a<i;a++){var w=e[a],A=w.next();if(w.hasCompleted()&&(C=!0),A.done){f.complete();return}b.push(A.value)}this.resultSelector?this._tryresultSelector(b):f.next(b),C&&f.complete()},t.prototype._tryresultSelector=function(e){var i;try{i=this.resultSelector.apply(this,e)}catch(f){this.destination.error(f);return}this.destination.next(i)},t}(Yt),uw=function(){function r(t){this.iterator=t,this.nextResult=t.next()}return r.prototype.hasValue=function(){return!0},r.prototype.next=function(){var t=this.nextResult;return this.nextResult=this.iterator.next(),t},r.prototype.hasCompleted=function(){var t=this.nextResult;return!!(t&&t.done)},r}(),cw=function(){function r(t){this.array=t,this.index=0,this.length=0,this.length=t.length}return r.prototype[ke]=function(){return this},r.prototype.next=function(t){var e=this.index++,i=this.array;return e<this.length?{value:i[e],done:!1}:{value:null,done:!0}},r.prototype.hasValue=function(){return this.array.length>this.index},r.prototype.hasCompleted=function(){return this.array.length===this.index},r}(),dw=function(r){Ct(t,r);function t(e,i,f){var a=r.call(this,e)||this;return a.parent=i,a.observable=f,a.stillUnsubscribed=!0,a.buffer=[],a.isComplete=!1,a}return t.prototype[ke]=function(){return this},t.prototype.next=function(){var e=this.buffer;return e.length===0&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}},t.prototype.hasValue=function(){return this.buffer.length>0},t.prototype.hasCompleted=function(){return this.buffer.length===0&&this.isComplete},t.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},t.prototype.notifyNext=function(e){this.buffer.push(e),this.parent.checkIterators()},t.prototype.subscribe=function(){return Oa(this.observable,new Ua(this))},t}(La);const pw=Object.freeze(Object.defineProperty({__proto__:null,ArgumentOutOfRangeError:Sa,AsyncSubject:Dr,BehaviorSubject:Km,ConnectableObservable:ya,EMPTY:sr,EmptyError:ns,GroupedObservable:Hm,NEVER:Va,Notification:ri,get NotificationKind(){return fn},ObjectUnsubscribedError:Le,Observable:Et,ReplaySubject:Jm,Scheduler:hn,Subject:lr,Subscriber:Yt,Subscription:te,TimeoutError:pg,UnsubscriptionError:br,VirtualAction:xa,VirtualTimeScheduler:hg,animationFrame:lg,animationFrameScheduler:Fa,asap:sg,asapScheduler:Ma,async:hi,asyncScheduler:Ba,bindCallback:Da,bindNodeCallback:_a,combineLatest:Fg,concat:Lg,config:ae,defer:ss,empty:es,forkJoin:Og,from:ze,fromEvent:qa,fromEventPattern:Ha,generate:Wg,identity:nr,iif:Vg,interval:Kg,isObservable:fg,merge:dn,never:Gg,noop:Ie,observable:ar,of:is,onErrorResumeNext:pn,pairs:Zg,partition:Jg,pipe:Lm,queue:Ca,queueScheduler:ba,race:tw,range:iw,scheduled:$a,throwError:Aa,timer:sw,using:aw,zip:lw},Symbol.toStringTag,{value:"Module"})),Ka=je(pw),ja=je(Am);Object.defineProperty(Qn,"__esModule",{value:!0});var Ga=Qn.sendAPDU=void 0,vw=Ka,mo=ja;const mw=5;function gw(r,t){const e=[];for(let i=0,f=t(0);i<r.length;i+=f,f=t(i))e.push(r.slice(i,i+f));return e}const ww=(r,t,e)=>{const i=gw(t,f=>e-(f===0?5:3)).map((f,a)=>{const w=Buffer.alloc(a===0?5:3);return w.writeUInt8(mw,0),w.writeUInt16BE(a,1),a===0&&w.writeUInt16BE(t.length,3),Buffer.concat([w,f])});return vw.Observable.create(f=>{let a=!1;async function w(){for(const b of i){if(a)return;await r(b)}}return w().then(()=>{a=!0,f.complete()},b=>{a=!0,(0,mo.log)("ble-error","sendAPDU failure "+String(b)),f.error(b)}),()=>{a||((0,mo.log)("ble-verbose","sendAPDU interruption"),a=!0)}})};Ga=Qn.sendAPDU=ww;var os={};Object.defineProperty(os,"__esModule",{value:!0});var Za=os.receiveAPDU=void 0,Xr=ia,yw=Ka,bw=ja;const Cw=5,Ew=r=>yw.Observable.create(t=>{let e=0,i=0,f=Buffer.alloc(0);const a=r.subscribe({complete:()=>{t.error(new Xr.DisconnectedDevice),a.unsubscribe()},error:w=>{(0,bw.log)("ble-error","in receiveAPDU "+String(w)),t.error(w),a.unsubscribe()},next:w=>{const C=w.readUInt8(0),b=w.readUInt16BE(1);let A=w.slice(3);if(C!==Cw){t.error(new Xr.TransportError("Invalid tag "+C.toString(16),"InvalidTag"));return}if(e!==b){t.error(new Xr.TransportError("BLE: Invalid sequence number. discontinued chunk. Received "+b+" but expected "+e,"InvalidSequence"));return}if(b===0&&(i=A.readUInt16BE(0),A=A.slice(2)),e++,f=Buffer.concat([f,A]),f.length>i){t.error(new Xr.TransportError("BLE: received too much data. discontinued chunk. Received "+f.length+" but expected "+i,"BLETooMuchData"));return}f.length===i&&(t.next(f),t.complete(),a.unsubscribe())}});return()=>{a.unsubscribe()}});Za=os.receiveAPDU=Ew;function Aw(r){return r===void 0&&(r=null),function(t){return t.lift(new Mw(r))}}var Mw=function(){function r(t){this.defaultValue=t}return r.prototype.call=function(t,e){return e.subscribe(new Bw(t,this.defaultValue))},r}(),Bw=function(r){Ct(t,r);function t(e,i){var f=r.call(this,e)||this;return f.defaultValue=i,f.isEmpty=!0,f}return t.prototype._next=function(e){this.isEmpty=!1,this.destination.next(e)},t.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},t}(Yt);function Fw(r){return r===void 0&&(r=Dw),function(t){return t.lift(new xw(r))}}var xw=function(){function r(t){this.errorFactory=t}return r.prototype.call=function(t,e){return e.subscribe(new Sw(t,this.errorFactory))},r}(),Sw=function(r){Ct(t,r);function t(e,i){var f=r.call(this,e)||this;return f.errorFactory=i,f.hasValue=!1,f}return t.prototype._next=function(e){this.hasValue=!0,this.destination.next(e)},t.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var e=void 0;try{e=this.errorFactory()}catch(i){e=i}this.destination.error(e)},t}(Yt);function Dw(){return new ns}function _w(r){return function(t){return t.lift(new Iw(r))}}var Iw=function(){function r(t){if(this.total=t,this.total<0)throw new Sa}return r.prototype.call=function(t,e){return e.subscribe(new Tw(t,this.total))},r}(),Tw=function(r){Ct(t,r);function t(e,i){var f=r.call(this,e)||this;return f.total=i,f.count=0,f}return t.prototype._next=function(e){var i=this.total,f=++this.count;f<=i&&(this.destination.next(e),f===i&&(this.destination.complete(),this.unsubscribe()))},t}(Yt);function Nw(r,t){var e=arguments.length>=2;return function(i){return i.pipe(r?vn(function(f,a){return r(f,a,i)}):nr,_w(1),e?Aw(t):Fw(function(){return new ns}))}}function Rw(){return function(t){return t.lift(new $w)}}var $w=function(){function r(){}return r.prototype.call=function(t,e){return e.subscribe(new Uw(t))},r}(),Uw=function(r){Ct(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype._next=function(e){},t}(Yt);function Lw(r,t){return function(i){var f;typeof r=="function"?f=r:f=function(){return r};var a=Object.create(i,qm);return a.source=i,a.subjectFactory=f,a}}function Ow(){return new lr}function Pw(){return function(r){return wa()(Lw(Ow)(r))}}function kw(r,t,e){return function(f){return f.lift(new qw(r,t,e))}}var qw=function(){function r(t,e,i){this.nextOrObserver=t,this.error=e,this.complete=i}return r.prototype.call=function(t,e){return e.subscribe(new Ww(t,this.nextOrObserver,this.error,this.complete))},r}(),Ww=function(r){Ct(t,r);function t(e,i,f,a){var w=r.call(this,e)||this;return w._tapNext=Ie,w._tapError=Ie,w._tapComplete=Ie,w._tapError=f||Ie,w._tapComplete=a||Ie,ir(i)?(w._context=w,w._tapNext=i):i&&(w._context=i,w._tapNext=i.next||Ie,w._tapError=i.error||Ie,w._tapComplete=i.complete||Ie),w}return t.prototype._next=function(e){try{this._tapNext.call(this._context,e)}catch(i){this.destination.error(i);return}this.destination.next(e)},t.prototype._error=function(e){try{this._tapError.call(this._context,e)}catch(i){this.destination.error(i);return}this.destination.error(e)},t.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(e){this.destination.error(e);return}return this.destination.complete()},t}(Yt);const Hw=r=>Et.create(t=>{Qt("ble-verbose","start monitor "+r.uuid);function e(i){const f=i.target;f.value&&t.next(Buffer.from(f.value.buffer))}return r.startNotifications().then(()=>{r.addEventListener("characteristicvaluechanged",e)}),()=>{Qt("ble-verbose","end monitor "+r.uuid),r.stopNotifications()}}),Fi=()=>{const{bluetooth:r}=navigator;if(typeof r>"u")throw new Error("web bluetooth not supported");return r},Vw=()=>Et.create(r=>{const t=Fi(),e=f=>{r.next(f.value)};t.addEventListener("availabilitychanged",e);let i=!1;return t.getAvailability().then(f=>{i||r.next(f)}),()=>{i=!0,t.removeEventListener("availabilitychanged",e)}}),yr={},za=()=>({filters:ym().map(r=>({services:[r]}))}),Kw=async r=>{if(!r.gatt)throw new Error("bluetooth gatt not found");const[t]=await r.gatt.getPrimaryServices();if(!t)throw new Error("bluetooth service not found");const e=bm(t.uuid);if(!e)throw new Error("bluetooth service infos not found");return[t,e]};async function Ya(r,t){let e;if(typeof r=="string"){if(yr[r])return Qt("ble-verbose","Transport in cache, using that."),yr[r];e=await Fi().requestDevice(za())}else e=r;e.gatt.connected||(Qt("ble-verbose","not connected. connecting..."),await e.gatt.connect());const[i,f]=await Kw(e),{deviceModel:a,writeUuid:w,notifyUuid:C}=f,[b,A]=await Promise.all([i.getCharacteristic(w),i.getCharacteristic(C)]),E=Hw(A).pipe(kw(T=>{Qt("ble-frame","<= "+T.toString("hex"))}),Pw()),F=E.subscribe(),S=new hr(e,b,E,a);if(!e.gatt.connected)throw new vi;yr[S.id]=S;const _=T=>{console.log("onDisconnect!",T),delete yr[S.id],S.notYetDisconnected=!1,F.unsubscribe(),e.removeEventListener("gattserverdisconnected",_),Qt("ble-verbose",`BleTransport(${S.id}) disconnected`),S.emit("disconnect",T)};e.addEventListener("gattserverdisconnected",_);let bt=Date.now();try{await S.inferMTU()}finally{Date.now()-bt<1e3&&(t=!1),t&&(await e.gatt.disconnect(),await new Promise(Q=>setTimeout(Q,4e3)))}return t?Ya(e,!1):S}let hr=class extends Ne{static listen(t){Qt("ble-verbose","listen...");let e;Fi().requestDevice(za()).then(async a=>{e||(t.next({type:"add",descriptor:a}),t.complete())},a=>{t.error(new Er(a.message))});function f(){e=!0}return{unsubscribe:f}}static async open(t){return Ya(t,!0)}constructor(t,e,i,f){super(),this.id=void 0,this.device=void 0,this.mtuSize=20,this.writeCharacteristic=void 0,this.notifyObservable=void 0,this.notYetDisconnected=!0,this.deviceModel=void 0,this.exchange=a=>this.exchangeAtomicImpl(async()=>{try{const w=a.toString("hex");Qt("apdu",`=> ${w}`);const C=await dn(this.notifyObservable.pipe(Za),Ga(this.write,a,this.mtuSize)).toPromise(),b=C.toString("hex");return Qt("apdu",`<= ${b}`),C}catch(w){throw Qt("ble-error","exchange got "+String(w)),this.notYetDisconnected&&this.device.gatt.disconnect(),w}}),this.write=async a=>{Qt("ble-frame","=> "+a.toString("hex")),await this.writeCharacteristic.writeValue(a)},this.id=t.id,this.device=t,this.writeCharacteristic=e,this.notifyObservable=i,this.deviceModel=f,Qt("ble-verbose",`BleTransport(${String(this.id)}) new instance`)}async inferMTU(){let t=23;if(await this.exchangeAtomicImpl(async()=>{try{t=await dn(this.notifyObservable.pipe(Nw(e=>e.readUInt8(0)===8),Ze(e=>e.readUInt8(5))),ss(()=>ze(this.write(Buffer.from([8,0,0,0,0])))).pipe(Rw())).toPromise()+3}catch(e){throw Qt("ble-error","inferMTU got "+String(e)),this.device.gatt.disconnect(),e}}),t>23){const e=t-3;Qt("ble-verbose",`BleTransport(${String(this.id)}) mtu set to ${String(e)}`),this.mtuSize=e}return this.mtuSize}setScrambleKey(){}async close(){this.exchangeBusyPromise&&await this.exchangeBusyPromise}};hr.isSupported=()=>Promise.resolve().then(Fi).then(()=>!0,()=>!1);hr.observeAvailability=r=>Vw.subscribe(r);hr.list=()=>Promise.resolve([]);hr.disconnect=async r=>{Qt("ble-verbose",`user disconnect(${r})`);const t=yr[r];t&&t.device.gatt.disconnect()};const jw=Object.freeze(Object.defineProperty({__proto__:null,default:hr},Symbol.toStringTag,{value:"Module"})),Gw=je(jw);var Xa={},Qa={};const{parseAddress:Zw}=se,{AdnlAddress:zw,StorageBagId:Yw,BN:go,sha256:Xw,bytesToHex:Qw,bytesToBase64:Jw}=Bt,{Cell:_r}=Ft,mn="dns_next_resolver",Ja="wallet",tl="site",el="storage",rl=async r=>{if(!r)return new go(0);const t=new TextEncoder().encode(r),e=new Uint8Array(await Xw(t));return new go(Qw(e),16)},t2=r=>{const t=new _r;return t.bits.writeUint(40915,16),t.bits.writeAddress(r),t.bits.writeUint(0,8),t},e2=r=>{const t=new _r;return t.bits.writeUint(44289,16),t.bits.writeBytes(r.bytes),t.bits.writeUint(0,8),t},r2=r=>{const t=new _r;return t.bits.writeUint(29811,16),t.bits.writeBytes(r.bytes),t},i2=r=>{const t=new _r;return t.bits.writeUint(47763,16),t.bits.writeAddress(r),t},il=(r,t,e)=>{if(r.bits.array[0]!==t||r.bits.array[1]!==e)throw new Error("Invalid dns record value prefix");return r.bits.array=r.bits.array.slice(2),Zw(r)},nl=r=>il(r,159,211),gn=r=>il(r,186,147),sl=r=>{if(r.bits.array[0]!==173||r.bits.array[1]!==1)throw new Error("Invalid dns record value prefix");const t=r.bits.array.slice(2,34);return new zw(t)},as=r=>{if(r.bits.array[0]!==116||r.bits.array[1]!==115)throw new Error("Invalid dns record value prefix");const t=r.bits.array.slice(2,34);return new Yw(t)},ol=r=>r?r.bits.array[0]===173||r.bits.array[1]===1?sl(r):as(r):null,al=async(r,t,e,i,f)=>{const a=e.length*8,w=new _r;w.bits.writeBytes(e);const C=await rl(i),b=await r.call2(t,"dnsresolve",[["tvm.Slice",Jw(await w.toBoc(!1))],["num",C.toString()]]);if(b.length!==2)throw new Error("Invalid dnsresolve response");const A=b[0].toNumber();let E=b[1];if(E instanceof Array&&E.length===0&&(E=null),E&&!E.bits)throw new Error("Invalid dnsresolve response");if(A===0)return null;if(A%8!==0)throw new Error("domain split not at a component boundary");if(A>a)throw new Error("invalid response "+A+"/"+a);if(A===a)return i===mn?E?gn(E):null:i===Ja?E?nl(E):null:i===tl?E?ol(E):null:i===el?E?as(E):null:E;if(E){const F=gn(E);return f?i===mn?F:null:await al(r,F.toString(),e.slice(A/8),i,!1)}else return null},n2=r=>{if(!r||!r.length)throw new Error("empty domain");if(r===".")return new Uint8Array([0]);r=r.toLowerCase();for(let i=0;i<r.length;i++)if(r.charCodeAt(i)<=32)throw new Error("bytes in range 0..32 are not allowed in domain names");for(let i=0;i<r.length;i++){const f=r.substring(i,i+1);for(let a=127;a<=159;a++)if(f===String.fromCharCode(a))throw new Error("bytes in range 127..159 are not allowed in domain names")}const t=r.split(".");t.forEach(i=>{if(!i.length)throw new Error("domain name cannot have an empty component")});let e=t.reverse().join("\0")+"\0";return e.length<126&&(e="\0"+e),new TextEncoder().encode(e)},s2=async(r,t,e,i,f)=>{const a=n2(e);return al(r,t,a,i,f)};var ls={DNS_CATEGORY_NEXT_RESOLVER:mn,DNS_CATEGORY_SITE:tl,DNS_CATEGORY_WALLET:Ja,DNS_CATEGORY_STORAGE:el,categoryToBN:rl,createSmartContractAddressRecord:t2,createAdnlAddressRecord:e2,createNextResolverRecord:i2,parseSmartContractAddressRecord:nl,parseAdnlAddressRecord:sl,parseStorageBagIdRecord:as,parseSiteRecord:ol,parseNextResolverRecord:gn,createStorageBagIdRecord:r2,dnsResolve:s2};const{Cell:m3}=Ft,{Address:o2,bytesToHex:a2}=Bt,{DNS_CATEGORY_NEXT_RESOLVER:l2,DNS_CATEGORY_SITE:ll,DNS_CATEGORY_WALLET:hl,DNS_CATEGORY_STORAGE:h2,createSmartContractAddressRecord:f2,createAdnlAddressRecord:u2,createStorageBagIdRecord:c2,createNextResolverRecord:d2,parseSmartContractAddressRecord:p2,parseAdnlAddressRecord:v2,parseStorageBagIdRecord:m2,parseSiteRecord:g2,parseNextResolverRecord:w2,dnsResolve:fl}=ls;let ne=class{constructor(t){this.provider=t}async getRootDnsAddress(){const e=(await this.provider.getConfigParam(4)).bits.array;if(e.length!==256/8)throw new Error("Invalid ConfigParam 4 length "+e.length);const i=a2(e);return new o2("-1:"+i)}async resolve(t,e,i){const f=await this.getRootDnsAddress();return fl(this.provider,f.toString(),t,e,i)}getWalletAddress(t){return this.resolve(t,hl)}getSiteAddress(t){return this.resolve(t,ll)}};ne.resolve=fl;ne.createSmartContractAddressRecord=f2;ne.createAdnlAddressRecord=u2;ne.createStorageBagIdRecord=c2;ne.createNextResolverRecord=d2;ne.parseNextResolverRecord=w2;ne.parseAdnlAddressRecord=v2;ne.parseStorageBagIdRecord=m2;ne.parseSiteRecord=g2;ne.parseSmartContractAddressRecord=p2;ne.DNS_CATEGORY_NEXT_RESOLVER=l2;ne.DNS_CATEGORY_WALLET=hl;ne.DNS_CATEGORY_SITE=ll;ne.DNS_CATEGORY_STORAGE=h2;Qa.default=ne;const{Contract:y2}=ee,{Cell:wo}=Ft,{Address:w3}=Bt,{parseAddress:b2}=se,{dnsResolve:C2}=ls,{parseOffchainUriCell:E2}=se;let A2=class extends y2{constructor(t,e){if(e.wc=0,e.code=e.code,super(t,e),!e.collectionContent&&!e.address)throw new Error("required collectionContent cell");this.methods.getCollectionData=this.getCollectionData.bind(this),this.methods.getNftItemAddressByIndex=this.getNftItemAddressByIndex.bind(this),this.methods.getNftItemContent=this.getNftItemContent.bind(this),this.methods.resolve=this.resolve.bind(this)}createDataCell(){const t=new wo;return t.refs[0]=this.options.collectionContent,t.refs[1]=wo.oneFromBoc(this.options.dnsItemCodeHex),t}async getCollectionData(){const t=await this.getAddress(),e=await this.provider.call2(t.toString(),"get_collection_data"),i=e[0].toNumber(),f=e[1];return{collectionContentUri:E2(f),collectionContent:f,ownerAddress:null,nextItemIndex:i}}async getNftItemContent(t){return await t.getData()}async getNftItemAddressByIndex(t){const e=await this.getAddress(),i=await this.provider.call2(e.toString(),"get_nft_address_by_index",[["num",t.toString()]]);return b2(i)}async resolve(t,e,i){const f=await this.getAddress();return C2(this.provider,f.toString(),t,e,i)}};var M2={DnsCollection:A2};const{Contract:B2}=ee,{Cell:ii}=Ft,{Address:b3,BN:F2}=Bt,{parseAddress:Gi}=se,{dnsResolve:x2,categoryToBN:S2}=ls;let ul=class extends B2{constructor(t,e){e.wc=0,e.code=e.code,super(t,e),this.methods.getData=this.getData.bind(this),this.methods.getDomain=this.getDomain.bind(this),this.methods.getAuctionInfo=this.getAuctionInfo.bind(this),this.methods.getLastFillUpTime=this.getLastFillUpTime.bind(this),this.methods.resolve=this.resolve.bind(this)}createDataCell(){const t=new ii;return t.bits.writeUint(this.options.index,256),t.bits.writeAddress(this.options.collectionAddress),t}async getData(){const t=await this.getAddress(),e=await this.provider.call2(t.toString(),"get_nft_data"),i=e[0].toNumber()===-1,f=e[1],a=Gi(e[2]),w=i?Gi(e[3]):null,C=e[4];return{isInitialized:i,index:f,collectionAddress:a,ownerAddress:w,contentCell:C}}async createTransferBody(t){const e=new ii;return e.bits.writeUint(1607220500,32),e.bits.writeUint(t.queryId||0,64),e.bits.writeAddress(t.newOwnerAddress),e.bits.writeAddress(t.responseAddress),e.bits.writeBit(!1),e.bits.writeCoins(t.forwardAmount||new F2(0)),e.bits.writeBit(!1),t.forwardPayload&&e.bits.writeBytes(t.forwardPayload),e}createGetStaticDataBody(t){const e=new ii;return e.bits.writeUint(801842850,32),e.bits.writeUint(t.queryId||0,64),e}async getDomain(){const t=await this.getAddress(),e=await this.provider.call2(t.toString(),"get_domain");return new TextDecoder().decode(e.bits.array.buffer)}async getAuctionInfo(){const t=await this.getAddress(),e=await this.provider.call2(t.toString(),"get_auction_info"),i=Gi(e[0]),f=e[1],a=e[2].toNumber();return{maxBidAddress:i,maxBidAmount:f,auctionEndTime:a}}async getLastFillUpTime(){const t=await this.getAddress();return(await this.provider.call2(t.toString(),"get_last_fill_up_time")).toNumber()}async resolve(t,e,i){const f=await this.getAddress();return x2(this.provider,f.toString(),t,e,i)}};ul.createChangeContentEntryBody=async r=>{const t=new ii;return t.bits.writeUint(1320284409,32),t.bits.writeUint(r.queryId||0,64),t.bits.writeUint(await S2(r.category),256),r.value&&(t.refs[0]=r.value),t};var D2={DnsItem:ul};const _2=Qa.default,{DnsCollection:I2}=M2,{DnsItem:T2}=D2;Xa.default={Dns:_2,DnsCollection:I2,DnsItem:T2};const fi=Bt,cl=fi.Address,dl=Ft,N2=uf,pl=Ho.default,{Contract:vl}=ee,ml=jo.default,gl=h0.default,R2=g0.default,$2=b0.default,yo=B0.default,{BlockSubscription:wl,InMemoryBlockStorage:yl}=ku,{SubscriptionContract:U2}=Wu,{Payments:bl,PaymentChannel:L2}=Tc,O2=Dm.default,P2=Rm.default,k2=Gw.default,{Dns:Cl,DnsCollection:q2,DnsItem:W2}=Xa.default,El="0.0.66";class Jt{constructor(t){this.version=El,this.utils=fi,this.Address=cl,this.boc=dl,this.Contract=vl,this.BlockSubscription=wl,this.InMemoryBlockStorage=yl,this.provider=t||new pl,this.dns=new Cl(this.provider),this.wallet=new ml(this.provider),this.payments=new bl(this.provider),this.lockupWallet=gl}async getTransactions(t,e=20,i=void 0,f=void 0,a=void 0){return this.provider.getTransactions(t.toString(),e,i,f,a)}async getBalance(t){return this.provider.getBalance(t.toString())}async sendBoc(t){return this.provider.sendBoc(fi.bytesToBase64(t))}async call(t,e,i=[]){return this.provider.call(t.toString(),e,i)}}Jt.version=El;Jt.utils=fi;Jt.Address=cl;Jt.boc=dl;Jt.HttpProvider=pl;Jt.Contract=vl;Jt.Wallets=ml;Jt.LockupWallets=gl;Jt.SubscriptionContract=U2;Jt.BlockSubscription=wl;Jt.InMemoryBlockStorage=yl;Jt.ledger={TransportWebUSB:O2,TransportWebHID:P2,BluetoothTransport:k2,AppTon:N2};Jt.token={nft:$2,ft:yo,jetton:yo};Jt.HighloadWallets=R2;Jt.dns=Cl;Jt.dns.DnsCollection=q2;Jt.dns.DnsItem=W2;Jt.payments=bl;Jt.payments.PaymentChannel=L2;var H2=Jt;const V2=yn(H2),E3=Object.freeze(Object.defineProperty({__proto__:null,default:V2},Symbol.toStringTag,{value:"Module"}));export{E3 as i};
